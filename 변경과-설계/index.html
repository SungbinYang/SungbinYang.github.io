<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, minimal-ui"/><style data-href="/styles.06884e94fa8e7f768648.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#ccc;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}pre[class*=language-].line-numbers{counter-reset:linenumber;padding-left:3.8em;position:relative}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{border-right:1px solid #999;font-size:100%;left:-3.8em;letter-spacing:-1px;pointer-events:none;position:absolute;top:0;-webkit-user-select:none;-ms-user-select:none;user-select:none;width:3em}.line-numbers-rows>span{counter-increment:linenumber;display:block}.line-numbers-rows>span:before{color:#999;content:counter(linenumber);display:block;padding-right:.8em;text-align:right}</style><meta name="generator" content="Gatsby 4.4.0"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" title="Sungbin&#x27;s Blog RSS Feed" href="/rss.xml"/><title data-react-helmet="true">[오브젝트] 변경과 설계 · Sungbin</title><meta data-react-helmet="true" name="description" content="양성빈의 블로그"/><meta data-react-helmet="true" name="image" content="https://sungbin.kr/static/3189e9c0404650ccc6c5ffc998bc8717/banner.png"/><meta data-react-helmet="true" property="og:url" content="https://sungbin.kr/변경과-설계/"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="[오브젝트] 변경과 설계"/><meta data-react-helmet="true" property="og:description" content="양성빈의 블로그"/><meta data-react-helmet="true" property="og:image" content="https://sungbin.kr/static/3189e9c0404650ccc6c5ffc998bc8717/banner.png"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:title" content="[오브젝트] 변경과 설계"/><meta data-react-helmet="true" name="twitter:description" content="양성빈의 블로그"/><meta data-react-helmet="true" name="twitter:image" content="https://sungbin.kr/static/3189e9c0404650ccc6c5ffc998bc8717/banner.png"/><meta data-react-helmet="true" name="google-site-verification" content="1PmwbFiy4YMimCQ6EmhZyUp2c7m23NNnr5NQRRXwQzM"/><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>            
              (adsbygoogle = window.adsbygoogle || []).push({
                google_ad_client: "ca-pub-8854437638395695",
                enable_page_level_ads: true
              });
          </script><link rel="icon" href="/favicon-32x32.png?v=64afaa923d984d8eeb697e501bbca8ed" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="36x36" href="/favicons/android-icon-36x36.png?v=64afaa923d984d8eeb697e501bbca8ed"/><link rel="apple-touch-icon" sizes="48x48" href="/favicons/android-icon-48x48.png?v=64afaa923d984d8eeb697e501bbca8ed"/><link rel="apple-touch-icon" sizes="72x72" href="/favicons/android-icon-72x72.png?v=64afaa923d984d8eeb697e501bbca8ed"/><link rel="apple-touch-icon" sizes="96x96" href="/favicons/android-icon-96x96.png?v=64afaa923d984d8eeb697e501bbca8ed"/><link rel="apple-touch-icon" sizes="144x144" href="/favicons/android-icon-144x144.png?v=64afaa923d984d8eeb697e501bbca8ed"/><link rel="apple-touch-icon" sizes="192x192" href="/favicons/android-icon-192x192.png?v=64afaa923d984d8eeb697e501bbca8ed"/><link as="script" rel="preload" href="/webpack-runtime-dc0bb413e606a75101a8.js"/><link as="script" rel="preload" href="/framework-96f35882fb1b7fa32ef9.js"/><link as="script" rel="preload" href="/b633362c-429f9f687c864375c1ce.js"/><link as="script" rel="preload" href="/63a121f2-37023b2342386794d0fe.js"/><link as="script" rel="preload" href="/f3fee096-8a3be85b266f9ba6922d.js"/><link as="script" rel="preload" href="/3e15977f-5148ca5d1a687341b4e3.js"/><link as="script" rel="preload" href="/aec3edcd-33ff14c394bc1bedc44a.js"/><link as="script" rel="preload" href="/2425c7c2-8c4925ac74b0ebf7da0a.js"/><link as="script" rel="preload" href="/d0007318-557f95e6f5b855c64727.js"/><link as="script" rel="preload" href="/cc76255b-3222831408842f40a1cb.js"/><link as="script" rel="preload" href="/1593e758-7868fce8d5ccd9520ad2.js"/><link as="script" rel="preload" href="/48aa8186-67735c86ae4015d55662.js"/><link as="script" rel="preload" href="/app-3fa8deb48819dbe669b2.js"/><link as="script" rel="preload" href="/386142cf738b86b246078cd67abf8098b07f27c7-c2f146ac4a2834844fc5.js"/><link as="script" rel="preload" href="/component---src-template-post-tsx-dd1bdb1f60c2459dd837.js"/><link as="fetch" rel="preload" href="/page-data/변경과-설계/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2580406332.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3810308631.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><style data-emotion="css-global 19c91lz">@import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');:root{--font-family:'Pretendard',-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;--code-font-family:Menlo,'DM Mono','Roboto Mono',Courier New,monospace;--scrollbar-background:#1e1e1e;--scrollbar-thumb:#666;--scrollbar-thumb-highlight:#9195F6;}html{font-size:16px;height:100%;overflow-x:hidden;overflow-y:scroll;-webkit-overflow-scrolling:touch;scrollbar-width:8px;scrollbar-color:var(--scrollbar-thumb-highlight) var(--scrollbar-background);}@media screen and (max-width: 1024px){html{font-size:14px;}}html::-webkit-scrollbar{background:var(--scrollbar-background);height:8px;width:8px;}html::-webkit-scrollbar-thumb{background:var(--scrollbar-thumb-highlight);border-radius:0;}html,body{font-family:var(--font-family)!important;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;font-size:1rem;}div,article,section{box-sizing:border-box;}html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:1rem;font:inherit;vertical-align:baseline;}label,input,button,a{-webkit-tap-highlight-color:transparent;}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block;}body{line-height:1;}ol,ul{list-style:none;}blockquote,q{quotes:none;}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none;}table{border-collapse:collapse;border-spacing:0;}string{font-weight:600!important;}</style><style data-emotion="css pyz3l8">.css-pyz3l8{-webkit-transition:opacity 0.2s ease;transition:opacity 0.2s ease;opacity:0;}</style><div class="css-pyz3l8 e1l8l1ek0"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><style data-emotion="css 1azakc">.css-1azakc{text-align:center;}</style><header class="css-1azakc ebd5ed87"><style data-emotion="css 1j1kikd">.css-1j1kikd{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;max-width:900px;padding:2rem;margin-left:auto;margin-right:auto;}@media screen and (max-width: 1024px){.css-1j1kikd{padding:1.5rem 1rem;}}</style><div class="css-1j1kikd ebd5ed86"><style data-emotion="css 1cdt2kf">.css-1cdt2kf{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;width:100%;padding:0 1.5rem;}.css-1cdt2kf>h1{text-align:left;}</style><div class="css-1cdt2kf ebd5ed81"><style data-emotion="css 1gw8sdl">.css-1gw8sdl{color:inherit;font-size:2.5rem;line-height:1.5;font-weight:800;}white-space:nowrap;strong,bold{font-weight:800;}</style><h1 size="40" class="css-1gw8sdl eye3s1s1">[오브젝트] 변경과 설계</h1><style data-emotion="css 1ixtmro">.css-1ixtmro{margin-left:calc(1.5rem - 1px);margin-top:calc(1.5rem - 1px);width:1px;height:1px;min-width:1px;min-height:1px;}</style><span x="1" y="1" class="css-1ixtmro ez28pf0"></span><style data-emotion="css lc9od6">.css-lc9od6{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:relative;min-width:1px;max-width:100%;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;box-sizing:border-box;-webkit-flex:1;-ms-flex:1;flex:1;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}.css-lc9od6>*:not(:first-of-type){margin-left:calc(0.5 * 1rem);}</style><div wrap="wrap" class="css-lc9od6 e9vu7as0"><style data-emotion="css 9xks5q">.css-9xks5q{display:inline-block;vertical-align:middle;border-radius:16px;font-weight:500;line-height:1;cursor:inherit;font-feature-settings:tnum;font-variant:tabular-nums;text-transform:capitalize;white-space:nowrap;background:#000;color:#ffffff;border:1px solid #000;padding:3px 10px;font-size:1rem;}</style><span type="primary" class="css-9xks5q e1tg7sbi0">#<!-- -->자바</span></div><span x="1" y="1" class="css-1ixtmro ez28pf0"></span><style data-emotion="css 715507">.css-715507{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;}@media screen and (max-width: 1024px){.css-715507{-webkit-flex-direction:column-reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}}</style><div class="css-715507 ebd5ed85"><style data-emotion="css 1u6n871">.css-1u6n871{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}</style><div class="css-1u6n871 ebd5ed84"><style data-emotion="css zdebxm">.css-zdebxm{color:inherit;font-size:1rem;line-height:1.5;}white-space:nowrap;strong,bold{font-weight:800;}</style><span size="16" class="css-zdebxm eye3s1s1">Written by <a href="/">Sungbin</a></span><style data-emotion="css 69wa56">.css-69wa56{margin-left:calc(1.5rem - 1px);margin-top:calc(0.375rem - 1px);width:1px;height:1px;min-width:1px;min-height:1px;}</style><span x="1" y="0.25" class="css-69wa56 ez28pf0"></span><style data-emotion="css 4f3fw3">.css-4f3fw3{color:inherit;font-size:0.875rem;line-height:1.5;}white-space:nowrap;strong,bold{font-weight:800;}</style><span size="14" class="css-4f3fw3 eye3s1s1">2025년 6월 14일<!-- --> · <!-- -->16<!-- --> min read</span></div><style data-emotion="css 1yvy03y">.css-1yvy03y{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:0.5rem;margin-bottom:1.5rem;}</style><div class="css-1yvy03y ebd5ed83"><style data-emotion="css 18zu07s">.css-18zu07s{position:relative;}.css-18zu07s:hover>div:last-of-type{opacity:1;}</style><div class="css-18zu07s emo2hur2"><style data-emotion="css cssveg">.css-cssveg{position:relative;}</style><div class="css-cssveg emo2hur1"><style data-emotion="css 7a8mbj">.css-7a8mbj{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:30px;height:30px;outline:none;border:none;border-radius:15px;cursor:pointer;padding:0;background:#000;color:#ffffff;}</style><button class="css-7a8mbj ebd5ed82"><svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none" shape-rendering="geometricPrecision"><path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"></path></svg></button></div></div><div class="css-18zu07s emo2hur2"><div class="css-cssveg emo2hur1"><button class="css-7a8mbj ebd5ed82"><svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" fill="none" shape-rendering="geometricPrecision"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"></path></svg></button></div></div></div></div></div><span x="1" y="1" class="css-1ixtmro ez28pf0"></span><style data-emotion="css 1d3w5wq">.css-1d3w5wq{width:100%;}</style><div class="css-1d3w5wq ebd5ed80"><style data-emotion="css a1pnd7">.css-a1pnd7{text-align:left;border-top:1px solid #EAEAEA;border-bottom:1px solid #EAEAEA;padding:1.5rem;box-shadow:0 5px 10px rgba(0, 0, 0, 0.12);border-radius:5px;border:none;}</style><div class="css-a1pnd7 e1xjf9tq6"><style data-emotion="css b54kzr">.css-b54kzr{font-weight:600;font-size:1.25rem;-webkit-hyphens:auto;-moz-hyphens:auto;-ms-hyphens:auto;hyphens:auto;margin-top:0;margin-bottom:0;}</style><h3 class="css-b54kzr e1xjf9tq5"><style data-emotion="css 16yxw0r">.css-16yxw0r{width:100%;margin-bottom:0;margin-top:0;border:unset;background:unset;padding:unset;margin:unset;font:unset;text-align:unset;-webkit-appearance:unset;-moz-appearance:unset;-ms-appearance:unset;appearance:unset;}</style><button class="css-16yxw0r e1xjf9tq3"><style data-emotion="css ml2823">.css-ml2823{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;cursor:pointer;vertical-align:baseline;padding:1.5rem 0;color:#000;}</style><span class="css-ml2823 e1xjf9tq2">오브젝트 - 기초편<style data-emotion="css mzobh8">.css-mzobh8{-webkit-transition:-webkit-transform 0.2s ease;transition:transform 0.2s ease;-webkit-transform:rotate(180deg);-moz-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg);}</style><span class="css-mzobh8 e1xjf9tq1"><svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none" shape-rendering="geometricPrecision"><path d="M18 15l-6-6-6 6"></path></svg></span></span></button><style data-emotion="css 153tcrd">.css-153tcrd{font-size:0.75rem;font-weight:400;letter-spacing:normal;margin-bottom:0;display:block;color:#666;}</style><span class="css-153tcrd e1xjf9tq4">시리즈의 글 (6개)</span></h3><style data-emotion="css 10lbtih">.css-10lbtih{font-size:1rem;line-height:26px;overflow-y:hidden;will-change:height;-webkit-transition:height 0.2s ease;transition:height 0.2s ease;}.css-10lbtih>div{margin:1rem 0;}</style><div class="css-10lbtih e1xjf9tq0"><div><style data-emotion="css 6z6c3m">.css-6z6c3m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:relative;min-width:1px;max-width:100%;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;box-sizing:border-box;-webkit-flex:1;-ms-flex:1;flex:1;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.css-6z6c3m>section,.css-6z6c3m>div,.css-6z6c3m>article,.css-6z6c3m>header,.css-6z6c3m>footer{gap:calc(1 * 1rem);}.css-6z6c3m:last-of-type{margin-bottom:0;}</style><div class="css-6z6c3m e9vu7as0"><style data-emotion="css 1o02nna">.css-1o02nna{padding-left:1.5rem;box-sizing:border-box;line-height:1.6;list-style:decimal;}</style><ol class="css-1o02nna e1k9d3a01"><style data-emotion="css s3rky0">.css-s3rky0{margin-bottom:0.5rem;}.css-s3rky0::marker{font-weight:600;color:#9195F6;}.css-s3rky0::after{content:'- 16분';margin-left:0.2rem;font-size:0.8rem;}.css-s3rky0>span{cursor:pointer;border-bottom:2px solid #9195F6;font-weight:600;-webkit-text-decoration:none;text-decoration:none;color:#000;-webkit-transition:all 0.1s ease-out;transition:all 0.1s ease-out;}.css-s3rky0>span:hover{background:#9195F6;border-top:2px solid #9195F6;color:#ffffff;}</style><li class="css-s3rky0 e1k9d3a00"><span>[오브젝트] 변경과 설계</span></li><style data-emotion="css 13xotzt">.css-13xotzt{margin-bottom:0.5rem;}.css-13xotzt::marker{font-weight:600;color:#9195F6;}.css-13xotzt::after{content:'- 7분';margin-left:0.2rem;font-size:0.8rem;}.css-13xotzt>span{cursor:pointer;border-bottom:2px solid #9195F6;font-weight:600;-webkit-text-decoration:none;text-decoration:none;color:#000;-webkit-transition:all 0.1s ease-out;transition:all 0.1s ease-out;}.css-13xotzt>span:hover{background:#9195F6;border-top:2px solid #9195F6;color:#ffffff;}</style><li class="css-13xotzt e1k9d3a00"><span>[오브젝트] 객체지향 구현</span></li><style data-emotion="css kco6hv">.css-kco6hv{margin-bottom:0.5rem;}.css-kco6hv::marker{font-weight:600;color:#9195F6;}.css-kco6hv::after{content:'- 8분';margin-left:0.2rem;font-size:0.8rem;}.css-kco6hv>span{cursor:pointer;border-bottom:2px solid #9195F6;font-weight:600;-webkit-text-decoration:none;text-decoration:none;color:#000;-webkit-transition:all 0.1s ease-out;transition:all 0.1s ease-out;}.css-kco6hv>span:hover{background:#9195F6;border-top:2px solid #9195F6;color:#ffffff;}</style><li class="css-kco6hv e1k9d3a00"><span>[오브젝트] 책임 할당하기</span></li><style data-emotion="css 1hda2e5">.css-1hda2e5{margin-bottom:0.5rem;}.css-1hda2e5::marker{font-weight:600;color:#9195F6;}.css-1hda2e5::after{content:'- 4분';margin-left:0.2rem;font-size:0.8rem;}.css-1hda2e5>span{cursor:pointer;border-bottom:2px solid #9195F6;font-weight:600;-webkit-text-decoration:none;text-decoration:none;color:#000;-webkit-transition:all 0.1s ease-out;transition:all 0.1s ease-out;}.css-1hda2e5>span:hover{background:#9195F6;border-top:2px solid #9195F6;color:#ffffff;}</style><li class="css-1hda2e5 e1k9d3a00"><span>[오브젝트] 객체지향 기본 원칙</span></li><li class="css-13xotzt e1k9d3a00"><span>[오브젝트] 절차적인 설계 개선하기</span></li><style data-emotion="css p3ifdu">.css-p3ifdu{margin-bottom:0.5rem;}.css-p3ifdu::marker{font-weight:600;color:#9195F6;}.css-p3ifdu::after{content:'- 2분';margin-left:0.2rem;font-size:0.8rem;}.css-p3ifdu>span{cursor:pointer;border-bottom:2px solid #9195F6;font-weight:600;-webkit-text-decoration:none;text-decoration:none;color:#000;-webkit-transition:all 0.1s ease-out;transition:all 0.1s ease-out;}.css-p3ifdu>span:hover{background:#9195F6;border-top:2px solid #9195F6;color:#ffffff;}</style><li class="css-p3ifdu e1k9d3a00"><span>[오브젝트] 영화 예매 도메인</span></li></ol></div></div></div></div></div></div></header><div><style data-emotion="css ifrico">.css-ifrico{width:100%;max-width:900px;padding:2rem;margin-left:auto;margin-right:auto;width:calc(100vw - 400px);}@media screen and (max-width: 1024px){.css-ifrico{padding:1rem;}}@media screen and (max-width: 1308px){.css-ifrico{width:calc(100vw - 408px);}}@media screen and (max-width: 1024px){.css-ifrico{width:calc(100vw - 8px);}}.css-ifrico p>img{width:100%;}.css-ifrico p{color:#111;font-weight:400;line-height:1.6;letter-spacing:-0.02rem;}.css-ifrico p,.css-ifrico table,.css-ifrico ul,.css-ifrico blockquote,.css-ifrico ol{font-size:1rem;margin:0 0 2rem;}.css-ifrico center{color:#666;font-size:0.8rem;font-weight:400;line-height:1.5;letter-spacing:-0.02rem;margin:0 0 2rem;}.css-ifrico p+center,.css-ifrico iframe+center{margin-top:-1rem;}.css-ifrico h1,.css-ifrico h2,.css-ifrico h3,.css-ifrico h4,.css-ifrico h5{position:relative;color:#000;line-height:1.2;scroll-margin-top:60px;letter-spacing:-0.02rem;font-weight:600;background:none;}.css-ifrico h1>a,.css-ifrico h2>a,.css-ifrico h3>a,.css-ifrico h4>a,.css-ifrico h5>a{color:#000;opacity:0;border:none;position:absolute;top:50%;left:0;-webkit-transform:translate(-100%, -50%);-moz-transform:translate(-100%, -50%);-ms-transform:translate(-100%, -50%);transform:translate(-100%, -50%);padding-right:4px;}.css-ifrico h1:hover>a,.css-ifrico h2:hover>a,.css-ifrico h3:hover>a,.css-ifrico h4:hover>a,.css-ifrico h5:hover>a{color:#000;background:none;border:none;opacity:1;}.css-ifrico h2:not(:first-of-type),.css-ifrico h3:not(:first-of-type),.css-ifrico h4:not(:first-of-type){margin-top:3rem;}.css-ifrico h1,.css-ifrico h2,.css-ifrico h3,.css-ifrico h4,.css-ifrico h5{margin:0 0 1.25rem;}.css-ifrico h1,.css-ifrico h2{font-size:1.8rem;-webkit-filter:brightness(1);filter:brightness(1);}.css-ifrico h3{font-size:1.4rem;-webkit-filter:brightness(1.3);filter:brightness(1.3);}.css-ifrico h4{-webkit-filter:brightness(1.5);filter:brightness(1.5);font-size:1.1rem;padding-bottom:0.25rem;text-transform:uppercase;}.css-ifrico ul,.css-ifrico ol{padding-left:1.5rem;box-sizing:border-box;line-height:1.6;}.css-ifrico ul ul,.css-ifrico ol ul{margin-top:8px;}.css-ifrico ul ul,.css-ifrico ol ul,.css-ifrico ul ol,.css-ifrico ol ol{margin-bottom:0;}.css-ifrico ul{list-style:disc;}.css-ifrico ol{list-style:decimal;}.css-ifrico ul li{margin-bottom:0.5rem;}.css-ifrico ul li::marker{font-weight:600;color:#9195F6;}.css-ifrico ol li{margin-bottom:0.5rem;}.css-ifrico ol li::marker{font-weight:600;color:#9195F6;}.css-ifrico li>a{white-space:inherit;word-wrap:break-word;}.css-ifrico li{color:#000;}.css-ifrico li code{font-weight:600;color:#9195F6;white-space:inherit;}.css-ifrico li code * span{white-space:inherit;}.css-ifrico li code * span:not([class='grvsc-source']){padding-left:0!important;}.css-ifrico iframe{margin-bottom:2rem;}.css-ifrico div[class*='markdown-wrapper']{font-size:0.9rem;-webkit-text-size-adjust:none;-moz-text-size-adjust:none;-ms-text-size-adjust:none;text-size-adjust:none;margin:1rem -1rem;overflow-x:auto;overflow-y:hidden;box-sizing:border-box;scrollbar-width:8px;scrollbar-color:var(--scrollbar-thumb) var(--scrollbar-background);}.css-ifrico div[class*='markdown-wrapper']::-webkit-scrollbar{background:var(--scrollbar-background);height:8px;width:8px;}.css-ifrico div[class*='markdown-wrapper']::-webkit-scrollbar-thumb{background:var(--scrollbar-thumb);border-radius:0;}@media screen and (min-width: 1350px){.css-ifrico div[class*='markdown-wrapper']{margin-left:-3.5rem;margin-right:-3.5rem;margin-bottom:2rem;}}@media screen and (max-width: 1024px){.css-ifrico div[class*='markdown-wrapper']{padding-left:1rem;}}.css-ifrico pre{border-radius:0;float:left;margin-bottom:0;margin-top:0;min-width:calc(100% + 1rem);padding:1rem 1rem 1rem 0;-webkit-font-smoothing:subpixel-antialiased;overflow:initial;white-space:pre;font-family:var(--code-font-family);word-wrap:normal;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;tab-size:2;word-break:normal;word-spacing:normal;}.css-ifrico pre>code{font-weight:600;color:#9195F6;white-space:inherit;}.css-ifrico pre>code * span{white-space:inherit;}.css-ifrico pre>code * span:not([class='grvsc-source']){padding-left:0!important;}.css-ifrico .line-numbers-rows{padding-left:1em;padding-top:1em;}.css-ifrico p>code{font-weight:600;color:#9195F6;white-space:inherit;}.css-ifrico p>code * span{white-space:inherit;}.css-ifrico p>code * span:not([class='grvsc-source']){padding-left:0!important;}.css-ifrico img[class='gatsby-resp-image-image']{box-shadow:none!important;}.css-ifrico img[class='gatsby-resp-image-image'][alt]:after{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:absolute;top:0;left:0;width:100%;height:100%;background:#ffffff;font-weight:200;content:'이미지를 표시할 수 없어요. :(';}.css-ifrico blockquote{background:#EAEAEA;margin:0 -1rem;margin-bottom:2rem;padding:1rem 1rem;border-left:6px solid #9195F6;}.css-ifrico blockquote>p{margin-bottom:0;}@media screen and (min-width: 1350px){.css-ifrico blockquote{margin-left:-3.5rem;margin-right:-3.5rem;}}@media screen and (max-width: 1024px){.css-ifrico blockquote{padding-left:1rem;}}</style><section class="css-ifrico e17f2jor0"><p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAAApUlEQVQoz6WRPQvCQAyG+///R6GKm6AndhIcrNaiXVzEaqVaPym9Xs67XuIgiEvFw2whPDxJXof+KOf7uD4cUWtLGJGIHpMA2PDdWpgBqRyNOfMVkTHmV/ilSW7QjfPF+hRnpVC1hVkb3Nxla54NVpczVw1bN8Co9TbJw7QIdsX+Wtk9DHklXU+3O6bXl66HIG1gIQTzIVrCNJSzCJWyzLnp0A/4CfW+SjF6WKSqAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="배너 이미지"
        title="배너 이미지"
        src="/static/3189e9c0404650ccc6c5ffc998bc8717/2bef9/banner.png"
        srcset="/static/3189e9c0404650ccc6c5ffc998bc8717/6f3f2/banner.png 256w,
/static/3189e9c0404650ccc6c5ffc998bc8717/01e7c/banner.png 512w,
/static/3189e9c0404650ccc6c5ffc998bc8717/2bef9/banner.png 1024w,
/static/3189e9c0404650ccc6c5ffc998bc8717/71c1d/banner.png 1536w,
/static/3189e9c0404650ccc6c5ffc998bc8717/e8950/banner.png 2000w"
        sizes="(max-width: 1024px) 100vw, 1024px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
    </span></p>
<blockquote>
<p>해당 블로그 글은 <a href="https://inf.run/eUUx4">조영호님의 인프런 강의</a>를 바탕으로 쓰여진 글입니다.</p>
</blockquote>
<h2>변경과 설계</h2>
<p>우리는 영황 예매 시스템을 설계하면서 절차지향적 관점에서의 설계와 객체지향적 관점에서의 설계 방식을 모두 알아 보았다. 절차지향적 설계는 데이터와 프로세스를 분리하여 설계를 진행했던 반면에 객체지향적 설계는 데이터와 프로세스를 하나의 모듈로 묶어서 설계를 진행하였다.</p>
<p>그럼 여기서 근본적인 질문을 한번 던져보겠다. 훌륭한 설계란 무엇일까? 훌륭한 설계란 응집도가 높고 결합도가 낮고 캡슐화를 지키도록 코드를 배치하는 설계 방식이 보통 훌륭한 설계라고 말한다. 그럼 이런 훌륭한 설계를 진행함에 있어서 <strong>응집도</strong>, <strong>결합도</strong>, <strong>캡슐화</strong>이 무엇인지 알고 해당 관점에서 살펴봐야 할 것이다.</p>
<h3>응집도</h3>
<p>응집도란, 모듈 내부 요소들 사이의 기능적인 부분에 집중을 나타내는 것을 의미한다. 즉, 모듈 내부에 데이터와 메서드 간에 관련된 정도를 뜻하는 것이다. 보통 하나의 기능에 집중된 모듈을 응집도가 높다라고 표현하며, 서로 다른 기능이 혼재된 모듈을 응집도가 낮다라고 표현한다. 즉, 훌륭한 설계를 진행하려면 응집도가 높은 설계를 진행해야 한다.</p>
<h3>결합도</h3>
<p>결합도란, 모듈이 외부의 다른 모듈에 의존하는 정도를 의미한다. 즉, 모듈이 다른 모듈에 대해 알고있는 지식의 양을 뜻하는 것이다. 하나의 모듈이 다른 모듈에 의존하는 정도가 높으면 결합도가 높다 혹은 강하다라고 표현하며, 의존하는 정도가 낮으면 결합도가 낮다 혹은 약하다라고 표현한다. 훌륭한 설계를 진행하려면 결합도가 낮은 설계를 진행해야 한다.</p>
<h3>캡슐화</h3>
<p>캡슐화란, 내부의 데이터와 메서드를 하나의 단위로 묶는 과정을 의미한다. 이렇게 하나의 단위로 묶으면서 외부로부터 데이터에 대한 직접적인 접근을 제한하며 공용 인터페이스를 통해서만 접근을 허용하는 것이다.</p>
<p>그러면 위의 응집도, 결합도, 캡슐화에 정의에 대해 살펴보았지만 이 정의만 딱 보고 코드 설계를 할 때 큰 도움이 될까? 물론 그러시는 독자분들도 있겠지만 필자 입장에서는 그리 크게 도움되지는 않는 것 같다. 즉, 뭔가 설계 가이드같은 것이 있으면 좋겠다는 생각이 든다. 하지만 실제 이런 가이드는 딱히 존재하지를 않는다.</p>
<p>우리는 프로그램을 개발하면서 변경하기 쉽게 코드를 배치하는 것을 훌륭한 설계라고 한다. <code>SOLID</code> 원칙과 같이 유명한 모든 설계 원칙 이론들은 변경과 관련이 있다. 디자인 패턴도 마찬가지다. 디자인 패턴을 학습할 때 어떤 변경을 감추기 위해 어떤 디자인 패턴을 적용하는가에 대해 알아가는 것이다. 즉, 위의 응집도, 결합도, 캡슐화도 변경과 관련이 있는 것이다.</p>
<p>그래서 가이드도 딱히 없는 이런 이론들을 우리가 우리만의 가이드를 만드듯이 절차지향적 설계와 객체지향적 설계를 위의 3가지 관점에서 살펴보면서 한번 비교해본다면 이것이 바로 가이드가 되지 않을까 싶다. 중요한 것은 모든 원칙들은 <strong>변경</strong>과 관련이 있다라는 것을 명심하자.</p>
<p>또한, 코드를 작성하면서 우리는 미리 변경을 예상해서는 안된다. 변경의 축은 변경이 실제로 일어날 때만 변경의 축인 것이다. 이것은 처음에는 코드가 변경되지 않을 것이라고 생각하고 작성을 한다. 그리고 변경이 일어나면 나중에 일어날 그런 종류의 변경에 대해 보호하는 추상화를 구현한다.</p>
<h2>응집도</h2>
<p>그럼 지금부터 변경 관점에서 응집도, 결합도, 캡슐화에 대해 살펴보자. 그럼 첫번째로 변경 관점에서 응집도를 살펴보자.</p>
<p>응집도의 전통적인 관점으로는 모듈 내부 요소들 사이의 기능적인 집중도를 의미한다. 즉, 모듈 내부의 데이터와 메서드 간에 관련된 정도를 의미한다. 이런 정도에 따라 응집도가 높다 혹은 낮다라고 표현하며 좋은 설계는 응집도가 높은 설계를 진행해야 한다.</p>
<p>그러면 영화 예매 시스템에서 절차적인 설계 방식의 응집도는 어떨까?</p>
<div class="gatsby-highlight" data-language="java"><div class="markdown-wrapper"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>reservation<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>generic<span class="token punctuation">.</span></span><span class="token class-name">Money</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>reservation<span class="token punctuation">.</span>domain<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>reservation<span class="token punctuation">.</span>persistence<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReservationService</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">ScreeningDAO</span> screeningDAO<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">MovieDAO</span> movieDAO<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">DiscountPolicyDAO</span> discountPolicyDAO<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">DiscountConditionDAO</span> discountConditionDAO<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">ReservationDAO</span> reservationDAO<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">ReservationService</span><span class="token punctuation">(</span><span class="token class-name">ScreeningDAO</span> screeningDAO<span class="token punctuation">,</span> <span class="token class-name">MovieDAO</span> movieDAO<span class="token punctuation">,</span> <span class="token class-name">DiscountPolicyDAO</span> discountPolicyDAO<span class="token punctuation">,</span>
                              <span class="token class-name">DiscountConditionDAO</span> discountConditionDAO<span class="token punctuation">,</span> <span class="token class-name">ReservationDAO</span> reservationDAO<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>screeningDAO <span class="token operator">=</span> screeningDAO<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>movieDAO <span class="token operator">=</span> movieDAO<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>discountConditionDAO <span class="token operator">=</span> discountConditionDAO<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>discountPolicyDAO <span class="token operator">=</span> discountPolicyDAO<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>reservationDAO <span class="token operator">=</span> reservationDAO<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Reservation</span> <span class="token function">reserveScreening</span><span class="token punctuation">(</span><span class="token class-name">Long</span> customerId<span class="token punctuation">,</span> <span class="token class-name">Long</span> screeningId<span class="token punctuation">,</span> <span class="token class-name">Integer</span> audienceCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Screening</span> screening <span class="token operator">=</span> screeningDAO<span class="token punctuation">.</span><span class="token function">selectScreening</span><span class="token punctuation">(</span>screeningId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Movie</span> movie <span class="token operator">=</span> movieDAO<span class="token punctuation">.</span><span class="token function">selectMovie</span><span class="token punctuation">(</span>screening<span class="token punctuation">.</span><span class="token function">getMovieId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">DiscountPolicy</span> policy <span class="token operator">=</span> discountPolicyDAO<span class="token punctuation">.</span><span class="token function">selectDiscountPolicy</span><span class="token punctuation">(</span>movie<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DiscountCondition</span><span class="token punctuation">></span></span> conditions <span class="token operator">=</span> discountConditionDAO<span class="token punctuation">.</span><span class="token function">selectDiscountConditions</span><span class="token punctuation">(</span>policy<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">DiscountCondition</span> condition <span class="token operator">=</span> <span class="token function">findDiscountCondition</span><span class="token punctuation">(</span>screening<span class="token punctuation">,</span> conditions<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Money</span> fee<span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>condition <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            fee <span class="token operator">=</span> movie<span class="token punctuation">.</span><span class="token function">getFee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">minus</span><span class="token punctuation">(</span><span class="token function">calculateDiscount</span><span class="token punctuation">(</span>policy<span class="token punctuation">,</span> movie<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            fee <span class="token operator">=</span> movie<span class="token punctuation">.</span><span class="token function">getFee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">Reservation</span> reservation <span class="token operator">=</span> <span class="token function">makeReservation</span><span class="token punctuation">(</span>customerId<span class="token punctuation">,</span> screeningId<span class="token punctuation">,</span> audienceCount<span class="token punctuation">,</span> fee<span class="token punctuation">)</span><span class="token punctuation">;</span>
        reservationDAO<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>reservation<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> reservation<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">DiscountCondition</span> <span class="token function">findDiscountCondition</span><span class="token punctuation">(</span><span class="token class-name">Screening</span> screening<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DiscountCondition</span><span class="token punctuation">></span></span> conditions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">DiscountCondition</span> condition <span class="token operator">:</span> conditions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>condition<span class="token punctuation">.</span><span class="token function">isPeriodCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>screening<span class="token punctuation">.</span><span class="token function">isPlayedIn</span><span class="token punctuation">(</span>condition<span class="token punctuation">.</span><span class="token function">getDayOfWeek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        condition<span class="token punctuation">.</span><span class="token function">getStartTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        condition<span class="token punctuation">.</span><span class="token function">getEndTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> condition<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>condition<span class="token punctuation">.</span><span class="token function">getSequence</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>screening<span class="token punctuation">.</span><span class="token function">getSequence</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> condition<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">Money</span> <span class="token function">calculateDiscount</span><span class="token punctuation">(</span><span class="token class-name">DiscountPolicy</span> policy<span class="token punctuation">,</span> <span class="token class-name">Movie</span> movie<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>policy<span class="token punctuation">.</span><span class="token function">isAmountPolicy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> policy<span class="token punctuation">.</span><span class="token function">getAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>policy<span class="token punctuation">.</span><span class="token function">isPercentPolicy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> movie<span class="token punctuation">.</span><span class="token function">getFee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">times</span><span class="token punctuation">(</span>policy<span class="token punctuation">.</span><span class="token function">getPercent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token class-name">Money</span><span class="token punctuation">.</span><span class="token constant">ZERO</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">Reservation</span> <span class="token function">makeReservation</span><span class="token punctuation">(</span><span class="token class-name">Long</span> customerId<span class="token punctuation">,</span> <span class="token class-name">Long</span> screeningId<span class="token punctuation">,</span> <span class="token class-name">Integer</span> audienceCount<span class="token punctuation">,</span> <span class="token class-name">Money</span> fee<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Reservation</span><span class="token punctuation">(</span>customerId<span class="token punctuation">,</span> screeningId<span class="token punctuation">,</span> audienceCount<span class="token punctuation">,</span> fee<span class="token punctuation">.</span><span class="token function">times</span><span class="token punctuation">(</span>audienceCount<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></div>
<p>위의 코드를 보면 변경의 관점에서 할인 정책이 바뀔때도 변경이 필요하며 할인 조건이 변경될 때도 위의 코드에 변경이 필요하다. 즉, 응집도가 낮은 코드라고 볼 수 있다. 응집도가 높다라는 것은 모듈 전체가 동일한 이유로 변경이 되어야 하며, 응집도가 낮은 것은 위의 코드처럼 모듈 각 부분이 서로 다른 이유로 변경되는 것을 의미한다.</p>
<p>즉, 응집도는 변경의 이유가 동일해야 하며, 변경의 시점과 속도가 동일해야 한다. 높은 응집도는 모듈 전체가 동일한 시점에 동일한 속도로 변경되어야 하며 모듈 전체가 동일한 이유로 변경되어야 함을 의미한다.</p>
<p>하지만 객체지향적 설계 관점에서는 딱 하나의 이유로만 변경이 된다. 아래의 코드를 보면 할인 정책은 할인 정책 계산 플로우가 변경될때만 코드가 변경이 된다.</p>
<div class="gatsby-highlight" data-language="java"><div class="markdown-wrapper"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>reservation<span class="token punctuation">.</span>domain</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>generic<span class="token punctuation">.</span></span><span class="token class-name">Money</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">DiscountPolicy</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DiscountCondition</span><span class="token punctuation">></span></span> conditions<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">DiscountPolicy</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token class-name">DiscountCondition</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> conditions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>conditions <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>conditions<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Money</span> <span class="token function">calculateDiscount</span><span class="token punctuation">(</span><span class="token class-name">Screening</span> screening<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">DiscountCondition</span> each <span class="token operator">:</span> conditions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>each<span class="token punctuation">.</span><span class="token function">isSatisfiedBy</span><span class="token punctuation">(</span>screening<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token function">getDiscountAmount</span><span class="token punctuation">(</span>screening<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token class-name">Money</span><span class="token punctuation">.</span><span class="token constant">ZERO</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">abstract</span> <span class="token keyword">protected</span> <span class="token class-name">Money</span> <span class="token function">getDiscountAmount</span><span class="token punctuation">(</span><span class="token class-name">Screening</span> screening<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></div>
<p>이런 높은 응집도 관점을 <code>SOLID</code>원칙 중 SRP(단일 책임 원칙)에서 설명을 하고 있다. 그럼 여기서 가이드를 내려보겠다. 어떻게 해야 높은 응집도를 유지하면서 코드를 작성할 수 있을까?</p>
<ul>
<li>클래스가 하나 이상의 이유로 변경된다면 응집도가 낮은 것이다.
<ul>
<li>변경의 이유를 기준으로 클래스를 분리하자.</li>
</ul>
</li>
<li>특정한 메서드 그룹이 특정한 속성 그룹만 사용한다면 응집도가 낮은 것이다.
<ul>
<li>함께 사용되는 메서드와 속성 그룹을 기준으로 클래스를 분리하자.</li>
</ul>
</li>
<li>클래스의 인스턴스를 초기화할 때 경우에 따라 서로 다른 속성들을 초기화한다면(ex. null) 응집도가 낮은 것이다.
<ul>
<li>초기화되는 속성의 그룹을 기준으로 클래스를 분리하자.</li>
</ul>
</li>
</ul>
<h2>결합도</h2>
<p>다음으로 변경 관점에서 결합도를 살펴보자.</p>
<p>결합도의 전통적인 관점에서 바라보면 결합도는 모듈이 다른 외부의 다른 모듈에 의존하는 정도를 의미한다. 즉, 모듈에 대해 알고 있는 지식의 양을 뜻한다. 좋은 설계는 결합도가 낮은 설계를 뜻한다.</p>
<p>그러면 절차지향적 관점 코드에서 결합도가 낮은지 높은지 판단해보자.</p>
<div class="gatsby-highlight" data-language="java"><div class="markdown-wrapper"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>reservation<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>generic<span class="token punctuation">.</span></span><span class="token class-name">Money</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>reservation<span class="token punctuation">.</span>domain<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>reservation<span class="token punctuation">.</span>persistence<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReservationService</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">ScreeningDAO</span> screeningDAO<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">MovieDAO</span> movieDAO<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">DiscountPolicyDAO</span> discountPolicyDAO<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">DiscountConditionDAO</span> discountConditionDAO<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">ReservationDAO</span> reservationDAO<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">ReservationService</span><span class="token punctuation">(</span><span class="token class-name">ScreeningDAO</span> screeningDAO<span class="token punctuation">,</span> <span class="token class-name">MovieDAO</span> movieDAO<span class="token punctuation">,</span> <span class="token class-name">DiscountPolicyDAO</span> discountPolicyDAO<span class="token punctuation">,</span>
                              <span class="token class-name">DiscountConditionDAO</span> discountConditionDAO<span class="token punctuation">,</span> <span class="token class-name">ReservationDAO</span> reservationDAO<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>screeningDAO <span class="token operator">=</span> screeningDAO<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>movieDAO <span class="token operator">=</span> movieDAO<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>discountConditionDAO <span class="token operator">=</span> discountConditionDAO<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>discountPolicyDAO <span class="token operator">=</span> discountPolicyDAO<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>reservationDAO <span class="token operator">=</span> reservationDAO<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Reservation</span> <span class="token function">reserveScreening</span><span class="token punctuation">(</span><span class="token class-name">Long</span> customerId<span class="token punctuation">,</span> <span class="token class-name">Long</span> screeningId<span class="token punctuation">,</span> <span class="token class-name">Integer</span> audienceCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Screening</span> screening <span class="token operator">=</span> screeningDAO<span class="token punctuation">.</span><span class="token function">selectScreening</span><span class="token punctuation">(</span>screeningId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Movie</span> movie <span class="token operator">=</span> movieDAO<span class="token punctuation">.</span><span class="token function">selectMovie</span><span class="token punctuation">(</span>screening<span class="token punctuation">.</span><span class="token function">getMovieId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">DiscountPolicy</span> policy <span class="token operator">=</span> discountPolicyDAO<span class="token punctuation">.</span><span class="token function">selectDiscountPolicy</span><span class="token punctuation">(</span>movie<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DiscountCondition</span><span class="token punctuation">></span></span> conditions <span class="token operator">=</span> discountConditionDAO<span class="token punctuation">.</span><span class="token function">selectDiscountConditions</span><span class="token punctuation">(</span>policy<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">DiscountCondition</span> condition <span class="token operator">=</span> <span class="token function">findDiscountCondition</span><span class="token punctuation">(</span>screening<span class="token punctuation">,</span> conditions<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Money</span> fee<span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>condition <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            fee <span class="token operator">=</span> movie<span class="token punctuation">.</span><span class="token function">getFee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">minus</span><span class="token punctuation">(</span><span class="token function">calculateDiscount</span><span class="token punctuation">(</span>policy<span class="token punctuation">,</span> movie<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            fee <span class="token operator">=</span> movie<span class="token punctuation">.</span><span class="token function">getFee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">Reservation</span> reservation <span class="token operator">=</span> <span class="token function">makeReservation</span><span class="token punctuation">(</span>customerId<span class="token punctuation">,</span> screeningId<span class="token punctuation">,</span> audienceCount<span class="token punctuation">,</span> fee<span class="token punctuation">)</span><span class="token punctuation">;</span>
        reservationDAO<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>reservation<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> reservation<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">DiscountCondition</span> <span class="token function">findDiscountCondition</span><span class="token punctuation">(</span><span class="token class-name">Screening</span> screening<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DiscountCondition</span><span class="token punctuation">></span></span> conditions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">DiscountCondition</span> condition <span class="token operator">:</span> conditions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>condition<span class="token punctuation">.</span><span class="token function">isPeriodCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>screening<span class="token punctuation">.</span><span class="token function">isPlayedIn</span><span class="token punctuation">(</span>condition<span class="token punctuation">.</span><span class="token function">getDayOfWeek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        condition<span class="token punctuation">.</span><span class="token function">getStartTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        condition<span class="token punctuation">.</span><span class="token function">getEndTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> condition<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>condition<span class="token punctuation">.</span><span class="token function">getSequence</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>screening<span class="token punctuation">.</span><span class="token function">getSequence</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> condition<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">Money</span> <span class="token function">calculateDiscount</span><span class="token punctuation">(</span><span class="token class-name">DiscountPolicy</span> policy<span class="token punctuation">,</span> <span class="token class-name">Movie</span> movie<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>policy<span class="token punctuation">.</span><span class="token function">isAmountPolicy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> policy<span class="token punctuation">.</span><span class="token function">getAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>policy<span class="token punctuation">.</span><span class="token function">isPercentPolicy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> movie<span class="token punctuation">.</span><span class="token function">getFee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">times</span><span class="token punctuation">(</span>policy<span class="token punctuation">.</span><span class="token function">getPercent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token class-name">Money</span><span class="token punctuation">.</span><span class="token constant">ZERO</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">Reservation</span> <span class="token function">makeReservation</span><span class="token punctuation">(</span><span class="token class-name">Long</span> customerId<span class="token punctuation">,</span> <span class="token class-name">Long</span> screeningId<span class="token punctuation">,</span> <span class="token class-name">Integer</span> audienceCount<span class="token punctuation">,</span> <span class="token class-name">Money</span> fee<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Reservation</span><span class="token punctuation">(</span>customerId<span class="token punctuation">,</span> screeningId<span class="token punctuation">,</span> audienceCount<span class="token punctuation">,</span> fee<span class="token punctuation">.</span><span class="token function">times</span><span class="token punctuation">(</span>audienceCount<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></div>
<div class="gatsby-highlight" data-language="java"><div class="markdown-wrapper"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>reservation<span class="token punctuation">.</span>domain</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>generic<span class="token punctuation">.</span></span><span class="token class-name">Money</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DiscountPolicy</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">PolicyType</span> <span class="token punctuation">{</span>
        <span class="token constant">PERCENT_POLICY</span><span class="token punctuation">,</span>
        <span class="token constant">AMOUNT_POLICY</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Long</span> movieId<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">PolicyType</span> policyType<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Money</span> amount<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Double</span> percent<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">DiscountPolicy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">DiscountPolicy</span><span class="token punctuation">(</span><span class="token class-name">Long</span> movieId<span class="token punctuation">,</span> <span class="token class-name">PolicyType</span> policyType<span class="token punctuation">,</span> <span class="token class-name">Money</span> amount<span class="token punctuation">,</span> <span class="token class-name">Double</span> percent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> movieId<span class="token punctuation">,</span> policyType<span class="token punctuation">,</span> amount<span class="token punctuation">,</span> percent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">DiscountPolicy</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token class-name">Long</span> movieId<span class="token punctuation">,</span> <span class="token class-name">PolicyType</span> policyType<span class="token punctuation">,</span> <span class="token class-name">Money</span> amount<span class="token punctuation">,</span> <span class="token class-name">Double</span> percent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>movieId <span class="token operator">=</span> movieId<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>policyType <span class="token operator">=</span> policyType<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>amount <span class="token operator">=</span> amount<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>percent <span class="token operator">=</span> percent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">getMovieId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> movieId<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMovieId</span><span class="token punctuation">(</span><span class="token class-name">Long</span> movieId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>movieId <span class="token operator">=</span> movieId<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isAmountPolicy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">PolicyType</span><span class="token punctuation">.</span><span class="token constant">AMOUNT_POLICY</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>policyType<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isPercentPolicy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">PolicyType</span><span class="token punctuation">.</span><span class="token constant">PERCENT_POLICY</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>policyType<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">PolicyType</span> <span class="token function">getPolicyType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> policyType<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPolicyType</span><span class="token punctuation">(</span><span class="token class-name">PolicyType</span> policyType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>policyType <span class="token operator">=</span> policyType<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Money</span> <span class="token function">getAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> amount<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAmount</span><span class="token punctuation">(</span><span class="token class-name">Money</span> amount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>amount <span class="token operator">=</span> amount<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Double</span> <span class="token function">getPercent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> percent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPercent</span><span class="token punctuation">(</span><span class="token class-name">Double</span> percent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>percent <span class="token operator">=</span> percent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></div>
<p>위의 두 코드 <code>ReservationService</code>와 <code>DiscountPolicy</code>가 결합도가 높은지 낮은지 판단해보자. <code>ReservationService</code>는 <code>DiscountPolicy</code>를 의존하고 있다. 클래스 이름을 의존하고 있으며, 메서드 시그니쳐도 의존하고 있다. 그러면 결합도가 높을까? 낮을까?</p>
<p>이를 판단하기 위해 객체지향적 설계 코드도 같이 살펴보자.</p>
<div class="gatsby-highlight" data-language="java"><div class="markdown-wrapper"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>reservation<span class="token punctuation">.</span>domain</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>generic<span class="token punctuation">.</span></span><span class="token class-name">Money</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Movie</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> title<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Money</span> fee<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">DiscountPolicy</span> discountPolicy<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Movie</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token class-name">String</span> title<span class="token punctuation">,</span> <span class="token class-name">Money</span> fee<span class="token punctuation">,</span> <span class="token class-name">DiscountPolicy</span> discountPolicy<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>title <span class="token operator">=</span> title<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fee <span class="token operator">=</span> fee<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>discountPolicy <span class="token operator">=</span> discountPolicy<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Movie</span><span class="token punctuation">(</span><span class="token class-name">String</span> title<span class="token punctuation">,</span> <span class="token class-name">Money</span> fee<span class="token punctuation">,</span> <span class="token class-name">DiscountPolicy</span> discountPolicy<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> title<span class="token punctuation">,</span> fee<span class="token punctuation">,</span> discountPolicy<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Money</span> <span class="token function">calculateFee</span><span class="token punctuation">(</span><span class="token class-name">Screening</span> screening<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> fee<span class="token punctuation">.</span><span class="token function">minus</span><span class="token punctuation">(</span>discountPolicy<span class="token punctuation">.</span><span class="token function">calculateDiscount</span><span class="token punctuation">(</span>screening<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Money</span> <span class="token function">getFee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> fee<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> title<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></div>
<div class="gatsby-highlight" data-language="java"><div class="markdown-wrapper"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>reservation<span class="token punctuation">.</span>domain</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>generic<span class="token punctuation">.</span></span><span class="token class-name">Money</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">DiscountPolicy</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DiscountCondition</span><span class="token punctuation">></span></span> conditions<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">DiscountPolicy</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token class-name">DiscountCondition</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> conditions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>conditions <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>conditions<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Money</span> <span class="token function">calculateDiscount</span><span class="token punctuation">(</span><span class="token class-name">Screening</span> screening<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">DiscountCondition</span> each <span class="token operator">:</span> conditions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>each<span class="token punctuation">.</span><span class="token function">isSatisfiedBy</span><span class="token punctuation">(</span>screening<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token function">getDiscountAmount</span><span class="token punctuation">(</span>screening<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token class-name">Money</span><span class="token punctuation">.</span><span class="token constant">ZERO</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">abstract</span> <span class="token keyword">protected</span> <span class="token class-name">Money</span> <span class="token function">getDiscountAmount</span><span class="token punctuation">(</span><span class="token class-name">Screening</span> screening<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></div>
<p>위의 2개의 <code>Movie</code>와 <code>DiscountPolicy</code>를 살펴보면 <code>Movie</code>는 <code>DiscountPolicy</code>를 의존한다. 일단 클래스 이름도 의존하고 있으며, 메서드 시그니쳐도 의존하고 있다. 그럼 위의 코드는 결합도가 높을까? 낮을까?</p>
<p>결합도가 높은지 낮은지를 보려면 클래스 이름이나 메서드 시그니쳐로만 판단하지 말고 변경의 관점에서도 확인을 해야 한다. 즉, 외부의 다른 모듈에 변경이 발생했을 때 해당 모듈에 의존하고 있는 모듈이 변경이 어느정도가 되는지에 따라 판단해야 한다. 높은 결합도를 가진다면 외부의 모듈이 변경될 때 함께 변경되는 빈도가 상대적으로 높을 것이며 낮은 결합도를 가진다면 외부의 모듈이 변경될 때 함께 변경되는 빈도가 상대적으로 적은 것을 의미할 것이다.</p>
<p>결합도를 낮추는 것은 함께 변경될 가능성을 낮추는 행위를 뜻한다. 그리고 해당 의존성을 제어하는 방식으로 구체적인 부분에 의존하는 것이 아닌 추상적인 부분에 의존하는 것을 뜻한다. 여기서 나오는 원칙이 하나 존재하는데 바로 <strong>의존성 제어의 원칙</strong>이다. 의존성 제어의 원칙은 자주 변하는 구체 부분과 자주 변하지 않는 추상화 부분을 나누는 것을 뜻한다. 그리고 의존성의 방향을 자주 변하지 않는 추상화에 의존시키는 방식을 의미한다. 즉, 추상화에 의존했을 때 결합도를 낮출 수 있다.</p>
<p>즉, 결합도를 낮추는 설계를 하려면 먼저 추상화 부분과 구체 부분을 나눈 후 추상화에 의존시키도록 하는 것이다. 그렇게 하면 구체부분이 변경될 때 추상화 부분의 변경이 일어나는 부수효과를 막을 수 있기 때문이다. 그리고 협력이라는 측면에서 추상화는 인터페이스를 의미하게 된다. 또한 구체 부분을 구현이라고 의미하게 된다. 여기서 나오는 원칙이 존재하게 된다. 바로 <strong>인터페이스와 구현의 분리 원칙</strong>이다. 인터페이스와 구현의 분리 원칙은 구현이 아닌 인터페이스에 대해 프로그래밍하라는 원칙이다.</p>
<p>그럼 코드를 비교해보면서 해당 원칙을 이해해보자. 절차지향적 코드를 다시한번 살펴보자.</p>
<div class="gatsby-highlight" data-language="java"><div class="markdown-wrapper"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>reservation<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>generic<span class="token punctuation">.</span></span><span class="token class-name">Money</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>reservation<span class="token punctuation">.</span>domain<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>reservation<span class="token punctuation">.</span>persistence<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReservationService</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">ScreeningDAO</span> screeningDAO<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">MovieDAO</span> movieDAO<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">DiscountPolicyDAO</span> discountPolicyDAO<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">DiscountConditionDAO</span> discountConditionDAO<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">ReservationDAO</span> reservationDAO<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">ReservationService</span><span class="token punctuation">(</span><span class="token class-name">ScreeningDAO</span> screeningDAO<span class="token punctuation">,</span> <span class="token class-name">MovieDAO</span> movieDAO<span class="token punctuation">,</span> <span class="token class-name">DiscountPolicyDAO</span> discountPolicyDAO<span class="token punctuation">,</span>
                              <span class="token class-name">DiscountConditionDAO</span> discountConditionDAO<span class="token punctuation">,</span> <span class="token class-name">ReservationDAO</span> reservationDAO<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>screeningDAO <span class="token operator">=</span> screeningDAO<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>movieDAO <span class="token operator">=</span> movieDAO<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>discountConditionDAO <span class="token operator">=</span> discountConditionDAO<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>discountPolicyDAO <span class="token operator">=</span> discountPolicyDAO<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>reservationDAO <span class="token operator">=</span> reservationDAO<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Reservation</span> <span class="token function">reserveScreening</span><span class="token punctuation">(</span><span class="token class-name">Long</span> customerId<span class="token punctuation">,</span> <span class="token class-name">Long</span> screeningId<span class="token punctuation">,</span> <span class="token class-name">Integer</span> audienceCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Screening</span> screening <span class="token operator">=</span> screeningDAO<span class="token punctuation">.</span><span class="token function">selectScreening</span><span class="token punctuation">(</span>screeningId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Movie</span> movie <span class="token operator">=</span> movieDAO<span class="token punctuation">.</span><span class="token function">selectMovie</span><span class="token punctuation">(</span>screening<span class="token punctuation">.</span><span class="token function">getMovieId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">DiscountPolicy</span> policy <span class="token operator">=</span> discountPolicyDAO<span class="token punctuation">.</span><span class="token function">selectDiscountPolicy</span><span class="token punctuation">(</span>movie<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DiscountCondition</span><span class="token punctuation">></span></span> conditions <span class="token operator">=</span> discountConditionDAO<span class="token punctuation">.</span><span class="token function">selectDiscountConditions</span><span class="token punctuation">(</span>policy<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">DiscountCondition</span> condition <span class="token operator">=</span> <span class="token function">findDiscountCondition</span><span class="token punctuation">(</span>screening<span class="token punctuation">,</span> conditions<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Money</span> fee<span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>condition <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            fee <span class="token operator">=</span> movie<span class="token punctuation">.</span><span class="token function">getFee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">minus</span><span class="token punctuation">(</span><span class="token function">calculateDiscount</span><span class="token punctuation">(</span>policy<span class="token punctuation">,</span> movie<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            fee <span class="token operator">=</span> movie<span class="token punctuation">.</span><span class="token function">getFee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">Reservation</span> reservation <span class="token operator">=</span> <span class="token function">makeReservation</span><span class="token punctuation">(</span>customerId<span class="token punctuation">,</span> screeningId<span class="token punctuation">,</span> audienceCount<span class="token punctuation">,</span> fee<span class="token punctuation">)</span><span class="token punctuation">;</span>
        reservationDAO<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>reservation<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> reservation<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">DiscountCondition</span> <span class="token function">findDiscountCondition</span><span class="token punctuation">(</span><span class="token class-name">Screening</span> screening<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DiscountCondition</span><span class="token punctuation">></span></span> conditions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">DiscountCondition</span> condition <span class="token operator">:</span> conditions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>condition<span class="token punctuation">.</span><span class="token function">isPeriodCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>screening<span class="token punctuation">.</span><span class="token function">isPlayedIn</span><span class="token punctuation">(</span>condition<span class="token punctuation">.</span><span class="token function">getDayOfWeek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        condition<span class="token punctuation">.</span><span class="token function">getStartTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        condition<span class="token punctuation">.</span><span class="token function">getEndTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> condition<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>condition<span class="token punctuation">.</span><span class="token function">getSequence</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>screening<span class="token punctuation">.</span><span class="token function">getSequence</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> condition<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">Money</span> <span class="token function">calculateDiscount</span><span class="token punctuation">(</span><span class="token class-name">DiscountPolicy</span> policy<span class="token punctuation">,</span> <span class="token class-name">Movie</span> movie<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>policy<span class="token punctuation">.</span><span class="token function">isAmountPolicy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> policy<span class="token punctuation">.</span><span class="token function">getAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>policy<span class="token punctuation">.</span><span class="token function">isPercentPolicy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> movie<span class="token punctuation">.</span><span class="token function">getFee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">times</span><span class="token punctuation">(</span>policy<span class="token punctuation">.</span><span class="token function">getPercent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token class-name">Money</span><span class="token punctuation">.</span><span class="token constant">ZERO</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">Reservation</span> <span class="token function">makeReservation</span><span class="token punctuation">(</span><span class="token class-name">Long</span> customerId<span class="token punctuation">,</span> <span class="token class-name">Long</span> screeningId<span class="token punctuation">,</span> <span class="token class-name">Integer</span> audienceCount<span class="token punctuation">,</span> <span class="token class-name">Money</span> fee<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Reservation</span><span class="token punctuation">(</span>customerId<span class="token punctuation">,</span> screeningId<span class="token punctuation">,</span> audienceCount<span class="token punctuation">,</span> fee<span class="token punctuation">.</span><span class="token function">times</span><span class="token punctuation">(</span>audienceCount<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></div>
<div class="gatsby-highlight" data-language="java"><div class="markdown-wrapper"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>reservation<span class="token punctuation">.</span>domain</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>generic<span class="token punctuation">.</span></span><span class="token class-name">Money</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DiscountPolicy</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">PolicyType</span> <span class="token punctuation">{</span>
        <span class="token constant">PERCENT_POLICY</span><span class="token punctuation">,</span>
        <span class="token constant">AMOUNT_POLICY</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Long</span> movieId<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">PolicyType</span> policyType<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Money</span> amount<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Double</span> percent<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">DiscountPolicy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">DiscountPolicy</span><span class="token punctuation">(</span><span class="token class-name">Long</span> movieId<span class="token punctuation">,</span> <span class="token class-name">PolicyType</span> policyType<span class="token punctuation">,</span> <span class="token class-name">Money</span> amount<span class="token punctuation">,</span> <span class="token class-name">Double</span> percent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> movieId<span class="token punctuation">,</span> policyType<span class="token punctuation">,</span> amount<span class="token punctuation">,</span> percent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">DiscountPolicy</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token class-name">Long</span> movieId<span class="token punctuation">,</span> <span class="token class-name">PolicyType</span> policyType<span class="token punctuation">,</span> <span class="token class-name">Money</span> amount<span class="token punctuation">,</span> <span class="token class-name">Double</span> percent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>movieId <span class="token operator">=</span> movieId<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>policyType <span class="token operator">=</span> policyType<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>amount <span class="token operator">=</span> amount<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>percent <span class="token operator">=</span> percent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">getMovieId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> movieId<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMovieId</span><span class="token punctuation">(</span><span class="token class-name">Long</span> movieId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>movieId <span class="token operator">=</span> movieId<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isAmountPolicy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">PolicyType</span><span class="token punctuation">.</span><span class="token constant">AMOUNT_POLICY</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>policyType<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isPercentPolicy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">PolicyType</span><span class="token punctuation">.</span><span class="token constant">PERCENT_POLICY</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>policyType<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">PolicyType</span> <span class="token function">getPolicyType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> policyType<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPolicyType</span><span class="token punctuation">(</span><span class="token class-name">PolicyType</span> policyType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>policyType <span class="token operator">=</span> policyType<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Money</span> <span class="token function">getAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> amount<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAmount</span><span class="token punctuation">(</span><span class="token class-name">Money</span> amount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>amount <span class="token operator">=</span> amount<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Double</span> <span class="token function">getPercent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> percent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPercent</span><span class="token punctuation">(</span><span class="token class-name">Double</span> percent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>percent <span class="token operator">=</span> percent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></div>
<p><code>calculateDiscount</code> 메서드는 <code>DiscountPolicy</code>의 <code>getter/setter</code>에 의존한다. 즉, <code>DiscountPolicy</code>의 <code>getter/setter</code>가 인터페이스가 되고 <code>DiscountPolicy</code>의 멤버 변수들이 구현부가 되는 것이다. 그럼 만약 구현부를 변경한다고 가정하자. 즉, 필드의 타입이나 멤버 변수 명을 변경하게 된다면 인터페이스가 대거 변경이 일어나고 <code>ReservationService</code>의 <code>calculateDiscount</code> 메서드의 변경도 발생하는 부수효과가 일어난다. 그럼 객체지향적인 설계 코드를 다시 살펴보자.</p>
<div class="gatsby-highlight" data-language="java"><div class="markdown-wrapper"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>reservation<span class="token punctuation">.</span>domain</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>generic<span class="token punctuation">.</span></span><span class="token class-name">Money</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Movie</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> title<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Money</span> fee<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">DiscountPolicy</span> discountPolicy<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Movie</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token class-name">String</span> title<span class="token punctuation">,</span> <span class="token class-name">Money</span> fee<span class="token punctuation">,</span> <span class="token class-name">DiscountPolicy</span> discountPolicy<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>title <span class="token operator">=</span> title<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fee <span class="token operator">=</span> fee<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>discountPolicy <span class="token operator">=</span> discountPolicy<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Movie</span><span class="token punctuation">(</span><span class="token class-name">String</span> title<span class="token punctuation">,</span> <span class="token class-name">Money</span> fee<span class="token punctuation">,</span> <span class="token class-name">DiscountPolicy</span> discountPolicy<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> title<span class="token punctuation">,</span> fee<span class="token punctuation">,</span> discountPolicy<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Money</span> <span class="token function">calculateFee</span><span class="token punctuation">(</span><span class="token class-name">Screening</span> screening<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> fee<span class="token punctuation">.</span><span class="token function">minus</span><span class="token punctuation">(</span>discountPolicy<span class="token punctuation">.</span><span class="token function">calculateDiscount</span><span class="token punctuation">(</span>screening<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Money</span> <span class="token function">getFee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> fee<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> title<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></div>
<div class="gatsby-highlight" data-language="java"><div class="markdown-wrapper"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>reservation<span class="token punctuation">.</span>domain</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>generic<span class="token punctuation">.</span></span><span class="token class-name">Money</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">DiscountPolicy</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DiscountCondition</span><span class="token punctuation">></span></span> conditions<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">DiscountPolicy</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token class-name">DiscountCondition</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> conditions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>conditions <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>conditions<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Money</span> <span class="token function">calculateDiscount</span><span class="token punctuation">(</span><span class="token class-name">Screening</span> screening<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">DiscountCondition</span> each <span class="token operator">:</span> conditions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>each<span class="token punctuation">.</span><span class="token function">isSatisfiedBy</span><span class="token punctuation">(</span>screening<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token function">getDiscountAmount</span><span class="token punctuation">(</span>screening<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token class-name">Money</span><span class="token punctuation">.</span><span class="token constant">ZERO</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">abstract</span> <span class="token keyword">protected</span> <span class="token class-name">Money</span> <span class="token function">getDiscountAmount</span><span class="token punctuation">(</span><span class="token class-name">Screening</span> screening<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></div>
<div class="gatsby-highlight" data-language="java"><div class="markdown-wrapper"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>reservation<span class="token punctuation">.</span>domain</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>generic<span class="token punctuation">.</span></span><span class="token class-name">Money</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PercentDiscountPolicy</span> <span class="token keyword">extends</span> <span class="token class-name">DiscountPolicy</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">double</span> percent<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">PercentDiscountPolicy</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token keyword">double</span> percent<span class="token punctuation">,</span> <span class="token class-name">DiscountCondition</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> conditions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> conditions<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>percent <span class="token operator">=</span> percent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">PercentDiscountPolicy</span><span class="token punctuation">(</span><span class="token keyword">double</span> percent<span class="token punctuation">,</span> <span class="token class-name">DiscountCondition</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> conditions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token punctuation">,</span> percent<span class="token punctuation">,</span> conditions<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Money</span> <span class="token function">getDiscountAmount</span><span class="token punctuation">(</span><span class="token class-name">Screening</span> screening<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> screening<span class="token punctuation">.</span><span class="token function">getFixedFee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">times</span><span class="token punctuation">(</span>percent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></div>
<p><code>Movie</code> 클래스의 <code>calculateFee</code> 메서드는 <code>DiscountPolicy</code>의 <code>calculateDiscount</code>의 메서드에 의존한다. 즉, <code>DiscountPolicy</code>의 <code>calculateDiscount</code> 메서드가 인터페이스가 된다. 그리고 그 안의 로직이 구현부가 되며 그 로직에서 사용하는 멤버변수가 다른 메서드들도 구현부가 된다. 그럼 만약 구현부를 변경해보자. 그래도 인터페이스의 변경이나 외부 <code>Movie</code> 클래스의 변경은 일어나지 않는다. 이것이 낮은 결합도를 가진다고 말할 수 있는 것이다. 심지어 <code>DiscountPolicy</code> 자식 클래스의 멤버 변수나 구현 로직을 변경해도 외부 <code>Movie</code>에 변경이 전혀 없다.</p>
<h2>캡슐화</h2>
<p>마지막으로 변경의 관점에서의 캡슐화를 살펴보도록 하겠다. 전통적 의미의 캡슐화란 내부의 데이터와 메서드를 하나의 묶음으로 만들고 외부로부터 데이터에 대한 직접적인 접근을 막으면서 공용 인터페이스로 접근을 허용하는 것을 의미한다. 절차지향적 설계로 작성한 <code>DiscountPolicy</code>를 살펴보자.</p>
<div class="gatsby-highlight" data-language="java"><div class="markdown-wrapper"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>reservation<span class="token punctuation">.</span>domain</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>generic<span class="token punctuation">.</span></span><span class="token class-name">Money</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DiscountPolicy</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">PolicyType</span> <span class="token punctuation">{</span>
        <span class="token constant">PERCENT_POLICY</span><span class="token punctuation">,</span>
        <span class="token constant">AMOUNT_POLICY</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Long</span> movieId<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">PolicyType</span> policyType<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Money</span> amount<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Double</span> percent<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">DiscountPolicy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">DiscountPolicy</span><span class="token punctuation">(</span><span class="token class-name">Long</span> movieId<span class="token punctuation">,</span> <span class="token class-name">PolicyType</span> policyType<span class="token punctuation">,</span> <span class="token class-name">Money</span> amount<span class="token punctuation">,</span> <span class="token class-name">Double</span> percent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> movieId<span class="token punctuation">,</span> policyType<span class="token punctuation">,</span> amount<span class="token punctuation">,</span> percent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">DiscountPolicy</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token class-name">Long</span> movieId<span class="token punctuation">,</span> <span class="token class-name">PolicyType</span> policyType<span class="token punctuation">,</span> <span class="token class-name">Money</span> amount<span class="token punctuation">,</span> <span class="token class-name">Double</span> percent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>movieId <span class="token operator">=</span> movieId<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>policyType <span class="token operator">=</span> policyType<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>amount <span class="token operator">=</span> amount<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>percent <span class="token operator">=</span> percent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">getMovieId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> movieId<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMovieId</span><span class="token punctuation">(</span><span class="token class-name">Long</span> movieId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>movieId <span class="token operator">=</span> movieId<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isAmountPolicy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">PolicyType</span><span class="token punctuation">.</span><span class="token constant">AMOUNT_POLICY</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>policyType<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isPercentPolicy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">PolicyType</span><span class="token punctuation">.</span><span class="token constant">PERCENT_POLICY</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>policyType<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">PolicyType</span> <span class="token function">getPolicyType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> policyType<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPolicyType</span><span class="token punctuation">(</span><span class="token class-name">PolicyType</span> policyType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>policyType <span class="token operator">=</span> policyType<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Money</span> <span class="token function">getAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> amount<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAmount</span><span class="token punctuation">(</span><span class="token class-name">Money</span> amount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>amount <span class="token operator">=</span> amount<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Double</span> <span class="token function">getPercent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> percent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPercent</span><span class="token punctuation">(</span><span class="token class-name">Double</span> percent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>percent <span class="token operator">=</span> percent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></div>
<p>코드를 살펴보면 멤버 변수인 데이터와 <code>getter/setter</code>인 메서드로 분리되어 있고 데이터의 변경을 막을 수 있게 <code>private</code> 접근 제어자로 캡슐화를 진행하였다. 그럼 객체지향적 설계 코드를 살펴보자.</p>
<div class="gatsby-highlight" data-language="java"><div class="markdown-wrapper"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>reservation<span class="token punctuation">.</span>domain</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>generic<span class="token punctuation">.</span></span><span class="token class-name">Money</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">DiscountPolicy</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DiscountCondition</span><span class="token punctuation">></span></span> conditions<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">DiscountPolicy</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token class-name">DiscountCondition</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> conditions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>conditions <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>conditions<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Money</span> <span class="token function">calculateDiscount</span><span class="token punctuation">(</span><span class="token class-name">Screening</span> screening<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">DiscountCondition</span> each <span class="token operator">:</span> conditions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>each<span class="token punctuation">.</span><span class="token function">isSatisfiedBy</span><span class="token punctuation">(</span>screening<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token function">getDiscountAmount</span><span class="token punctuation">(</span>screening<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token class-name">Money</span><span class="token punctuation">.</span><span class="token constant">ZERO</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">abstract</span> <span class="token keyword">protected</span> <span class="token class-name">Money</span> <span class="token function">getDiscountAmount</span><span class="token punctuation">(</span><span class="token class-name">Screening</span> screening<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></div>
<div class="gatsby-highlight" data-language="java"><div class="markdown-wrapper"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>reservation<span class="token punctuation">.</span>domain</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">me<span class="token punctuation">.</span>sungbin<span class="token punctuation">.</span>generic<span class="token punctuation">.</span></span><span class="token class-name">Money</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PercentDiscountPolicy</span> <span class="token keyword">extends</span> <span class="token class-name">DiscountPolicy</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">double</span> percent<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">PercentDiscountPolicy</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token keyword">double</span> percent<span class="token punctuation">,</span> <span class="token class-name">DiscountCondition</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> conditions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> conditions<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>percent <span class="token operator">=</span> percent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">PercentDiscountPolicy</span><span class="token punctuation">(</span><span class="token keyword">double</span> percent<span class="token punctuation">,</span> <span class="token class-name">DiscountCondition</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> conditions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token punctuation">,</span> percent<span class="token punctuation">,</span> conditions<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Money</span> <span class="token function">getDiscountAmount</span><span class="token punctuation">(</span><span class="token class-name">Screening</span> screening<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> screening<span class="token punctuation">.</span><span class="token function">getFixedFee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">times</span><span class="token punctuation">(</span>percent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></div>
<p>객체지향적 설계 마찬가지로 데이터와 메서드를 분리하고 데이터를 <code>private</code> 접근 제어자를 두어 캡슐화를 진행했다. 그러면 절차적인 모듈과 객체지향 모듈 전부 같은 캡슐화인것일까?</p>
<p>이 의문을 해결하기 위해서 캡슐화를 변경의 관점에서 살펴봐야 한다. 캡슐화를 변경의 관점에서 본다면 변경되는 부분을 내부로 숨기는 추상화 기법이라고 말하며 변경될 수 있는 어떤 것이라도 감추는 것을 의미한다.</p>
<p>캡슐화는 낮은 결합도를 기반으로 작동한다. 인터페이스 뒤로 구현을 감춤으로써 변하는 부분을 캡슐화를 한 사실을 우리는 알고 있다. 이런 것을 우리는 타입 캡슐화라고 한다.</p>
<p>또 다른 캡슐화의 예로 데이터 캡슐화가 존재한다. 데이터를 숨기고 안정적인 공용 인터페이스를 둠으로써 외부에 공개하는 기법을 의미한다. 그렇다고 해당 기법이 절차지향적 코드의 캡슐화가 아니다. 절차지향적 코드는 캡슐화인척을 한 것이다. 왜냐하면 외부 클래스가 구체(<code>getter/setter</code>)에 의존하고 있기 때문이다. 즉, 데이터 캡슐화는 데이터의 변경을 외부에 감춰야 하는데 <code>setter</code>가 존재함으로써 감출 수 없는 상황인 것이다.</p>
<blockquote>
<p>방금 살펴본 타입 캡슐화는 타입의 변경을 외부에 감춘 기법이라 한다.</p>
</blockquote>
<p>타입 캡슐화는 즉, 구체에 의존하는 것이 아닌 추상화에 의존하는 기법을 의미하며 추상화를 이용하여 변경을 통제하는 기법을 의미한다. 또한 이런 타입 캡슐화를 진행하면 상위 모듈과 하위 모듈 모두 추상화에 의존하는 구조로 변경이 될 것이다. 이런 것을 바로 <strong>의존성 역전의 원칙</strong>이라고 불린다. 그리고 런타임에 구체화된 클래스로 대체가 될텐데 여기서 나오는 원칙이 <strong>리스코프 치환 원칙</strong>이다. 그리고 기존 코드 수정없이도 기능을 확장할 수 있는 구조가 되는데 이것을 <strong>개방-폐쇄 원칙</strong>이라고 불린다.</p>
<h2>설계 평가하기</h2>
<p>응집도, 결합도, 캡슐화 관점에서 설계를 평가 및 트레이드 오프하는 과정을 살펴보자.</p>
<p>먼저 응집도 관점에서 설계를 평가해보자.</p>
<p>영화 예매 시스템 초창기에는 금액 할인 정책이 1가지 밖에 없다고 가정해보자. 이럴 경우 <code>Movie</code> 클래스 안에 할인 정책 계산 플로우를 넣어도 무방했을 것이다. 그러면 아마 <code>Movie</code> 클래스 안에서는 할인 금액과 할인 조건 목록을 필드로 가지고 할인 여부를 판단하는 로직과 할인 금액을 계산하는 로직이 포함되어 있을 것이다.</p>
<p>그런데 서비스가 성장하면서 비율 할인 정책이 추가되었다고 해보자. 그러면 해당 <code>Movie</code> 클래스 안에 할인 정책의 종류와 조건문을 이용한 할인 정책의 타입에 따라 할인 금액을 계산하는 방법을 분기처리를 했을 것이다. 즉 해당 코드는 응집도 관점에서 매우 낮은 응집도를 가지고 있다.</p>
<p>그래서 응집도를 높여야 하는데 우리가 알아본 응집도를 높이기 위한 첫번째 방법으로는 <strong>변경의 이유를 기준으로 클래스를 분리</strong>하는 작업을 해야 한다. <code>Movie</code> 클래스에서는 영화 요금 계산 플로우가 변경될 때 코드가 변경되며 금액 할인 정책, 비율 할인 정책이 변경될 때 코드가 변경이 된다. 이런 변경을 분리하기 가장 쉬운 방법은 바로 <strong>상속</strong>이다. 변경의 이유에 따른 코드를 부모 클래스와 자식 클래스로 분리해야 한다. 그럼 금액 할인 정책 별 클래스를 만들고 공통 기능은 <code>Movie</code>에 둔 채로 <code>Movie</code>를 상속받으면 해결이 된다.</p>
<p>이제 결합도와 캡슐화 측명에서 설계를 평가해보자.</p>
<p>현재 부모 클래스인 <code>Movie</code>와 자식 클래스 모두 추상 메서드를 의존하고 있다. 이로 인하여 외부 클래스가 <code>Movie</code>를 의존할 때 추상적인 <code>Movie</code>만 의존하면 런타임에 자식 클래스로 변경이 가능한 구조가 되었다. 즉, 리스코프 치환 원칙에도 들어 맞는다. 또한 계속 상속을 통하여 다양한 타입을 추가할 수 있어서 개방-폐쇠 원칙에도 들어맞는다. 하지만 데이터 캡슐화에 어긎난다. 왜냐하면 상속받은 자식클래스는 부모 클래스의 <code>protected</code>로 명시한 멤버 변수를 참조하기에 해당 멤버 변수가 변경이 되면 자식 클래스도 변경이 발생하기 때문이다. 또한 <code>extends Movie</code>로 명시적으로 상속을 했기에 컴파일 타임에 강한 결합이 생긴다.</p>
<p>그리고 외부 클래스에서 해당 <code>Movie</code>를 의존성 주입을 할때 정책이 변경될때마다 새로운 인스턴스를 생성해야 하는 비용도 발생한다. 그래서 이런 문제를 우리는 상속이 아닌 합성으로 풀 수 있다. <code>DiscountPolicy</code>에 각 할인 정책 클래스들을 상속받게 하고 <code>Movie</code>가 <code>DiscountPolicy</code>를 바라보게 하는 것이다. 그러면 <code>Movie</code> 인스턴스를 유지하면서 할인 정책을 변경할 수 있을 것이다.</p>
<blockquote>
<p>자세한 코드는 우리가 이제까지 실습한 코드이기에 생략한다.</p>
</blockquote>
<blockquote>
<p>잘못된 지식이 있을 경우 댓글로 남겨주시면 빠르게 반영하겠습니다!</p>
</blockquote></section></div><style data-emotion="css 1aem3cm">.css-1aem3cm{max-width:900px;width:100%;margin:0 auto;box-sizing:border-box;padding:0;}</style><div class="css-1aem3cm etanzsa0"><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-8854437638395695" data-ad-slot="5104795204" data-ad-format="auto" data-full-width-responsive="true"></ins></div><section id="comments"></section><style data-emotion="css 1ylimja">.css-1ylimja{max-width:900px;width:100%;margin:4rem auto;box-sizing:border-box;padding:2rem 2rem;border-top:1px solid #EAEAEA;}.css-1ylimja>p{margin-bottom:1.5rem;font-size:1.8rem;color:#000;}.css-1ylimja>a{border:none!important;outline:none!important;-webkit-transition:none!important;transition:none!important;background:none!important;}.css-1ylimja>a:hover{background:none!important;border-color:none!important;}</style><div class="css-1ylimja e1x2ajq20"><style data-emotion="css toutqs">.css-toutqs{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:50px;height:50px;}</style><div size="50" class="css-toutqs e3bks2o1"><style data-emotion="css 1rrjf5z animation-8013mu">.css-1rrjf5z{-webkit-animation:animation-8013mu 1.2s linear infinite;animation:animation-8013mu 1.2s linear infinite;position:absolute;width:24%;height:8%;border-radius:5px;background:#333;-webkit-animation-delay:-1.2s;animation-delay:-1.2s;-webkit-transform:rotate(0deg) translate(146%);-moz-transform:rotate(0deg) translate(146%);-ms-transform:rotate(0deg) translate(146%);transform:rotate(0deg) translate(146%);}@-webkit-keyframes animation-8013mu{from{opacity:1;}to{opacity:0.15;}}@keyframes animation-8013mu{from{opacity:1;}to{opacity:0.15;}}</style><div class="css-1rrjf5z e3bks2o0"></div><style data-emotion="css rcjasa animation-8013mu">.css-rcjasa{-webkit-animation:animation-8013mu 1.2s linear infinite;animation:animation-8013mu 1.2s linear infinite;position:absolute;width:24%;height:8%;border-radius:5px;background:#333;-webkit-animation-delay:-1.0999999999999999s;animation-delay:-1.0999999999999999s;-webkit-transform:rotate(30deg) translate(146%);-moz-transform:rotate(30deg) translate(146%);-ms-transform:rotate(30deg) translate(146%);transform:rotate(30deg) translate(146%);}@-webkit-keyframes animation-8013mu{from{opacity:1;}to{opacity:0.15;}}@keyframes animation-8013mu{from{opacity:1;}to{opacity:0.15;}}</style><div class="css-rcjasa e3bks2o0"></div><style data-emotion="css 1gsjy2j animation-8013mu">.css-1gsjy2j{-webkit-animation:animation-8013mu 1.2s linear infinite;animation:animation-8013mu 1.2s linear infinite;position:absolute;width:24%;height:8%;border-radius:5px;background:#333;-webkit-animation-delay:-1s;animation-delay:-1s;-webkit-transform:rotate(60deg) translate(146%);-moz-transform:rotate(60deg) translate(146%);-ms-transform:rotate(60deg) translate(146%);transform:rotate(60deg) translate(146%);}@-webkit-keyframes animation-8013mu{from{opacity:1;}to{opacity:0.15;}}@keyframes animation-8013mu{from{opacity:1;}to{opacity:0.15;}}</style><div class="css-1gsjy2j e3bks2o0"></div><style data-emotion="css vgd4ml animation-8013mu">.css-vgd4ml{-webkit-animation:animation-8013mu 1.2s linear infinite;animation:animation-8013mu 1.2s linear infinite;position:absolute;width:24%;height:8%;border-radius:5px;background:#333;-webkit-animation-delay:-0.8999999999999999s;animation-delay:-0.8999999999999999s;-webkit-transform:rotate(90deg) translate(146%);-moz-transform:rotate(90deg) translate(146%);-ms-transform:rotate(90deg) translate(146%);transform:rotate(90deg) translate(146%);}@-webkit-keyframes animation-8013mu{from{opacity:1;}to{opacity:0.15;}}@keyframes animation-8013mu{from{opacity:1;}to{opacity:0.15;}}</style><div class="css-vgd4ml e3bks2o0"></div><style data-emotion="css nlaijy animation-8013mu">.css-nlaijy{-webkit-animation:animation-8013mu 1.2s linear infinite;animation:animation-8013mu 1.2s linear infinite;position:absolute;width:24%;height:8%;border-radius:5px;background:#333;-webkit-animation-delay:-0.7999999999999999s;animation-delay:-0.7999999999999999s;-webkit-transform:rotate(120deg) translate(146%);-moz-transform:rotate(120deg) translate(146%);-ms-transform:rotate(120deg) translate(146%);transform:rotate(120deg) translate(146%);}@-webkit-keyframes animation-8013mu{from{opacity:1;}to{opacity:0.15;}}@keyframes animation-8013mu{from{opacity:1;}to{opacity:0.15;}}</style><div class="css-nlaijy e3bks2o0"></div><style data-emotion="css ljpo5z animation-8013mu">.css-ljpo5z{-webkit-animation:animation-8013mu 1.2s linear infinite;animation:animation-8013mu 1.2s linear infinite;position:absolute;width:24%;height:8%;border-radius:5px;background:#333;-webkit-animation-delay:-0.7s;animation-delay:-0.7s;-webkit-transform:rotate(150deg) translate(146%);-moz-transform:rotate(150deg) translate(146%);-ms-transform:rotate(150deg) translate(146%);transform:rotate(150deg) translate(146%);}@-webkit-keyframes animation-8013mu{from{opacity:1;}to{opacity:0.15;}}@keyframes animation-8013mu{from{opacity:1;}to{opacity:0.15;}}</style><div class="css-ljpo5z e3bks2o0"></div><style data-emotion="css 1lesjdn animation-8013mu">.css-1lesjdn{-webkit-animation:animation-8013mu 1.2s linear infinite;animation:animation-8013mu 1.2s linear infinite;position:absolute;width:24%;height:8%;border-radius:5px;background:#333;-webkit-animation-delay:-0.5999999999999999s;animation-delay:-0.5999999999999999s;-webkit-transform:rotate(180deg) translate(146%);-moz-transform:rotate(180deg) translate(146%);-ms-transform:rotate(180deg) translate(146%);transform:rotate(180deg) translate(146%);}@-webkit-keyframes animation-8013mu{from{opacity:1;}to{opacity:0.15;}}@keyframes animation-8013mu{from{opacity:1;}to{opacity:0.15;}}</style><div class="css-1lesjdn e3bks2o0"></div><style data-emotion="css s8balg animation-8013mu">.css-s8balg{-webkit-animation:animation-8013mu 1.2s linear infinite;animation:animation-8013mu 1.2s linear infinite;position:absolute;width:24%;height:8%;border-radius:5px;background:#333;-webkit-animation-delay:-0.4999999999999999s;animation-delay:-0.4999999999999999s;-webkit-transform:rotate(210deg) translate(146%);-moz-transform:rotate(210deg) translate(146%);-ms-transform:rotate(210deg) translate(146%);transform:rotate(210deg) translate(146%);}@-webkit-keyframes animation-8013mu{from{opacity:1;}to{opacity:0.15;}}@keyframes animation-8013mu{from{opacity:1;}to{opacity:0.15;}}</style><div class="css-s8balg e3bks2o0"></div><style data-emotion="css q46j30 animation-8013mu">.css-q46j30{-webkit-animation:animation-8013mu 1.2s linear infinite;animation:animation-8013mu 1.2s linear infinite;position:absolute;width:24%;height:8%;border-radius:5px;background:#333;-webkit-animation-delay:-0.3999999999999999s;animation-delay:-0.3999999999999999s;-webkit-transform:rotate(240deg) translate(146%);-moz-transform:rotate(240deg) translate(146%);-ms-transform:rotate(240deg) translate(146%);transform:rotate(240deg) translate(146%);}@-webkit-keyframes animation-8013mu{from{opacity:1;}to{opacity:0.15;}}@keyframes animation-8013mu{from{opacity:1;}to{opacity:0.15;}}</style><div class="css-q46j30 e3bks2o0"></div><style data-emotion="css vl20np animation-8013mu">.css-vl20np{-webkit-animation:animation-8013mu 1.2s linear infinite;animation:animation-8013mu 1.2s linear infinite;position:absolute;width:24%;height:8%;border-radius:5px;background:#333;-webkit-animation-delay:-0.29999999999999993s;animation-delay:-0.29999999999999993s;-webkit-transform:rotate(270deg) translate(146%);-moz-transform:rotate(270deg) translate(146%);-ms-transform:rotate(270deg) translate(146%);transform:rotate(270deg) translate(146%);}@-webkit-keyframes animation-8013mu{from{opacity:1;}to{opacity:0.15;}}@keyframes animation-8013mu{from{opacity:1;}to{opacity:0.15;}}</style><div class="css-vl20np e3bks2o0"></div><style data-emotion="css 1qbghc9 animation-8013mu">.css-1qbghc9{-webkit-animation:animation-8013mu 1.2s linear infinite;animation:animation-8013mu 1.2s linear infinite;position:absolute;width:24%;height:8%;border-radius:5px;background:#333;-webkit-animation-delay:-0.19999999999999996s;animation-delay:-0.19999999999999996s;-webkit-transform:rotate(300deg) translate(146%);-moz-transform:rotate(300deg) translate(146%);-ms-transform:rotate(300deg) translate(146%);transform:rotate(300deg) translate(146%);}@-webkit-keyframes animation-8013mu{from{opacity:1;}to{opacity:0.15;}}@keyframes animation-8013mu{from{opacity:1;}to{opacity:0.15;}}</style><div class="css-1qbghc9 e3bks2o0"></div><style data-emotion="css q9vvjz animation-8013mu">.css-q9vvjz{-webkit-animation:animation-8013mu 1.2s linear infinite;animation:animation-8013mu 1.2s linear infinite;position:absolute;width:24%;height:8%;border-radius:5px;background:#333;-webkit-animation-delay:-0.09999999999999987s;animation-delay:-0.09999999999999987s;-webkit-transform:rotate(330deg) translate(146%);-moz-transform:rotate(330deg) translate(146%);-ms-transform:rotate(330deg) translate(146%);transform:rotate(330deg) translate(146%);}@-webkit-keyframes animation-8013mu{from{opacity:1;}to{opacity:0.15;}}@keyframes animation-8013mu{from{opacity:1;}to{opacity:0.15;}}</style><div class="css-q9vvjz e3bks2o0"></div></div><div></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div></div><script>
  
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='G-YLQTEB1PVV',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(!(parseInt(navigator.doNotTrack) === 1 || parseInt(window.doNotTrack) === 1 || parseInt(navigator.msDoNotTrack) === 1 || navigator.doNotTrack === "yes")) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'G-YLQTEB1PVV', 'sungbin.kr', {"sampleRate":5,"siteSpeedSampleRate":10});
      ga('set', 'anonymizeIp', true);
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/변경과-설계/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-7b05682e3655fba37948.js"],"app":["/app-3fa8deb48819dbe669b2.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-761f28f8d0a06f05d514.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-56d5a7640e67e093d479.js"],"component---src-pages-posts-tsx":["/component---src-pages-posts-tsx-1ff6a41539a3b7a0f927.js"],"component---src-pages-resume-tsx":["/component---src-pages-resume-tsx-57e707789e8d0becafe5.js"],"component---src-template-post-tsx":["/component---src-template-post-tsx-dd1bdb1f60c2459dd837.js"]};/*]]>*/</script><script src="/polyfill-7b05682e3655fba37948.js" nomodule=""></script><script src="/component---src-template-post-tsx-dd1bdb1f60c2459dd837.js" async=""></script><script src="/386142cf738b86b246078cd67abf8098b07f27c7-c2f146ac4a2834844fc5.js" async=""></script><script src="/app-3fa8deb48819dbe669b2.js" async=""></script><script src="/48aa8186-67735c86ae4015d55662.js" async=""></script><script src="/1593e758-7868fce8d5ccd9520ad2.js" async=""></script><script src="/cc76255b-3222831408842f40a1cb.js" async=""></script><script src="/d0007318-557f95e6f5b855c64727.js" async=""></script><script src="/2425c7c2-8c4925ac74b0ebf7da0a.js" async=""></script><script src="/aec3edcd-33ff14c394bc1bedc44a.js" async=""></script><script src="/3e15977f-5148ca5d1a687341b4e3.js" async=""></script><script src="/f3fee096-8a3be85b266f9ba6922d.js" async=""></script><script src="/63a121f2-37023b2342386794d0fe.js" async=""></script><script src="/b633362c-429f9f687c864375c1ce.js" async=""></script><script src="/framework-96f35882fb1b7fa32ef9.js" async=""></script><script src="/webpack-runtime-dc0bb413e606a75101a8.js" async=""></script></body></html>