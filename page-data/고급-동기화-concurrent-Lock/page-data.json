{
    "componentChunkName": "component---src-template-post-tsx",
    "path": "/고급-동기화-concurrent-Lock/",
    "result": {"data":{"allMarkdownRemark":{"nodes":[{"fields":{"slug":"/비트/"},"timeToRead":7,"frontmatter":{"title":"[컴퓨터 구조] 비트","series":"cs"}},{"fields":{"slug":"/불-대수/"},"timeToRead":12,"frontmatter":{"title":"[컴퓨터 구조] 불 대수","series":"cs"}},{"fields":{"slug":"/aws를-이해하기-위한-기초지식/"},"timeToRead":11,"frontmatter":{"title":"[AWS] AWS를 이해하기 위한 기초지식","series":"aws"}},{"fields":{"slug":"/스프링-배치-소개/"},"timeToRead":1,"frontmatter":{"title":"[스프링 배치] 개요 및 소개","series":"스프링 배치"}},{"fields":{"slug":"/스프링-시큐리티-초기화-과정-이해/"},"timeToRead":23,"frontmatter":{"title":"[스프링 시큐리티] 초기화 과정 이해","series":"스프링 시큐리티"}},{"fields":{"slug":"/스프링-시큐리티-소개/"},"timeToRead":1,"frontmatter":{"title":"[스프링 시큐리티] 소개","series":"스프링 시큐리티"}},{"fields":{"slug":"/DBMS개요와-MySQL소개/"},"timeToRead":4,"frontmatter":{"title":"[MySQL] DBMS 개요와 MySQL 소개","series":"MySQL"}},{"fields":{"slug":"/코틀린에서-변수와-타입-연산자를-다루는-방법/"},"timeToRead":14,"frontmatter":{"title":"[코틀린] 코틀린에서 변수와 타입, 연산자를 다루는 방법","series":"코틀린"}},{"fields":{"slug":"/컴퓨터-구성-요소/"},"timeToRead":4,"frontmatter":{"title":"[컴퓨터 구조] 컴퓨터 구성 요소","series":"cs"}},{"fields":{"slug":"/컴퓨터-구조-개요/"},"timeToRead":6,"frontmatter":{"title":"[컴퓨터 구조] 컴퓨터 구조 개요","series":"cs"}},{"fields":{"slug":"/aws-강의-소개/"},"timeToRead":3,"frontmatter":{"title":"[AWS] 소개","series":"aws"}},{"fields":{"slug":"/스프링-배치-강좌-소개/"},"timeToRead":1,"frontmatter":{"title":"[스프링 배치] 소개","series":"스프링 배치"}},{"fields":{"slug":"/java-to-kotlin-소개/"},"timeToRead":2,"frontmatter":{"title":"[코틀린] 소개","series":"코틀린"}},{"fields":{"slug":"/알고리즘/"},"timeToRead":5,"frontmatter":{"title":"[알고리즘] 알고리즘","series":"알고리즘"}},{"fields":{"slug":"/자료구조/"},"timeToRead":17,"frontmatter":{"title":"[알고리즘] 자료구조","series":"알고리즘"}},{"fields":{"slug":"/개요/"},"timeToRead":4,"frontmatter":{"title":"[알고리즘] 개요","series":"알고리즘"}},{"fields":{"slug":"/설계-확장하기/"},"timeToRead":11,"frontmatter":{"title":"[오브젝트] 설계 확장하기","series":"오브젝트 - 설계 원칙편"}},{"fields":{"slug":"/새로운-기능-추가하기/"},"timeToRead":18,"frontmatter":{"title":"[오브젝트] 새로운 기능 추가하기","series":"오브젝트 - 설계 원칙편"}},{"fields":{"slug":"/테스트와-의존성/"},"timeToRead":22,"frontmatter":{"title":"[오브젝트] 테스트와 의존성","series":"오브젝트 - 설계 원칙편"}},{"fields":{"slug":"/인터페이스-다듬기/"},"timeToRead":8,"frontmatter":{"title":"[오브젝트] 인터페이스 다듬기","series":"오브젝트 - 설계 원칙편"}},{"fields":{"slug":"/클래스로-나누기/"},"timeToRead":14,"frontmatter":{"title":"[오브젝트] 클래스로 나누기","series":"오브젝트 - 설계 원칙편"}},{"fields":{"slug":"/값-객체와-참조-객체/"},"timeToRead":7,"frontmatter":{"title":"[오브젝트] 값 객체와 참조 객체","series":"오브젝트 - 설계 원칙편"}},{"fields":{"slug":"/메서드-조합하기/"},"timeToRead":6,"frontmatter":{"title":"[오브젝트] 메서드 조합하기","series":"오브젝트 - 설계 원칙편"}},{"fields":{"slug":"/텍스트-어드벤쳐-게임/"},"timeToRead":8,"frontmatter":{"title":"[오브젝트] 텍스트 어드벤쳐 게임","series":"오브젝트 - 설계 원칙편"}},{"fields":{"slug":"/강의-소개/"},"timeToRead":2,"frontmatter":{"title":"[오브젝트] 강의 소개","series":"오브젝트 - 설계 원칙편"}},{"fields":{"slug":"/변경과-설계/"},"timeToRead":16,"frontmatter":{"title":"[오브젝트] 변경과 설계","series":"오브젝트 - 기초편"}},{"fields":{"slug":"/객체지향-구현/"},"timeToRead":7,"frontmatter":{"title":"[오브젝트] 객체지향 구현","series":"오브젝트 - 기초편"}},{"fields":{"slug":"/책임-할당하기/"},"timeToRead":8,"frontmatter":{"title":"[오브젝트] 책임 할당하기","series":"오브젝트 - 기초편"}},{"fields":{"slug":"/객체지향-기본-원칙/"},"timeToRead":4,"frontmatter":{"title":"[오브젝트] 객체지향 기본 원칙","series":"오브젝트 - 기초편"}},{"fields":{"slug":"/절차적인-설계-개선하기/"},"timeToRead":7,"frontmatter":{"title":"[오브젝트] 절차적인 설계 개선하기","series":"오브젝트 - 기초편"}},{"fields":{"slug":"/영화-예매-도메인/"},"timeToRead":2,"frontmatter":{"title":"[오브젝트] 영화 예매 도메인","series":"오브젝트 - 기초편"}},{"fields":{"slug":"/자바18부터-자바21까지/"},"timeToRead":19,"frontmatter":{"title":"[모던 자바] 자바18부터 자바21까지","series":"모던 자바"}},{"fields":{"slug":"/자바12부터-자바17까지/"},"timeToRead":17,"frontmatter":{"title":"[모던 자바] 자바12부터 자바17까지","series":"모던 자바"}},{"fields":{"slug":"/자바9-자바10-자바11/"},"timeToRead":29,"frontmatter":{"title":"[모던 자바] 자바9, 자바10, 자바11","series":"모던 자바"}},{"fields":{"slug":"/함수형-프로그래밍/"},"timeToRead":10,"frontmatter":{"title":"[자바 고급3] 함수형 프로그래밍","series":"자바 고급3"}},{"fields":{"slug":"/병렬-스트림/"},"timeToRead":25,"frontmatter":{"title":"[자바 고급3] 병렬 스트림","series":"자바 고급3"}},{"fields":{"slug":"/디폴트-메서드/"},"timeToRead":6,"frontmatter":{"title":"[자바 고급3] 디폴트 메서드","series":"자바 고급3"}},{"fields":{"slug":"/Optional/"},"timeToRead":17,"frontmatter":{"title":"[자바 고급3] Optional","series":"자바 고급3"}},{"fields":{"slug":"/스트림API3-컬렉터/"},"timeToRead":12,"frontmatter":{"title":"[자바 고급3] 스트림 API3 - 컬렉터","series":"자바 고급3"}},{"fields":{"slug":"/스트림API2-기능/"},"timeToRead":11,"frontmatter":{"title":"[자바 고급3] 스트림 API2 - 기능","series":"자바 고급3"}},{"fields":{"slug":"/스트림API1-기본/"},"timeToRead":10,"frontmatter":{"title":"[자바 고급3] 스트림 API1 - 기본","series":"자바 고급3"}},{"fields":{"slug":"/메서드-참조/"},"timeToRead":11,"frontmatter":{"title":"[자바 고급3] 메서드 참조","series":"자바 고급3"}},{"fields":{"slug":"/람다-vs-익명-클래스/"},"timeToRead":4,"frontmatter":{"title":"[자바 고급3] 람다 vs 익명 클래스","series":"자바 고급3"}},{"fields":{"slug":"/람다-활용/"},"timeToRead":18,"frontmatter":{"title":"[자바 고급3] 람다 활용","series":"자바 고급3"}},{"fields":{"slug":"/함수형-인터페이스/"},"timeToRead":11,"frontmatter":{"title":"[자바 고급3] 함수형 인터페이스","series":"자바 고급3"}},{"fields":{"slug":"/람다/"},"timeToRead":9,"frontmatter":{"title":"[자바 고급3] 람다","series":"자바 고급3"}},{"fields":{"slug":"/람다가-필요한-이유/"},"timeToRead":9,"frontmatter":{"title":"[자바 고급3] 람다가 필요한 이유","series":"자바 고급3"}},{"fields":{"slug":"/HTTP-서버-활용/"},"timeToRead":12,"frontmatter":{"title":"[자바 고급2] HTTP 서버 활용","series":"자바 고급2"}},{"fields":{"slug":"/애노테이션/"},"timeToRead":12,"frontmatter":{"title":"[자바 고급2] 애노테이션","series":"자바 고급2"}},{"fields":{"slug":"/리플렉션/"},"timeToRead":14,"frontmatter":{"title":"[자바 고급2] 리플렉션","series":"자바 고급2"}},{"fields":{"slug":"/HTTP-서버-만들기/"},"timeToRead":25,"frontmatter":{"title":"[자바 고급2] HTTP 서버 만들기","series":"자바 고급2"}},{"fields":{"slug":"/HTTP-기본-이론/"},"timeToRead":5,"frontmatter":{"title":"[자바 고급2] HTTP 기본 이론","series":"자바 고급2"}},{"fields":{"slug":"/채팅-프로그램/"},"timeToRead":21,"frontmatter":{"title":"[자바 고급2] 채팅 프로그램","series":"자바 고급2"}},{"fields":{"slug":"/네트워크-프로그램2/"},"timeToRead":16,"frontmatter":{"title":"[자바 고급2] 네트워크 프로그램2","series":"자바 고급2"}},{"fields":{"slug":"/네트워크-프로그램1/"},"timeToRead":18,"frontmatter":{"title":"[자바 고급2] 네트워크 프로그램1","series":"자바 고급2"}},{"fields":{"slug":"/네트워크-기본-이론/"},"timeToRead":14,"frontmatter":{"title":"[자바 고급2] 네트워크 - 기본 이론","series":"자바 고급2"}},{"fields":{"slug":"/File-Files/"},"timeToRead":8,"frontmatter":{"title":"[자바 고급2] File, Files","series":"자바 고급2"}},{"fields":{"slug":"/IO-활용/"},"timeToRead":9,"frontmatter":{"title":"[자바 고급2] I/O 활용","series":"자바 고급2"}},{"fields":{"slug":"/IO-기본2/"},"timeToRead":6,"frontmatter":{"title":"[자바 고급2] I/O 기본2","series":"자바 고급2"}},{"fields":{"slug":"/IO-기본1/"},"timeToRead":15,"frontmatter":{"title":"[자바 고급2] I/O 기본1","series":"자바 고급2"}},{"fields":{"slug":"/문자-인코딩/"},"timeToRead":10,"frontmatter":{"title":"[자바 고급2] 문자 인코딩","series":"자바 고급2"}},{"fields":{"slug":"/스레드-풀과-Executor-프레임워크2/"},"timeToRead":14,"frontmatter":{"title":"[자바 고급1] 스레드 풀과 Executor 프레임워크2","series":"자바 고급1"}},{"fields":{"slug":"/스레드-풀과-Executor-프레임워크1/"},"timeToRead":20,"frontmatter":{"title":"[자바 고급1] 스레드 풀과 Executor 프레임워크1","series":"자바 고급1"}},{"fields":{"slug":"/동시성-컬렉션/"},"timeToRead":9,"frontmatter":{"title":"[자바 고급1] 동시성 컬렉션","series":"자바 고급1"}},{"fields":{"slug":"/CAS-동기화와-원자적-연산/"},"timeToRead":14,"frontmatter":{"title":"[자바 고급1] CAS - 동기화와 원자적 연산","series":"자바 고급1"}},{"fields":{"slug":"/생산자-소비자-문제2/"},"timeToRead":11,"frontmatter":{"title":"[자바 고급1] 생산자 소비자 문제2","series":"자바 고급1"}},{"fields":{"slug":"/생산자-소비자-문제1/"},"timeToRead":14,"frontmatter":{"title":"[자바 고급1] 생산자 소비자 문제1","series":"자바 고급1"}},{"fields":{"slug":"/고급-동기화-concurrent-Lock/"},"timeToRead":11,"frontmatter":{"title":"[자바 고급1] 고급 동기화 - concurrent.Lock","series":"자바 고급1"}},{"fields":{"slug":"/동기화-synchronized/"},"timeToRead":7,"frontmatter":{"title":"[자바 고급1] 동기화 - synchronized","series":"자바 고급1"}},{"fields":{"slug":"/메모리-가시성/"},"timeToRead":5,"frontmatter":{"title":"[자바 고급1] 메모리 가시성","series":"자바 고급1"}},{"fields":{"slug":"/스레드-제어와-생명주기2/"},"timeToRead":11,"frontmatter":{"title":"[자바 고급1] 스레드 제어와 생명주기2","series":"자바 고급1"}},{"fields":{"slug":"/스레드-제어와-생명주기1/"},"timeToRead":12,"frontmatter":{"title":"[자바 고급1] 스레드 제어와 생명주기1","series":"자바 고급1"}},{"fields":{"slug":"/스레드-생성과-실행/"},"timeToRead":8,"frontmatter":{"title":"[자바 고급1] 스레드 생성과 실행","series":"자바 고급1"}},{"fields":{"slug":"/프로세스와-스레드-소개/"},"timeToRead":9,"frontmatter":{"title":"[자바 고급1] 프로세스와 스레드 소개","series":"자바 고급1"}},{"fields":{"slug":"/컬렉션-프레임워크-순회-정렬-전체-정리/"},"timeToRead":16,"frontmatter":{"title":"[자바 중급2] 컬렉션 프레임워크 - 순회, 정렬, 전체 정리","series":"자바 중급2"}},{"fields":{"slug":"/컬렉션-프레임워크-Map-Stack-Queue/"},"timeToRead":7,"frontmatter":{"title":"[자바 중급2] 컬렉션 프레임워크 - Map, Stack, Queue","series":"자바 중급2"}},{"fields":{"slug":"/컬렉션-프레임워크-Set/"},"timeToRead":6,"frontmatter":{"title":"[자바 중급2] 컬렉션 프레임워크 - Set","series":"자바 중급2"}},{"fields":{"slug":"/컬렉션-프레임워크-HashSet/"},"timeToRead":11,"frontmatter":{"title":"[자바 중급2] 컬렉션 프레임워크 - HashSet","series":"자바 중급2"}},{"fields":{"slug":"/컬렉션-프레임워크-Hash/"},"timeToRead":6,"frontmatter":{"title":"[자바 중급2] 컬렉션 프레임워크 - Hash","series":"자바 중급2"}},{"fields":{"slug":"/컬렉션-프레임워크-List/"},"timeToRead":17,"frontmatter":{"title":"[자바 중급2] 컬렉션 프레임워크 - List","series":"자바 중급2"}},{"fields":{"slug":"/컬렉션-프레임워크-LinkedList/"},"timeToRead":14,"frontmatter":{"title":"[자바 중급2] 컬렉션 프레임워크 - LinkedList","series":"자바 중급2"}},{"fields":{"slug":"/컬렉션-프레임워크-ArrayList/"},"timeToRead":15,"frontmatter":{"title":"[자바 중급2] 컬렉션 프레임워크 - ArrayList","series":"자바 중급2"}},{"fields":{"slug":"/제네릭2/"},"timeToRead":14,"frontmatter":{"title":"[자바 중급2] 제네릭2","series":"자바 중급2"}},{"fields":{"slug":"/제네릭1/"},"timeToRead":9,"frontmatter":{"title":"[자바 중급2] 제네릭1","series":"자바 중급2"}},{"fields":{"slug":"/예외처리2-실습/"},"timeToRead":17,"frontmatter":{"title":"[자바 중급1] 예외처리2 - 실습","series":"자바 중급1"}},{"fields":{"slug":"/예외처리1-이론/"},"timeToRead":12,"frontmatter":{"title":"[자바 중급1] 예외처리1 - 이론","series":"자바 중급1"}},{"fields":{"slug":"/중첩-클래스-내부-클래스2/"},"timeToRead":9,"frontmatter":{"title":"[자바 중급1] 중첩 클래스, 내부 클래스2","series":"자바 중급1"}},{"fields":{"slug":"/중첩-클래스-내부-클래스1/"},"timeToRead":11,"frontmatter":{"title":"[자바 중급1] 중첩 클래스, 내부 클래스1","series":"자바 중급1"}},{"fields":{"slug":"/날짜와-시간/"},"timeToRead":24,"frontmatter":{"title":"[자바 중급1] 날짜와 시간","series":"자바 중급1"}},{"fields":{"slug":"/열거형-enum/"},"timeToRead":7,"frontmatter":{"title":"[자바 중급1] 열거형-enum","series":"자바 중급1"}},{"fields":{"slug":"/래퍼-Class-클래스/"},"timeToRead":11,"frontmatter":{"title":"[자바 중급1] 래퍼, Class 클래스","series":"자바 중급1"}},{"fields":{"slug":"/String-클래스/"},"timeToRead":10,"frontmatter":{"title":"[자바 중급1] String 클래스","series":"자바 중급1"}},{"fields":{"slug":"/불변-객체/"},"timeToRead":7,"frontmatter":{"title":"[자바 중급1] 불변 객체","series":"자바 중급1"}},{"fields":{"slug":"/Object-클래스/"},"timeToRead":10,"frontmatter":{"title":"[자바 중급1] Object 클래스","series":"자바 중급1"}},{"fields":{"slug":"/다형성과-설계/"},"timeToRead":5,"frontmatter":{"title":"[자바 기본] 다형성과 설계","series":"자바 기본"}},{"fields":{"slug":"/다형성2/"},"timeToRead":10,"frontmatter":{"title":"[자바 기본] 다형성2","series":"자바 기본"}},{"fields":{"slug":"/다형성1/"},"timeToRead":8,"frontmatter":{"title":"[자바 기본] 다형성1","series":"자바 기본"}},{"fields":{"slug":"/상속/"},"timeToRead":7,"frontmatter":{"title":"[자바 기본] 상속","series":"자바 기본"}},{"fields":{"slug":"/final/"},"timeToRead":4,"frontmatter":{"title":"[자바 기본] final","series":"자바 기본"}},{"fields":{"slug":"/자바-메모리-구조와-static/"},"timeToRead":10,"frontmatter":{"title":"[자바 기본] 자바 메모리 구조와 static","series":"자바 기본"}},{"fields":{"slug":"/접근-제어자/"},"timeToRead":5,"frontmatter":{"title":"[자바 기본] 접근 제어자","series":"자바 기본"}},{"fields":{"slug":"/패키지/"},"timeToRead":6,"frontmatter":{"title":"[자바 기본] 패키지","series":"자바 기본"}},{"fields":{"slug":"/생성자/"},"timeToRead":6,"frontmatter":{"title":"[자바 기본] 생성자","series":"자바 기본"}},{"fields":{"slug":"/객체-지향-프로그래밍/"},"timeToRead":6,"frontmatter":{"title":"[자바 기본] 객체 지향 프로그래밍","series":"자바 기본"}},{"fields":{"slug":"/기본형과-참조형/"},"timeToRead":8,"frontmatter":{"title":"[자바 기본] 기본형과 참조형","series":"자바 기본"}},{"fields":{"slug":"/클래스와-데이터/"},"timeToRead":6,"frontmatter":{"title":"[자바 기본] 클래스와 데이터","series":"자바 기본"}},{"fields":{"slug":"/99클럽-day10/"},"timeToRead":2,"frontmatter":{"title":"[99클럽] 면접반 10일차","series":"면접"}},{"fields":{"slug":"/99클럽-day9/"},"timeToRead":1,"frontmatter":{"title":"[99클럽] 면접반 9일차","series":"면접"}},{"fields":{"slug":"/메서드/"},"timeToRead":8,"frontmatter":{"title":"[자바 입문] 메서드","series":"자바 입문"}},{"fields":{"slug":"/배열/"},"timeToRead":7,"frontmatter":{"title":"[자바 입문] 배열","series":"자바 입문"}},{"fields":{"slug":"/훈련/"},"timeToRead":3,"frontmatter":{"title":"[자바 입문] 훈련","series":"자바 입문"}},{"fields":{"slug":"/스코프-형변환/"},"timeToRead":5,"frontmatter":{"title":"[자바 입문] 스코프, 형변환","series":"자바 입문"}},{"fields":{"slug":"/반복문/"},"timeToRead":6,"frontmatter":{"title":"[자바 입문] 반복문","series":"자바 입문"}},{"fields":{"slug":"/조건문/"},"timeToRead":7,"frontmatter":{"title":"[자바 입문] 조건문","series":"자바 입문"}},{"fields":{"slug":"/99클럽-day8/"},"timeToRead":1,"frontmatter":{"title":"[99클럽] 면접반 8일차","series":"면접"}},{"fields":{"slug":"/책-관리-예제-백엔드-개발/"},"timeToRead":6,"frontmatter":{"title":"[스프링 입문] 책 관리 예제 - 백엔드 개발","series":"스프링"}},{"fields":{"slug":"/연산자/"},"timeToRead":6,"frontmatter":{"title":"[자바 입문] 연산자","series":"자바 입문"}},{"fields":{"slug":"/99클럽-day7/"},"timeToRead":1,"frontmatter":{"title":"[99클럽] 면접반 7일차","series":"면접"}},{"fields":{"slug":"/변수/"},"timeToRead":8,"frontmatter":{"title":"[자바 입문] 변수","series":"자바 입문"}},{"fields":{"slug":"/99클럽-day6/"},"timeToRead":1,"frontmatter":{"title":"[99클럽] 면접반 6일차","series":"면접"}},{"fields":{"slug":"/스프링-웹-개발-기초/"},"timeToRead":2,"frontmatter":{"title":"[스프링 입문] 스프링 웹 개발 기초","series":"스프링"}},{"fields":{"slug":"/프로젝트-환경설정/"},"timeToRead":5,"frontmatter":{"title":"[스프링 입문] 프로젝트 환경 설정","series":"스프링"}},{"fields":{"slug":"/Hello-World/"},"timeToRead":6,"frontmatter":{"title":"[자바 입문] Hello World","series":"자바 입문"}},{"fields":{"slug":"/99클럽-day5/"},"timeToRead":2,"frontmatter":{"title":"[99클럽] 면접반 5일차","series":"면접"}},{"fields":{"slug":"/99클럽-day4/"},"timeToRead":1,"frontmatter":{"title":"[99클럽] 면접반 4일차","series":"면접"}},{"fields":{"slug":"/Multi-Modules-프로젝트/"},"timeToRead":12,"frontmatter":{"title":"[Gradle] Multi Modules 프로젝트","series":"gradle"}},{"fields":{"slug":"/99클럽-day3/"},"timeToRead":3,"frontmatter":{"title":"[99클럽] 면접반 3일차","series":"면접"}},{"fields":{"slug":"/Core-Type에-대한-이해/"},"timeToRead":7,"frontmatter":{"title":"[Gradle] Core Type에 대한 이해","series":"gradle"}},{"fields":{"slug":"/99클럽-day2/"},"timeToRead":2,"frontmatter":{"title":"[99클럽] 면접반 2일차","series":"면접"}},{"fields":{"slug":"/Groovy-언어의-기본/"},"timeToRead":8,"frontmatter":{"title":"[Gradle] Groovy 언어의 기본","series":"gradle"}},{"fields":{"slug":"/99클럽-day1/"},"timeToRead":6,"frontmatter":{"title":"[99클럽] 면접반 1일차","series":"면접"}},{"fields":{"slug":"/Gradle-기본/"},"timeToRead":9,"frontmatter":{"title":"[Gradle] Gradle 기본","series":"gradle"}},{"fields":{"slug":"/중요한-것은-포기하지-않는-마음/"},"timeToRead":3,"frontmatter":{"title":"2025년 1분기 회고(feat. 중요한 것은 포기하지 않는 마음)","series":"일상 이야기"}},{"fields":{"slug":"/Gradle-Introduction/"},"timeToRead":4,"frontmatter":{"title":"[Gradle] Introduction","series":"gradle"}},{"fields":{"slug":"/IntelliJ-플러그인/"},"timeToRead":2,"frontmatter":{"title":"[IntelliJ IDEA] 플러그인","series":"인텔리제이"}},{"fields":{"slug":"/IntelliJ-Git-Github/"},"timeToRead":3,"frontmatter":{"title":"[IntelliJ IDEA] Git & Github","series":"인텔리제이"}},{"fields":{"slug":"/IntelliJ-디버깅/"},"timeToRead":3,"frontmatter":{"title":"[IntelliJ IDEA] 디버깅","series":"인텔리제이"}},{"fields":{"slug":"/IntelliJ-리팩토링/"},"timeToRead":2,"frontmatter":{"title":"[IntelliJ IDEA] 리팩토링","series":"인텔리제이"}},{"fields":{"slug":"/IntelliJ-자동완성/"},"timeToRead":2,"frontmatter":{"title":"[IntelliJ IDEA] 자동완성","series":"인텔리제이"}},{"fields":{"slug":"/IntelliJ-검색/"},"timeToRead":2,"frontmatter":{"title":"[IntelliJ IDEA] 검색","series":"인텔리제이"}},{"fields":{"slug":"/IntelliJ-포커스/"},"timeToRead":2,"frontmatter":{"title":"[IntelliJ IDEA] 포커스","series":"인텔리제이"}},{"fields":{"slug":"/IntelliJ-코드-Edit/"},"timeToRead":4,"frontmatter":{"title":"[IntelliJ IDEA] 코드 Edit","series":"인텔리제이"}},{"fields":{"slug":"/IntelliJ-소개/"},"timeToRead":2,"frontmatter":{"title":"[IntelliJ IDEA] 소개","series":"인텔리제이"}},{"fields":{"slug":"/2024년-주니어-개발자-회고록/"},"timeToRead":3,"frontmatter":{"title":"2024년 주니어 개발자 회고록","series":"일상 이야기"}},{"fields":{"slug":"/WDD/"},"timeToRead":1,"frontmatter":{"title":"WDD(Why-Driven-Development)","series":"생각정리"}},{"fields":{"slug":"/내가-개발자-커리어를-시작한-이유/"},"timeToRead":4,"frontmatter":{"title":"내가 개발자 커리어를 시작한 이유","series":"일상"}},{"fields":{"slug":"/블로그-이관-및-회고/"},"timeToRead":3,"frontmatter":{"title":"블로그 이관 및 회고","series":"일상 이야기"}},{"fields":{"slug":"/Spring-Boot-3.2.x-더-이상-바이트코드를-구문-분석하여-매개변수-이름을-추론하려고-시도하지-않습니다/"},"timeToRead":3,"frontmatter":{"title":"Spring Boot 3.2.x 더 이상 바이트코드를 구문 분석하여 매개변수 이름을 추론하려고 시도하지 않습니다.","series":"트러블 슈팅"}},{"fields":{"slug":"/라떼-개발자/"},"timeToRead":2,"frontmatter":{"title":"라떼 개발자","series":"생각정리"}},{"fields":{"slug":"/2023년-주니어-개발자-회고록/"},"timeToRead":5,"frontmatter":{"title":"2023년 주니어 개발자 회고록","series":"일상 이야기"}}],"group":[{"fieldValue":"MySQL","totalCount":1},{"fieldValue":"aws","totalCount":2},{"fieldValue":"cs","totalCount":4},{"fieldValue":"gradle","totalCount":5},{"fieldValue":"면접","totalCount":10},{"fieldValue":"모던 자바","totalCount":3},{"fieldValue":"생각정리","totalCount":2},{"fieldValue":"스프링","totalCount":3},{"fieldValue":"스프링 배치","totalCount":2},{"fieldValue":"스프링 시큐리티","totalCount":2},{"fieldValue":"알고리즘","totalCount":3},{"fieldValue":"오브젝트 - 기초편","totalCount":6},{"fieldValue":"오브젝트 - 설계 원칙편","totalCount":9},{"fieldValue":"인텔리제이","totalCount":9},{"fieldValue":"일상","totalCount":1},{"fieldValue":"일상 이야기","totalCount":4},{"fieldValue":"자바 고급1","totalCount":13},{"fieldValue":"자바 고급2","totalCount":14},{"fieldValue":"자바 고급3","totalCount":13},{"fieldValue":"자바 기본","totalCount":12},{"fieldValue":"자바 입문","totalCount":9},{"fieldValue":"자바 중급1","totalCount":10},{"fieldValue":"자바 중급2","totalCount":10},{"fieldValue":"코틀린","totalCount":2},{"fieldValue":"트러블 슈팅","totalCount":1}]},"markdownRemark":{"id":"081b523b-8834-59d1-b4b2-0d8c96124adf","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAAApUlEQVQoz6WRPQvCQAyG+///R6GKm6AndhIcrNaiXVzEaqVaPym9Xs67XuIgiEvFw2whPDxJXof+KOf7uD4cUWtLGJGIHpMA2PDdWpgBqRyNOfMVkTHmV/ilSW7QjfPF+hRnpVC1hVkb3Nxla54NVpczVw1bN8Co9TbJw7QIdsX+Wtk9DHklXU+3O6bXl66HIG1gIQTzIVrCNJSzCJWyzLnp0A/4CfW+SjF6WKSqAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"배너 이미지\"\n        title=\"배너 이미지\"\n        src=\"/static/3189e9c0404650ccc6c5ffc998bc8717/2bef9/banner.png\"\n        srcset=\"/static/3189e9c0404650ccc6c5ffc998bc8717/6f3f2/banner.png 256w,\n/static/3189e9c0404650ccc6c5ffc998bc8717/01e7c/banner.png 512w,\n/static/3189e9c0404650ccc6c5ffc998bc8717/2bef9/banner.png 1024w,\n/static/3189e9c0404650ccc6c5ffc998bc8717/71c1d/banner.png 1536w,\n/static/3189e9c0404650ccc6c5ffc998bc8717/e8950/banner.png 2000w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>해당 블로그 글은 <a href=\"https://inf.run/6oSgn\">영한님의 인프런 강의</a>를 바탕으로 쓰여진 글입니다.</p>\n</blockquote>\n<h2>LockSupport1</h2>\n<p><code>synchronized</code>는 자바 1.0부터 제공되는 매우 편리한 기능이지만, 다음과 같은 한계가 있다.</p>\n<ul>\n<li>무한 대기: <code>BLOCKED</code> 상태의 스레드는 락이 풀릴 때 까지 무한 대기한다.\n<ul>\n<li>특정 시간까지만 대기하는 타임아웃X</li>\n<li>중간에 인터럽트X</li>\n</ul>\n</li>\n<li>공정성: 락이 돌아왔을 때 <code>BLOCKED</code> 상태의 여러 스레드 중에 어떤 스레드가 락을 획득할 지 알 수 없다. 최악의 경우 특정 스레드가 너무 오랜기간 락을 획득하지 못할 수 있다.</li>\n</ul>\n<p>이런 문제를 해결하기 위해 자바 1.5부터 <code>java.util.concurrent</code> 라는 동시성 문제 해결을 위한 라이브러리 패키지가 추가된다. 이중에 <code>LockSupport</code>에 대해 알아보자.</p>\n<h3>LockSupport 기능</h3>\n<ul>\n<li><code>park()</code>: 스레드를 <code>WAITING</code>상태로 변경한다.</li>\n<li><code>parkNanos(nanos)</code> : 스레드를 나노초 동안만 <code>TIMED_WAITING</code> 상태로 변경한다.\n<ul>\n<li>지정한 나노초가 지나면 <code>TIMED_WAITING</code> 상태에서 빠져나오고 <code>RUNNABLE</code> 상태로 변경된다.</li>\n</ul>\n</li>\n<li><code>unpark(thread)</code> : <code>WAITING</code> 상태의 대상 스레드를 <code>RUNNABLE</code> 상태로 변경한다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">thread<span class=\"token punctuation\">.</span>sync<span class=\"token punctuation\">.</span>lock</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>concurrent<span class=\"token punctuation\">.</span>locks<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">LockSupport</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">static</span> <span class=\"token import static\"><span class=\"token namespace\">util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">MyLogger</span><span class=\"token punctuation\">.</span><span class=\"token static\">log</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">static</span> <span class=\"token import static\"><span class=\"token namespace\">util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ThreadUtils</span><span class=\"token punctuation\">.</span><span class=\"token static\">sleep</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">LockSupportMainV1</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Thread</span> thread1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ParkTask</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Thread-1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        thread1<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Thread-1 state: \"</span> <span class=\"token operator\">+</span> thread1<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"main -> unpark(Thread-1)\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">LockSupport</span><span class=\"token punctuation\">.</span><span class=\"token function\">unpark</span><span class=\"token punctuation\">(</span>thread1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// thread1.interrupt();</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ParkTask</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Runnable</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token annotation punctuation\">@Override</span>\n        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"park 시작\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token class-name\">LockSupport</span><span class=\"token punctuation\">.</span><span class=\"token function\">park</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"park 종료, state: \"</span> <span class=\"token operator\">+</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"인터럽트 상태: \"</span> <span class=\"token operator\">+</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentThread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isInterrupted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>위의 코드를 보면 <code>main</code> 스레드가 <code>Thread-1</code>을 생성하고 100ms간 <code>TIMED_WAITING</code> 상태가 된다. 그 동안 <code>ParkTask</code>가 로그를 찍고 <code>LockSupport.park()</code>를 통해 대기 상태가 된다. 그리고 <code>main</code> 스레드가 <code>unpark()</code>를 통하여 <code>RUNNABLE</code>상태로 만들어준다. 하지만 이 방법 말고 대기상태의 스레드를 깨울 수 있는 방법이 있다. 바로 인터럽트를 거는 것이다. 하지만 인터럽트의 단점이라고 말하면 인터럽트 상태가 우리가 직접 <code>Thread.interrupted()</code>를 호출해주던가 상태값을 변경해줘야 한다.</p>\n<h2>LockSupport2</h2>\n<p><code>parkNanos(nanos)</code>를 호출하면 <code>unpark()</code>없이 특정 시간만 지나면 자동으로 스레드가 깨어나는 역할을 한다. 즉, <code>park()</code> 메서드와 다르게 <code>TIMED_WAITING</code>상태였다가 특정 시간이 지나면 <code>RUNNABLE</code> 상태가 되는 것이다.</p>\n<h3>BLOCKED vs WAITING</h3>\n<h4>인터럽트</h4>\n<ul>\n<li><code>BLOCKED</code> 상태는 인터럽트가 걸려도 대기 상태를 빠져나오지 못한다. 여전히 <code>BLOCKED</code> 상태이다.</li>\n<li><code>WAITING</code>, <code>TIMED_WAITING</code> 상태는 인터럽트가 걸리면 대기 상태를 빠져나온다. 그래서 <code>RUNNABLE</code> 상태로 변한다.</li>\n</ul>\n<h4>용도</h4>\n<ul>\n<li><code>BLOCKED</code> 상태는 자바의 <code>synchronized</code>에서 락을 획득하기 위해 대기할 때 사용된다.</li>\n<li><code>WAITING</code>, <code>TIMED_WAITING</code> 상태는 스레드가 특정 조건이나 시간 동안 대기할 때 발생하는 상태이다.</li>\n<li><code>WAITING</code> 상태는 다양한 상황에서 사용된다. 예를 들어, <code>Thread.join()</code>, <code>LockSupport.park()</code>, <code>Object.wait()</code> 와 같은 메서드 호출 시 <code>WAITING</code> 상태가 된다.</li>\n<li><code>TIMED_WAITING</code> 상태는 <code>Thread.sleep(ms)</code>, <code>Object.wait(long timeout)</code>, <code>Thread.join(long millis)</code>, <code>LockSupport.parkNanos(ns)</code> 등과 같은 시간 제한이 있는 대기 메서드를 호출할 때 발생한다.</li>\n</ul>\n<h3>LockSupport 정리</h3>\n<p><code>LockSupport</code>를 사용하면 스레드를 <code>WAITING</code>, <code>TIMED_WAITING</code> 상태로 변경할 수 있고, 또 인터럽트를 받아서 스레드를 깨울 수도 있다. 이런 기능들을 잘 활용하면 <code>synchronized</code>의 단점인 무한 대기 문제를 해결할 수 있을 것 같다. <code>synchronized</code>의 문제점중 하나인 무한대기는 뭔가 <code>parkNanos(nanos)</code> 메서드로 해결할 수 있을 것 같고 인터럽트 발생이 안되는 문제는 <code>park()</code>와 <code>parkNanos(nanos)</code>를 통해 해결할 수 있을 것 같다.</p>\n<p>락이라는 클래스를 만들고, 특정 스레드가 먼저 락을 얻으면 <code>RUNNABLE</code>로 실행하고, 락을 얻지 못하면 <code>park()</code>를 사용해서 대기 상태로 만드는 것이다. 그리고 스레드가 임계 영역의 실행을 마치고 나면 락을 반납하고, <code>unpark()</code>를 사용해서 대기 중인 다른 스레드를 깨우는 것이다. 물론 <code>parkNanos()</code>를 사용해서 너무 오래 대기하면 스레드가 스스로 중간에 깨어나게 할 수도 있다. 하지만 이런 기능을 직접 구현하기는 매우 어렵다. 일단 수 많은 스레드들 중에 특정 스레드를 지정하여 락을 주고 나머지는 대기시켜야 하며 대기시키는 알고리즘도 구현해야 하고 우선순위 로직도 만들어야 하는 매우 힘든 작업이 있다.</p>\n<p>즉, 한마디로 <code>LockSupport</code>는 너무 저수준이다. <code>synchronized</code>처럼 더 고수준의 기능이 필요하다. 그래서 등장한 것이 <code>Lock</code> 인터페이스와 <code>ReetrantLock</code>이다.</p>\n<h2>ReentrantLock - 이론</h2>\n<p>자바는 1.0부터 존재한 <code>synchronized</code>와 <code>BLOCKED</code> 상태를 통한 통한 임계 영역 관리의 한계를 극복하기 위해 자바 1.5부터 <code>Lock</code> 인터페이스와 <code>ReentrantLock</code> 구현체를 제공한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>concurrent<span class=\"token punctuation\">.</span>locks</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Lock</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">void</span> <span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">void</span> <span class=\"token function\">lockInterruptibly</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">boolean</span> <span class=\"token function\">tryLock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">boolean</span> <span class=\"token function\">tryLock</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">long</span> time<span class=\"token punctuation\">,</span> <span class=\"token class-name\">TimeUnit</span> unit<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">void</span> <span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">Condition</span> <span class=\"token function\">newCondition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code>Lock</code> 인터페이스는 동시성 프로그래밍에서 쓰이는 안전한 임계 영역을 위한 락을 구현하는데 사용된다.</p>\n<ul>\n<li><code>void lock()</code>\n<ul>\n<li>락을 획득한다. 만약 다른 스레드가 이미 락을 획득했다면, 락이 풀릴 때까지 현재 스레드는 대기(<code>WAITING</code>)한다. 이 메서드는 인터럽트에 응답하지 않는다.</li>\n<li>예) 맛집에 한번 줄을 서면 끝까지 기다린다. 친구가 다른 맛집을 찾았다고 중간에 연락해도 포기하지 않고 기다린다.</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>⚠️ 주의</p>\n<p>여기서 사용하는 락은 객체 내부에 있는 모니터 락이 아니다! <code>Lock</code> 인터페이스와 <code>ReentrantLock</code>이 제공하는 기능이다! 모니터 락과 <code>BLOCKED</code>상태는 <code>synchronized</code>에서만 사용된다.</p>\n</blockquote>\n<ul>\n<li><code>void lockInterruptibly()</code>\n<ul>\n<li>락 획득을 시도하되, 다른 스레드가 인터럽트할 수 있도록 한다. 만약 다른 스레드가 이미 락을 획득했다면, 현재 스레드는 락을 획득할 때까지 대기한다. 대기 중에 인터럽트가 발생하면 <code>InterruptedException</code>이 발생하며 락 획득을 포기한다.</li>\n<li>예) 맛집에 한번 줄을 서서 기다린다. 다만 친구가 다른 맛집을 찾았다고 중간에 연락하면 포기한다.</li>\n</ul>\n</li>\n<li><code>boolean tryLock()</code>\n<ul>\n<li>락 획득을 시도하고, 즉시 성공 여부를 반환한다. 만약 다른 스레드가 이미 락을 획득했다면 <code>false</code>를 반환하고, 그렇지 않으면 락을 획득하고 <code>true</code>를 반환한다.</li>\n<li>예) 맛집에 대기 줄이 없으면 바로 들어가고, 대기 줄이 있으면 즉시 포기한다.</li>\n</ul>\n</li>\n<li><code>boolean tryLock(long time, TimeUnit unit)</code>\n<ul>\n<li>주어진 시간 동안 락 획득을 시도한다. 주어진 시간 안에 락을 획득하면 <code>true</code>를 반환한다. 주어진 시간이 지나도 락을 획득하지 못한 경우 <code>false</code>를 반환한다. 이 메서드는 대기 중 인터럽트가 발생하면 <code>InterruptedException</code>이 발생하며 락 획득을 포기한다.</li>\n<li>예) 맛집에 줄을 서지만 특정 시간 만큼만 기다린다. 특정 시간이 지나도 계속 줄을 서야 한다면 포기한다. 친구가 다른 맛집을 찾았다고 중간에 연락해도 포기한다.</li>\n</ul>\n</li>\n<li><code>void unlock()</code>\n<ul>\n<li>락을 해제한다. 락을 해제하면 락 획득을 대기 중인 스레드 중 하나가 락을 획득할 수 있게 된다.</li>\n<li>락을 획득한 스레드가 호출해야 하며, 그렇지 않으면 <code>IllegalMonitorStateException</code>이 발생할 수 있다.</li>\n<li>예) 식당안에 있는 손님이 밥을 먹고 나간다. 식당에 자리가 하나 난다. 기다리는 손님께 이런 사실을 알려주어야 한다. 기다리던 손님중 한 명이 식당에 들어간다.</li>\n</ul>\n</li>\n<li><code>Condition newCondition()</code>\n<ul>\n<li><code>Condition</code> 객체를 생성하여 반환한다. <code>Condition</code> 객체는 락과 결합되어 사용되며, 스레드가 특정 조건을 기다리거나 신호를 받을 수 있도록 한다. 이는 <code>Object</code> 클래스의 <code>wait</code>, <code>notify</code>, <code>notifyAll</code> 메서드와 유사한 역할을 한다.</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>✅ 참고</p>\n<p><code>lock()</code> 메서드는 인터럽트에 응하지 않는다고 되어있다. 이 메서드의 의도는 인터럽트가 발생해도 무시하고 락을 기다리는 것이다. 앞서 대기(<code>WAITING</code>) 상태의 스레드에 인터럽트가 발생하면 대기 상태를 빠져나온다고 배웠다. 그런데 <code>lock()</code> 메서드의 설명을 보면 대기(<code>WAITING</code>) 상태인데 인터럽트에 응하지 않는다고 되어있다. 어떻게 된 것일까? <code>lock()</code>을 호출해서 락을 얻기 위해 대기중인 스레드에 인터럽트가 발생하면 순간 대기 상태를 빠져나오는 것은 맞다. 그래서 아주 짧지만 <code>WAITING</code>-><code>RUNNABLE</code> 이 된다. 그런데 <code>lock()</code> 메서드 안에서 해당 스레드를 다시 WAITING` 상태로 강제로 변경해버린다. 이런 원리로 인터럽트를 무시하는 것이다.</p>\n</blockquote>\n<p>이렇게 <code>Lock</code> 인터페이스가 제공하는 메서드를 활용하여 <code>synchronized</code>의 무한대기 문제는 해결을 할 수 있을 것 같다. 이제 다음 문제인 공정성 문제는 어떻게 해결할까? 이것은 <code>Lock</code> 인터페이스의 구현체인 <code>ReetrantLock</code>을 사용하면 된다. <code>ReentrantLock</code> 락은 공정성(fairness) 모드와 비공정(non-fair) 모드로 설정할 수 있으며, 이 두 모드는 락을 획득하는 방식에서 차이가 있다.</p>\n<h3>비공정 모드</h3>\n<ul>\n<li>기본모드</li>\n<li>성능 우선: 락을 획득하는 속도가 빠르다.</li>\n<li>선점 가능: 새로운 스레드가 기존 대기 스레드보다 먼저 락을 획득할 수 있다.</li>\n<li>기아 현상 가능성: 특정 스레드가 계속해서 락을 획득하지 못할 수 있다.</li>\n</ul>\n<h3>공정 모드</h3>\n<p>생성자에서 <code>true</code> 를 전달하면 된다. 예) <code>new ReentrantLock(true)</code></p>\n<ul>\n<li>공정성 보장: 대기 큐에서 먼저 대기한 스레드가 락을 먼저 획득한다.</li>\n<li>기아 현상 방지: 모든 스레드가 언젠가 락을 획득할 수 있게 보장된다.</li>\n<li>성능 저하: 락을 획득하는 속도가 느려질 수 있다.</li>\n</ul>\n<p>즉, 비공정 모드는 성능을 중시하고, 스레드가 락을 빨리 획득할 수 있지만, 특정 스레드가 계속해서 락을 획득하지 못 할 수 있다. 하지만 공정 모드는 스레드가 락을 획득하는 순서를 보장하여 공정성을 중시하지만, 성능이 저하될 수 있다.</p>\n<h2>ReentrantLock - 활용</h2>\n<p>그럼 이전의 출금 계좌 예제를 <code>ReetrantLock</code>을 이용하여 변경해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">thread<span class=\"token punctuation\">.</span>sync</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>concurrent<span class=\"token punctuation\">.</span>locks<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Lock</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>concurrent<span class=\"token punctuation\">.</span>locks<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ReentrantLock</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">static</span> <span class=\"token import static\"><span class=\"token namespace\">util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">MyLogger</span><span class=\"token punctuation\">.</span><span class=\"token static\">log</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">static</span> <span class=\"token import static\"><span class=\"token namespace\">util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ThreadUtils</span><span class=\"token punctuation\">.</span><span class=\"token static\">sleep</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BankAccountV4</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">BankAccount</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> balance<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Lock</span> lock <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ReentrantLock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">BankAccountV4</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> initialBalance<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>balance <span class=\"token operator\">=</span> initialBalance<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">withdraw</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> amount<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"거래 시작: \"</span> <span class=\"token operator\">+</span> <span class=\"token function\">getClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getSimpleName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        lock<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[검증 시작] 출금액: \"</span> <span class=\"token operator\">+</span> amount <span class=\"token operator\">+</span> <span class=\"token string\">\", 잔액: \"</span> <span class=\"token operator\">+</span> balance<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>balance <span class=\"token operator\">&lt;</span> amount<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[검증 실패] 출금액: \"</span> <span class=\"token operator\">+</span> amount <span class=\"token operator\">+</span> <span class=\"token string\">\", 잔액: \"</span> <span class=\"token operator\">+</span> balance<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[검증 완료] 출금액: \"</span> <span class=\"token operator\">+</span> amount <span class=\"token operator\">+</span> <span class=\"token string\">\", 잔액: \"</span> <span class=\"token operator\">+</span> balance<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            balance <span class=\"token operator\">-=</span> amount<span class=\"token punctuation\">;</span>\n\n            <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[출금 완료] 출금액: \"</span> <span class=\"token operator\">+</span> amount <span class=\"token operator\">+</span> <span class=\"token string\">\", 잔액: \"</span> <span class=\"token operator\">+</span> balance<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">{</span>\n            lock<span class=\"token punctuation\">.</span><span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"거래 종료\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">getBalance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        lock<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> balance<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">{</span>\n            lock<span class=\"token punctuation\">.</span><span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code>synchronized</code> 코드 블록이 사라지는 대신에 <code>lock()</code> 메서드로 락을 걸고 작업 수행 후 <code>finally</code>로 <code>unlock()</code> 메서드를 호출하였다. 여기서 <code>lock()</code> 메서드부터 <code>unlock()</code> 메서드까지를 <strong>임계영역</strong>이라고 한다.</p>\n<blockquote>\n<p>⚠️ 주의</p>\n<p>여기서 사용하는 락은 객체 내부에 있는 모니터 락이 아니다! <code>Lock</code> 인터페이스와 <code>ReentrantLock</code>이 제공하는 기능이다! 모니터 락과 <code>BLOCKED</code> 상태는 <code>synchronized</code>에서만 사용된다.</p>\n</blockquote>\n<p>그러면 그림을 통해 확인해보자.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.96875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABEUlEQVQoz3WS3W7CMAyFez9BWxLbaUs6KKOgCjSVZ0DT3v+FzmRrmVLUXRw5cuzPP0nBzCAik4iY1Jekfu+92a7rFr5cyVe0bYumaUzqzEGpQEqYpgnzPFts8uUFDagJIQSDVFVlKsvSrHNuARQJCKFZ7TCpyMdUiFodra5rC8iBRB7e7RYryVdmQE3WsTVRgXqhHb8CmQldPCIer6BUwHuLzTsutELqUCEqBedAp5YJIZ4gwx2bssSmrPC23dqd5v4B00ErpX3m5xRMLIgimPs9Pvtoehzecekj/G+3Bnxd8OqXUMuMc9zjeR3xdZvwfb/heTnjcRrg8h3+91pr/4xFsPMeh2HAxzjCEYOycRX4Axtl418qDoqmAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image1\"\n        title=\"image1\"\n        src=\"/static/9aa896cef8593f55675235ad26555357/2bef9/01.png\"\n        srcset=\"/static/9aa896cef8593f55675235ad26555357/6f3f2/01.png 256w,\n/static/9aa896cef8593f55675235ad26555357/01e7c/01.png 512w,\n/static/9aa896cef8593f55675235ad26555357/2bef9/01.png 1024w,\n/static/9aa896cef8593f55675235ad26555357/105d8/01.png 1170w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li><code>t1</code>, <code>t2</code>가 출금을 시작한다. 여기서는 <code>t1</code>이 약간 먼저 실행된다고 가정하겠다.</li>\n<li><code>ReenterantLock</code> 내부에는 락과 락을 얻지 못해 대기하는 스레드를 관리하는 대기 큐가 존재한다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.140625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA/0lEQVQoz3WSW26EMAxFWUA74ZEYEpNRZ0Qo8NWf2UKr7n9Bt3IkMwzQj6s8bJ/YjgvnHFTW2lOpnYgOd3sVChLnruuy2rZ9kfg0TYNxHDHPM7z3B6ieX4ASzMx5X9d1ljygwBgjUkrZb1/BKVDXEMJ6FuAzuEFdVYcyt/BCAvq+X8uoqipnIkDJSm3ix30Exw+0RNmubdLHc4Z6KWUIoCxLGGPyKtIe+q5FvCXw5wOXssS7MXi7GDTWri04/RTt5TaD1U6ExIzEASkEjCHg6j1oD9yOxV5rj4hwZ8bPMmV9LxN+lwlf9xusIzgF/jd7Z8oVOIdhGPL4ELndp1n8AVvv47YZioweAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image2\"\n        title=\"image2\"\n        src=\"/static/5b6c8bfbcdbf8f8e42d48c1d40420c55/2bef9/02.png\"\n        srcset=\"/static/5b6c8bfbcdbf8f8e42d48c1d40420c55/6f3f2/02.png 256w,\n/static/5b6c8bfbcdbf8f8e42d48c1d40420c55/01e7c/02.png 512w,\n/static/5b6c8bfbcdbf8f8e42d48c1d40420c55/2bef9/02.png 1024w,\n/static/5b6c8bfbcdbf8f8e42d48c1d40420c55/712f7/02.png 1181w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li><code>t1</code> 스레드가 먼저 실행되어 <code>lock()</code> 메서드를 호출함으로 <code>ReetrantLock</code>에 락 획득을 시도하려 한다.</li>\n<li><code>lock</code>이 존재하므로 <code>t1</code> 스레드가 락을 획득한다. 락을 획득하였으니 스레드 상태는 여전히 <code>RUNNABLE</code> 상태일 것이다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.484375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABHUlEQVQoz32Ry26DMBBF+YBGhuAHLxsR5UFJaDfsum5V9f//51Z3ghEtaRdXtjUzZ2auE601jDGw1sI5txFjFPNCCCjLcnk/UhKBTdOICIlBNimKQu55nmMYBkzThKqq5L1uFs8FyM5MJCQC9vu9AGOxdQ7WuocTboCEee9FdV1LkDBOzSYC5EQ6l3dUtGWzMosJ4snENE1lMk7uXIGqKtF2R1Tt5b4q62Zb1jYl0StKKSUgKssyAd5X1jJZ3Z5guxfs0hQ7pfCkFFSWLT5rbX56yE4MUvG+dDcGoSww+hpj8Bh9g9c2oOdHzkBykrWh8dfW0vNquTG4hID3/ozP6zO+xis++jPeTse/gf+JOSwkuDscMNxuMLTq16d8A6bO5G1NtWnxAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image3\"\n        title=\"image3\"\n        src=\"/static/b3f3a92517726bc1027bfa37718240b5/2bef9/03.png\"\n        srcset=\"/static/b3f3a92517726bc1027bfa37718240b5/6f3f2/03.png 256w,\n/static/b3f3a92517726bc1027bfa37718240b5/01e7c/03.png 512w,\n/static/b3f3a92517726bc1027bfa37718240b5/2bef9/03.png 1024w,\n/static/b3f3a92517726bc1027bfa37718240b5/eb4a1/03.png 1083w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li><code>t1</code> 스레드가 어느정도 수행할 때 쯤 <code>t2</code> 스레드가 <code>lock()</code> 메서드를 만나 락 획득 시도를 하려고 한다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1001px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.734375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABJElEQVQoz4WSy1KEMBBF+QMeeQIZA0QBBxfqKFWu3bDy///mWp2qpCIFzuLSIXSf7huScc5xJiFElJTycH+vrK5raK0RYlgrpSKAMQbnHLqu89//GyKjhKqqfFEopnfaT6eapgnruqLv+8MpI5CKyrL0yvPcx6IoPCwA90VHRxOBTdPAGONlrfXTEZQsp0ApBUQCDw33jTxwGIZ4hmfAtjWoWwuldISRqC7Ny+hBFkmnljlD8+DQTl9gQqMojvPihGnHo85SCGjdQGkDxrh3EZxIqf4CU8j+bLwoUQgMpsVtfMK2PGObRmzXGT8vV7y7AWXyY7J7FztEawxGa3FzA77fXvH56PDRd5itBQuN7wFTSbro5EDXmJcFzeWCkgtwISOMgL8EpxZcyYhlIgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image4\"\n        title=\"image4\"\n        src=\"/static/a71e624160833ec3e9940a723849d924/6acbf/04.png\"\n        srcset=\"/static/a71e624160833ec3e9940a723849d924/6f3f2/04.png 256w,\n/static/a71e624160833ec3e9940a723849d924/01e7c/04.png 512w,\n/static/a71e624160833ec3e9940a723849d924/6acbf/04.png 1001w\"\n        sizes=\"(max-width: 1001px) 100vw, 1001px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>하지만 락이 없으므로 <code>t2</code> 스레드 상태가 <code>WAITING</code> 상태가 되고, 대기 큐에서 관리된다.\n<ul>\n<li><code>LockSupoort.park()</code>가 내부에서 호출된다.</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>✅ 참고</p>\n<p><code>tryLock(long time, TimeUnit unit)</code>와 같은 시간 대기 기능을 사용하면 <code>TIMED_WAITING</code>이 되고, 대기 큐에서 관리된다.</p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABG0lEQVQoz41S7WqEMBD0BYqfiYmJjZoT7sQrJ/oGhVLo+z/PlA2u1Qq9/piETXZnZyeJiqLAXxBCHPY8z7eYz/b3ES1lWUIpdYKUcks0xsB7D631qcmBkIqIkDuzCgKRcqK1FvM8o+/754SEJEmQpiniOA47gRrti7MsQ/7EooiKmJCK2rYNhRTTHSeGSaRAuU7ENnEOe3pQSEQcE/ZeVsbAdgO0cZDiRzEL2hSyh3TJIOPJM0Jd19BKhd1dF0jbopAS2li8JAkKIQ4qI1pYOoMIWRk/Fp03WmF0r5gah+XisfgOTVVBrAoD4b/+oRCotMb94vF+H/H1NuJjuOFzuOLmHHLyb0/Ihv7G/juER1j9ekwT2q47jUsefgNKA/1w9ap9ngAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image5\"\n        title=\"image5\"\n        src=\"/static/00af36e53deaca87f9dc03aaadc8235f/2bef9/05.png\"\n        srcset=\"/static/00af36e53deaca87f9dc03aaadc8235f/6f3f2/05.png 256w,\n/static/00af36e53deaca87f9dc03aaadc8235f/01e7c/05.png 512w,\n/static/00af36e53deaca87f9dc03aaadc8235f/2bef9/05.png 1024w,\n/static/00af36e53deaca87f9dc03aaadc8235f/1be7e/05.png 1059w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li><code>t1</code> : 임계 영역을 수행하고 나면 <code>lock.unlock()</code>을 호출한다.\n<ul>\n<li>t1이 락을 반납한다.</li>\n<li>t1 스레드가 대기 큐의 스레드를 하나 깨운다. <code>LockSupoort.unpark(thread)</code>가 내부에서 호출된다.</li>\n<li>그러면 t2는 <code>RUNNABLE</code> 상태가 되면서 깨어난 스레드는 락 획득을 시도한다.\n<ul>\n<li>이때 락을 획득하면 <code>lock.lock()</code>을 빠져나오면서 대기 큐에서도 제거된다.</li>\n<li>이때 락을 획득하지 못하면 다시 대기 상태가 되면서 대기 큐에 유지된다.\n<ul>\n<li>참고로 락 획득을 시도하는 잠깐 사이에 새로운 스레드가 락을 먼저 가져갈 수 있다.</li>\n<li>공정 모드의 경우 대기 큐에 먼저 대기한 스레드가 먼저 락을 가져간다.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 994px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.421875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABNElEQVQoz42Sy1KDQBBF+QHlOQ8CQ4hBAsQsUoVVbnThUhf6/z9zrTthcDCJuujqrn6cvj0QZFmGv0wIsfC/5QIGUkporS8am2hpmqIsS9R1DaXUAnQGdIN+kQAu4rDLVVWFcRzR9/1CoW8zMEkSxHGMMAwRRZGNCfWBbgH9taeZgRwmiGfleW7BrBHAmgVaVSmEOMEJoHcLzoBUxdipYiPhbpjxqlxD5ytI+Q3zZwKnwj+ZOQ4XRQFjzEm11qjWNe4Oz1CmQXh7g4j9UWRnCZ2BHGbC30gIgW6zU6h0ASkVRJpCMD/5BfDnl7pmSmu8tg0+Hga89Tu8Dx0+D3s8NVtI/koO+F+jws4YDMbg5XjEY7fDYErcVwZi+jABT/LNPfClnD05zyG0xrZtUW02NlZTnX1f4hQXKnHv0woAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image6\"\n        title=\"image6\"\n        src=\"/static/1d383e80753642c5ae8ac7f6fa6a7eeb/75609/06.png\"\n        srcset=\"/static/1d383e80753642c5ae8ac7f6fa6a7eeb/6f3f2/06.png 256w,\n/static/1d383e80753642c5ae8ac7f6fa6a7eeb/01e7c/06.png 512w,\n/static/1d383e80753642c5ae8ac7f6fa6a7eeb/75609/06.png 994w\"\n        sizes=\"(max-width: 994px) 100vw, 994px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>이제 t2도 임계영역을 수행하고 <code>unlock()</code> 메서드를 통해 락을 반납한다.</p>\n<blockquote>\n<p>✅ 참고</p>\n<p><code>volatile</code>를 사용하지 않아도 <code>Lock</code>을 사용할 때 접근하는 변수의 메모리 가시성 문제는 해결된다.</p>\n</blockquote>\n<h2>ReentrantLock - 대기 중단</h2>\n<p><code>ReentrantLock</code>을 사용하면 락을 무한 대기하지 않고, 중간에 빠져나오는 것이 가능하다. 심지어 락을 얻을 수 없다면 기다리지 않고 즉시 빠져나오는 것도 가능하다. 바로 <code>tryLock()</code> 메서드를 이용하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">thread<span class=\"token punctuation\">.</span>sync</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>concurrent<span class=\"token punctuation\">.</span>locks<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Lock</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>concurrent<span class=\"token punctuation\">.</span>locks<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ReentrantLock</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">static</span> <span class=\"token import static\"><span class=\"token namespace\">util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">MyLogger</span><span class=\"token punctuation\">.</span><span class=\"token static\">log</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">static</span> <span class=\"token import static\"><span class=\"token namespace\">util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ThreadUtils</span><span class=\"token punctuation\">.</span><span class=\"token static\">sleep</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BankAccountV5</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">BankAccount</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> balance<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Lock</span> lock <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ReentrantLock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">BankAccountV5</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> initialBalance<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>balance <span class=\"token operator\">=</span> initialBalance<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">withdraw</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> amount<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"거래 시작: \"</span> <span class=\"token operator\">+</span> <span class=\"token function\">getClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getSimpleName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>lock<span class=\"token punctuation\">.</span><span class=\"token function\">tryLock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[진입 실패] 이미 처리 중인 작업이 있습니다.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[검증 시작] 출금액: \"</span> <span class=\"token operator\">+</span> amount <span class=\"token operator\">+</span> <span class=\"token string\">\", 잔액: \"</span> <span class=\"token operator\">+</span> balance<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>balance <span class=\"token operator\">&lt;</span> amount<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[검증 실패] 출금액: \"</span> <span class=\"token operator\">+</span> amount <span class=\"token operator\">+</span> <span class=\"token string\">\", 잔액: \"</span> <span class=\"token operator\">+</span> balance<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[검증 완료] 출금액: \"</span> <span class=\"token operator\">+</span> amount <span class=\"token operator\">+</span> <span class=\"token string\">\", 잔액: \"</span> <span class=\"token operator\">+</span> balance<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            balance <span class=\"token operator\">-=</span> amount<span class=\"token punctuation\">;</span>\n\n            <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[출금 완료] 출금액: \"</span> <span class=\"token operator\">+</span> amount <span class=\"token operator\">+</span> <span class=\"token string\">\", 잔액: \"</span> <span class=\"token operator\">+</span> balance<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">{</span>\n            lock<span class=\"token punctuation\">.</span><span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"거래 종료\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">getBalance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        lock<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> balance<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">{</span>\n            lock<span class=\"token punctuation\">.</span><span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>기존의 코드에서 <code>lock()</code> 메서드 대신 <code>tryLock()</code>로 변경하였다. 처음에 t1 스레드가 접근하여 <code>tryLock()</code>을 만나면 바로 락을 획득하여 임계영역에 접근하지만 이후 t2가 접근하면 락이 없으므로 바로 나가버린다. 즉, 결과는 t1 스레드만 수행되게끔 할 수 있다.</p>\n<p>해당 방식 말고 <code>tryLock(long time, TimeUnit unit)</code>으로 특정 시간만큼은 기달리고 그 시간이 초과되면 바로 나가버리게끔 할 수 있다. 아래와 같이 작성하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">thread<span class=\"token punctuation\">.</span>sync</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>concurrent<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">TimeUnit</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>concurrent<span class=\"token punctuation\">.</span>locks<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Lock</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>concurrent<span class=\"token punctuation\">.</span>locks<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ReentrantLock</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">static</span> <span class=\"token import static\"><span class=\"token namespace\">util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">MyLogger</span><span class=\"token punctuation\">.</span><span class=\"token static\">log</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">static</span> <span class=\"token import static\"><span class=\"token namespace\">util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ThreadUtils</span><span class=\"token punctuation\">.</span><span class=\"token static\">sleep</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BankAccountV6</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">BankAccount</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> balance<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Lock</span> lock <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ReentrantLock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">BankAccountV6</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> initialBalance<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>balance <span class=\"token operator\">=</span> initialBalance<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">withdraw</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> amount<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"거래 시작: \"</span> <span class=\"token operator\">+</span> <span class=\"token function\">getClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getSimpleName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>lock<span class=\"token punctuation\">.</span><span class=\"token function\">tryLock</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">TimeUnit</span><span class=\"token punctuation\">.</span><span class=\"token constant\">MILLISECONDS</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[진입 실패] 이미 처리 중인 작업이 있습니다.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RuntimeException</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[검증 시작] 출금액: \"</span> <span class=\"token operator\">+</span> amount <span class=\"token operator\">+</span> <span class=\"token string\">\", 잔액: \"</span> <span class=\"token operator\">+</span> balance<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>balance <span class=\"token operator\">&lt;</span> amount<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[검증 실패] 출금액: \"</span> <span class=\"token operator\">+</span> amount <span class=\"token operator\">+</span> <span class=\"token string\">\", 잔액: \"</span> <span class=\"token operator\">+</span> balance<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[검증 완료] 출금액: \"</span> <span class=\"token operator\">+</span> amount <span class=\"token operator\">+</span> <span class=\"token string\">\", 잔액: \"</span> <span class=\"token operator\">+</span> balance<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            balance <span class=\"token operator\">-=</span> amount<span class=\"token punctuation\">;</span>\n\n            <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[출금 완료] 출금액: \"</span> <span class=\"token operator\">+</span> amount <span class=\"token operator\">+</span> <span class=\"token string\">\", 잔액: \"</span> <span class=\"token operator\">+</span> balance<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">{</span>\n            lock<span class=\"token punctuation\">.</span><span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"거래 종료\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">getBalance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        lock<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> balance<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">{</span>\n            lock<span class=\"token punctuation\">.</span><span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>위의 코드는 처음에 t1 스레드가 접근하여 락을 획득하고 그 후 t2가 접근을 하는데 락이 없으므로 0.5초 대기를 한다. 이때 <code>t2</code>는 <code>TIMED_WAITING</code>상태가 된다. 내부에서는 <code>LockSupport.parkNanos(시간)</code>이 호출된다. 대기 시간인 0.5초간 락을 획득하지 못했다. <code>lock.tryLock(시간)</code> 에서 즉시 빠져나온다. 이때 <code>false</code>가 반환된다. 스레드는 <code>TIMED_WAITING</code>-><code>RUNNABLE</code>이 된다.</p>\n<blockquote>\n<p>잘못된 지식이 있을 경우 댓글로 남겨주시면 빠르게 반영하겠습니다!</p>\n</blockquote>","fields":{"slug":"/고급-동기화-concurrent-Lock/"},"timeToRead":11,"frontmatter":{"title":"[자바 고급1] 고급 동기화 - concurrent.Lock","tags":["자바"],"date":"2025-05-14T22:10:27.000Z","image":{"publicURL":"/static/3189e9c0404650ccc6c5ffc998bc8717/banner.png"},"series":"자바 고급1"}}},"pageContext":{"id":"081b523b-8834-59d1-b4b2-0d8c96124adf"}},
    "staticQueryHashes": ["2580406332","3810308631"]}