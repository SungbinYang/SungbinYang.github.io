{
    "componentChunkName": "component---src-template-post-tsx",
    "path": "/advanced-kotlin-연산자-오버로딩과-Kotlin-DSL/",
    "result": {"data":{"allMarkdownRemark":{"nodes":[{"fields":{"slug":"/coroutine-코루틴-기초/"},"timeToRead":15,"frontmatter":{"title":"[코루틴] 코루틴 기초","series":"코루틴"}},{"fields":{"slug":"/운영체제-기초-운영체제-시작하기/"},"timeToRead":4,"frontmatter":{"title":"[운영체제 기초] 운영체제 시작하기","series":"운영체제 기초"}},{"fields":{"slug":"/컴퓨터-구조론-이론-입출력-장치/"},"timeToRead":5,"frontmatter":{"title":"[컴퓨터 구조론 이론] 입출력 장치","series":"컴퓨터 구조론 이론"}},{"fields":{"slug":"/컴퓨터-구조론-이론-보조기억장치/"},"timeToRead":4,"frontmatter":{"title":"[컴퓨터 구조론 이론] 보조기억장치","series":"컴퓨터 구조론 이론"}},{"fields":{"slug":"/컴퓨터-구조론-이론-메모리와-캐시-메모리/"},"timeToRead":5,"frontmatter":{"title":"[컴퓨터 구조론 이론] 메모리와 캐시 메모리","series":"컴퓨터 구조론 이론"}},{"fields":{"slug":"/컴퓨터-구조론-이론-CPU의-성능-향상-기법/"},"timeToRead":5,"frontmatter":{"title":"[컴퓨터 구조론 이론] CPU의 성능 향상 기법","series":"컴퓨터 구조론 이론"}},{"fields":{"slug":"/advanced-kotlin-코틀린을-더-알아보자/"},"timeToRead":11,"frontmatter":{"title":"[코틀린 고급] 코틀린을 더 알아보자!","series":"코틀린 고급"}},{"fields":{"slug":"/컴퓨터-구조론-이론-CPU의-작동-원리/"},"timeToRead":6,"frontmatter":{"title":"[컴퓨터 구조론 이론] CPU의 작동 원리","series":"컴퓨터 구조론 이론"}},{"fields":{"slug":"/advanced-kotlin-어노테이션과-리플렉션/"},"timeToRead":8,"frontmatter":{"title":"[코틀린 고급] 어노테이션과 리플렉션","series":"코틀린 고급"}},{"fields":{"slug":"/advanced-kotlin-연산자-오버로딩과-Kotlin-DSL/"},"timeToRead":12,"frontmatter":{"title":"[코틀린 고급] 연산자 오버로딩과 Kotlin DSL","series":"코틀린 고급"}},{"fields":{"slug":"/컴퓨터-구조론-이론-명령어/"},"timeToRead":6,"frontmatter":{"title":"[컴퓨터 구조론 이론] 명령어","series":"컴퓨터 구조론 이론"}},{"fields":{"slug":"/컴퓨터-구조론-이론-데이터/"},"timeToRead":5,"frontmatter":{"title":"[컴퓨터 구조론 이론] 데이터","series":"컴퓨터 구조론 이론"}},{"fields":{"slug":"/코틀린-K2-컴파일러/"},"timeToRead":11,"frontmatter":{"title":"Kotlin 1.x에서 안 되던 코드가 2.0에서 된다? — K2 컴파일러가 바꿔놓은 Java SAM 변환의 모든 것","series":"트러블 슈팅"}},{"fields":{"slug":"/advanced-kotlin-복잡한-함수형-프로그래밍/"},"timeToRead":12,"frontmatter":{"title":"[코틀린 고급] 복잡한 함수형 프로그래밍","series":"코틀린 고급"}},{"fields":{"slug":"/advanced-kotlin-지연과-위임/"},"timeToRead":18,"frontmatter":{"title":"[코틀린 고급] 지연과 위임","series":"코틀린 고급"}},{"fields":{"slug":"/컴퓨터-구조론-이론-컴퓨터-구조-시작하기/"},"timeToRead":4,"frontmatter":{"title":"[컴퓨터 구조론 이론] 컴퓨터 구조 시작하기","series":"컴퓨터 구조론 이론"}},{"fields":{"slug":"/advanced-kotlin-제네릭/"},"timeToRead":18,"frontmatter":{"title":"[코틀린 고급] 제네릭","series":"코틀린 고급"}},{"fields":{"slug":"/컴퓨터-구조론-마무리/"},"timeToRead":2,"frontmatter":{"title":"[컴퓨터 구조론] 마무리","series":"컴퓨터 구조론"}},{"fields":{"slug":"/컴퓨터-구조론-기계어-어셈블리어/"},"timeToRead":5,"frontmatter":{"title":"[컴퓨터 구조론] 기계어와 어셈블리어","series":"컴퓨터 구조론"}},{"fields":{"slug":"/컴퓨터-구조론-CPU-만들기-제어장치/"},"timeToRead":9,"frontmatter":{"title":"[컴퓨터 구조론] CPU 만들기 - 제어장치","series":"컴퓨터 구조론"}},{"fields":{"slug":"/컴퓨터-구조론-제어장치가-없는-컴퓨터/"},"timeToRead":3,"frontmatter":{"title":"[컴퓨터 구조론] 제어장치가 없는 컴퓨터","series":"컴퓨터 구조론"}},{"fields":{"slug":"/컴퓨터-구조론-메모리-만들기/"},"timeToRead":12,"frontmatter":{"title":"[컴퓨터 구조론] 메모리 만들기","series":"컴퓨터 구조론"}},{"fields":{"slug":"/컴퓨터-구조론-CPU-만들기/"},"timeToRead":4,"frontmatter":{"title":"[컴퓨터 구조론] CPU 만들기: 산술논리연산장치(ALU)","series":"컴퓨터 구조론"}},{"fields":{"slug":"/컴퓨터-구조론-컴퓨터-기초가-되는-하드웨어-만들기/"},"timeToRead":13,"frontmatter":{"title":"[컴퓨터 구조론] 컴퓨터의 기초가 되는 하드웨어 만들기","series":"컴퓨터 구조론"}},{"fields":{"slug":"/컴퓨터-구조론-비트/"},"timeToRead":7,"frontmatter":{"title":"[컴퓨터 구조론] 비트","series":"컴퓨터 구조론"}},{"fields":{"slug":"/Redis-캐싱-전략/"},"timeToRead":4,"frontmatter":{"title":"[Redis] Redis 캐싱 전략","series":"redis 기본"}},{"fields":{"slug":"/Redis-사용법-익히기/"},"timeToRead":4,"frontmatter":{"title":"[Redis] Redis 사용법 익히기","series":"redis 기본"}},{"fields":{"slug":"/Redis-기본-개념/"},"timeToRead":1,"frontmatter":{"title":"[Redis] Redis 기본 개념","series":"redis 기본"}},{"fields":{"slug":"/Gradle-Introduction/"},"timeToRead":2,"frontmatter":{"title":"[Gradle] Introduction","series":"gradle"}},{"fields":{"slug":"/intellij-플러그인/"},"timeToRead":2,"frontmatter":{"title":"[IntelliJ] 플러그인","series":"IntelliJ"}},{"fields":{"slug":"/intellij-Git-Github/"},"timeToRead":4,"frontmatter":{"title":"[IntelliJ] Git&Github","series":"IntelliJ"}},{"fields":{"slug":"/intellij-디버깅/"},"timeToRead":3,"frontmatter":{"title":"[IntelliJ] 디버깅","series":"IntelliJ"}},{"fields":{"slug":"/intellij-리팩토링/"},"timeToRead":6,"frontmatter":{"title":"[IntelliJ] 리팩토링","series":"IntelliJ"}},{"fields":{"slug":"/intellij-자동완성/"},"timeToRead":3,"frontmatter":{"title":"[IntelliJ] 자동완성","series":"IntelliJ"}},{"fields":{"slug":"/intellij-검색/"},"timeToRead":4,"frontmatter":{"title":"[IntelliJ] 검색","series":"IntelliJ"}},{"fields":{"slug":"/css/"},"timeToRead":8,"frontmatter":{"title":"[프론트엔드] css","series":"프론트엔드"}},{"fields":{"slug":"/Javascript/"},"timeToRead":18,"frontmatter":{"title":"[프론트엔드] Javascript","series":"프론트엔드"}},{"fields":{"slug":"/HTML/"},"timeToRead":10,"frontmatter":{"title":"[프론트엔드] HTML","series":"프론트엔드"}},{"fields":{"slug":"/프론트엔드에-대해/"},"timeToRead":6,"frontmatter":{"title":"[프론트엔드] 프론트엔드에 대해","series":"프론트엔드"}},{"fields":{"slug":"/백엔드-개발자에-의한-백엔드-개발자를-위한-프론트엔드/"},"timeToRead":2,"frontmatter":{"title":"[프론트엔드] 백엔드 개발자에 의한, 백엔드 개발자를 위한 프론트엔드","series":"프론트엔드"}},{"fields":{"slug":"/intellij-포커스/"},"timeToRead":3,"frontmatter":{"title":"[IntelliJ] 포커스","series":"IntelliJ"}},{"fields":{"slug":"/intellij-코드-Edit/"},"timeToRead":8,"frontmatter":{"title":"[IntelliJ] 코드 Edit","series":"IntelliJ"}},{"fields":{"slug":"/intellij-소개/"},"timeToRead":3,"frontmatter":{"title":"[IntelliJ] 소개","series":"IntelliJ"}},{"fields":{"slug":"/컴퓨터-구조론-불-대수/"},"timeToRead":13,"frontmatter":{"title":"[컴퓨터 구조론] 불 대수","series":"컴퓨터 구조론"}},{"fields":{"slug":"/지속-성장-가능한-소프트웨어를-만들어가는-방법/"},"timeToRead":7,"frontmatter":{"title":"[소프트웨어] 지속 성장 가능한 소프트웨어를 만들어가는 방법","series":"소프트웨어"}},{"fields":{"slug":"/향로와-함께하는-챌린지-후기/"},"timeToRead":2,"frontmatter":{"title":"향로와 함께하는 추석 완강 챌린지","series":"일상"}},{"fields":{"slug":"/컴퓨터-구조론-컴퓨터-구성-요소/"},"timeToRead":5,"frontmatter":{"title":"[컴퓨터 구조론] 컴퓨터 구성 요소","series":"컴퓨터 구조론"}},{"fields":{"slug":"/컴퓨터-구조론-컴퓨터-구조-개요/"},"timeToRead":5,"frontmatter":{"title":"[컴퓨터 구조론] 컴퓨터 구조 개요","series":"컴퓨터 구조론"}},{"fields":{"slug":"/java-to-kotlin-starter-guide-추가적으로-알아두어야-할-코틀린-특성/"},"timeToRead":8,"frontmatter":{"title":"[코틀린 입문] 추가적으로 알아두어야 할 코틀린 특성","series":"코틀린 입문"}},{"fields":{"slug":"/java-to-kotlin-starter-guide-코틀린에서-FP/"},"timeToRead":16,"frontmatter":{"title":"[코틀린 입문] 코틀린에서 FP","series":"코틀린 입문"}},{"fields":{"slug":"/컴퓨터-기초-자료구조-소개와-마무리/"},"timeToRead":2,"frontmatter":{"title":"[컴퓨터 기초] 자료구조 소개와 마무리","series":"컴퓨터 기초"}},{"fields":{"slug":"/컴퓨터-기초-프로그래밍-맛보기/"},"timeToRead":4,"frontmatter":{"title":"[컴퓨터 기초] 프로그래밍 맛보기","series":"컴퓨터 기초"}},{"fields":{"slug":"/코틀린-상속-간-주의-점/"},"timeToRead":2,"frontmatter":{"title":"코틀린 상속 간 주의점","series":"트러블 슈팅"}},{"fields":{"slug":"/java-to-kotlin-starter-guide-코틀린에서-OOP/"},"timeToRead":23,"frontmatter":{"title":"[코틀린 입문] 코틀린에서 OOP","series":"코틀린 입문"}},{"fields":{"slug":"/컴퓨터-기초-넓고-얕은-운영체제/"},"timeToRead":8,"frontmatter":{"title":"[컴퓨터 기초] 넓고 얕은 운영체제","series":"컴퓨터 기초"}},{"fields":{"slug":"/java-to-kotlin-starter-guide-코틀린에서-코드를-제어하는-방법/"},"timeToRead":13,"frontmatter":{"title":"[코틀린 입문] 코틀린에서 코드를 제어하는 방법","series":"코틀린 입문"}},{"fields":{"slug":"/컴퓨터-기초-넓고-얕은-컴퓨터-구조/"},"timeToRead":7,"frontmatter":{"title":"[컴퓨터 기초] 넓고 얕은 컴퓨터 구조","series":"컴퓨터 기초"}},{"fields":{"slug":"/컴퓨터-기초-컴공-이론을-위한-기초체력-다지기/"},"timeToRead":7,"frontmatter":{"title":"[컴퓨터 기초] 컴공 이론을 위한 기초체력 다지기","series":"컴퓨터 기초"}},{"fields":{"slug":"/java-to-kotlin-starter-guide-코틀린에서-변수와-타입-연산자를-다루는-방법/"},"timeToRead":14,"frontmatter":{"title":"[코틀린 입문] 코틀린에서 변수와 타입, 연산자를 다루는 방법","series":"코틀린 입문"}},{"fields":{"slug":"/java-to-kotlin-starter-guide-강의-소개/"},"timeToRead":2,"frontmatter":{"title":"[코틀린 입문] 강의 소개","series":"코틀린 입문"}},{"fields":{"slug":"/컴퓨터-기초-학습에-앞서-본-강의-소개/"},"timeToRead":3,"frontmatter":{"title":"[컴퓨터 기초] 학습에 앞서 본 강의 소개","series":"컴퓨터 기초"}},{"fields":{"slug":"/중요한-것은-포기하지-않는-마음/"},"timeToRead":3,"frontmatter":{"title":"2025년 1분기 회고(feat. 중요한 것은 포기하지 않는 마음)","series":"일상 이야기"}},{"fields":{"slug":"/2024년-주니어-개발자-회고록/"},"timeToRead":3,"frontmatter":{"title":"2024년 주니어 개발자 회고록","series":"일상 이야기"}},{"fields":{"slug":"/WDD/"},"timeToRead":1,"frontmatter":{"title":"WDD(Why-Driven-Development)","series":"생각정리"}},{"fields":{"slug":"/내가-개발자-커리어를-시작한-이유/"},"timeToRead":4,"frontmatter":{"title":"내가 개발자 커리어를 시작한 이유","series":"일상"}},{"fields":{"slug":"/블로그-이관-및-회고/"},"timeToRead":3,"frontmatter":{"title":"블로그 이관 및 회고","series":"일상 이야기"}},{"fields":{"slug":"/Spring-Boot-3.2.x-더-이상-바이트코드를-구문-분석하여-매개변수-이름을-추론하려고-시도하지-않스/"},"timeToRead":3,"frontmatter":{"title":"Spring Boot 3.2.x 더 이상 바이트코드를 구문 분석하여 매개변수 이름을 추론하려고 시도하지 않습니다.","series":"트러블 슈팅"}},{"fields":{"slug":"/라떼-개발자/"},"timeToRead":2,"frontmatter":{"title":"라떼 개발자","series":"생각정리"}},{"fields":{"slug":"/2023년-주니어-개발자-회고록/"},"timeToRead":5,"frontmatter":{"title":"2023년 주니어 개발자 회고록","series":"일상 이야기"}}],"group":[{"fieldValue":"IntelliJ","totalCount":9},{"fieldValue":"gradle","totalCount":1},{"fieldValue":"redis 기본","totalCount":3},{"fieldValue":"생각정리","totalCount":2},{"fieldValue":"소프트웨어","totalCount":1},{"fieldValue":"운영체제 기초","totalCount":1},{"fieldValue":"일상","totalCount":2},{"fieldValue":"일상 이야기","totalCount":4},{"fieldValue":"컴퓨터 구조론","totalCount":11},{"fieldValue":"컴퓨터 구조론 이론","totalCount":8},{"fieldValue":"컴퓨터 기초","totalCount":6},{"fieldValue":"코루틴","totalCount":1},{"fieldValue":"코틀린 고급","totalCount":6},{"fieldValue":"코틀린 입문","totalCount":6},{"fieldValue":"트러블 슈팅","totalCount":3},{"fieldValue":"프론트엔드","totalCount":5}]},"markdownRemark":{"id":"e3699a86-7c9c-5405-b34f-39b9b56ac470","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABZElEQVQoz41SMUtCURh9P6I9GoTGfkCbtISDEIig7wml2FIimaE0pLVUBkY22NSSSqmEkZHobKavMM0wyBoawppe8YS83/fFe5qKk4cznHu55zuXey5HKoAIkAihy9HADWjsCwT8R3cLEVQMmxlRSISDM3pLJihtwMwSyV+qATq23oihpWJuI0xck7CZa7nHwMdR9ZgRVSrl2lOt/FAmIkmS6s/19FU6m8sOJeMPkTP++OqebW9MsZeMMh4Yb+FNgil5ngzsBZwrTp1eZxbMlnmLa80V3A/2k3+RPnyH74sLofVCVUkCxsBoMlrtVv2c3r/l185oeYG32W2aSY3H63E4Hc3PpmJG9d55b2p6uza+S/wy3OWVdygUbhuNRjQWDR+Fi8ViJBpJXaRip7FSqSSKoizLPTOc5CXDPa3e4M4lxRPU+lb7Axy9qoHSkACgUw9jDBEZYx09WBjXP60SVY74Sf4AtOgKavup5M4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"banner\"\n        title=\"banner\"\n        src=\"/static/619e6175d83cd70c239721219e3cbc91/2bef9/banner.png\"\n        srcset=\"/static/619e6175d83cd70c239721219e3cbc91/6f3f2/banner.png 256w,\n/static/619e6175d83cd70c239721219e3cbc91/01e7c/banner.png 512w,\n/static/619e6175d83cd70c239721219e3cbc91/2bef9/banner.png 1024w,\n/static/619e6175d83cd70c239721219e3cbc91/c1b63/banner.png 1200w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>해당 포스팅은 인프런의 <a href=\"https://inf.run/GZfvz\">코틀린 고급편</a> 강의를 참조하여 작성한 글입니다.</p>\n</blockquote>\n<h2>연산자 오버로딩</h2>\n<p>이번에는 연산자 오버로딩에 대해 학습해보도록 하겠다. 연산자 오버로딩은 이전 포스팅에서 지연과 위임에서 위임 객체를 만들면서 <code>getValue</code>, <code>setValue</code>에서 적용해본 기억이 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-kotlin line-numbers\"><code class=\"language-kotlin\"><span class=\"token keyword\">operator</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">getValue</span><span class=\"token punctuation\">(</span>thisRef<span class=\"token operator\">:</span> R<span class=\"token punctuation\">,</span> property<span class=\"token operator\">:</span> KProperty<span class=\"token operator\">&lt;</span><span class=\"token operator\">*</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> T <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">operator</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span>thisRef<span class=\"token operator\">:</span> R<span class=\"token punctuation\">,</span> property<span class=\"token operator\">:</span> KProperty<span class=\"token operator\">&lt;</span><span class=\"token operator\">*</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> value<span class=\"token operator\">:</span> T<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>위 함수를 보면 연산자 오버로딩의 두 가지 조건을 알 수 있다.</p>\n<ul>\n<li><code>fun</code> 앞에 <code>operator</code>라는 키워드가 붙는다.</li>\n<li>함수의 이름과 함수의 파라미터가 정해져있다.</li>\n</ul>\n<p>연산자 오버로딩은 이 2개가 끝이다. 그려먼 구체적으로 예시를 들어서 한번 자세히 알아보자. 아래의 코드가 있다고 해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-kotlin line-numbers\"><code class=\"language-kotlin\"><span class=\"token keyword\">data</span> <span class=\"token keyword\">class</span> <span class=\"token function\">Point</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">val</span> x<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">val</span> y<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>해당 좌표 클래스에서 x좌표와 y좌표의 점을 대칭시키고 싶은 요구사항이 나왔다고 해보자. 그러면 우리는 아마 아래처럼 작성할 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-kotlin line-numbers\"><code class=\"language-kotlin\"><span class=\"token keyword\">data</span> <span class=\"token keyword\">class</span> <span class=\"token function\">Point</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">val</span> x<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">val</span> y<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">zeroPointSymmetry</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Point <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">Point</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>x<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span>y<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>하지만 연산자 오버로딩을 사용하면, 조금 더 코드를 간결하게 만들 수 있다. <code>-</code> 연산자에 대한 오버로딩을 수행하려면 <code>unaryPlus()</code> 이름을 사용하여 만들어주면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-kotlin line-numbers\"><code class=\"language-kotlin\"><span class=\"token keyword\">data</span> <span class=\"token keyword\">class</span> <span class=\"token function\">Point</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">val</span> x<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">val</span> y<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">zeroPointSymmetry</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Point <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">Point</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>x<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span>y<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">operator</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">unaryMinus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Point <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">Point</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>x<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span>y<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>그리고 아래와 같이 사용하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-kotlin line-numbers\"><code class=\"language-kotlin\"><span class=\"token keyword\">val</span> point <span class=\"token operator\">=</span> <span class=\"token function\">Point</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>point<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>동일하게 함수를 만들었지만 <code>operator</code>를 만들고 정해진 함수 이름을 사용했더니 함수 이름과 연관된 연산자를 <code>Point</code>에서 직접 사용할 수 있었다. 이번엔 <code>+</code>와 비슷하게 <code>++</code> 연산자를 사용해 좌표의 값을 1씩 더해주도록 하자. <code>++</code>에 대응되는 함수 이름은 <code>inc()</code>이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-kotlin line-numbers\"><code class=\"language-kotlin\"><span class=\"token keyword\">data</span> <span class=\"token keyword\">class</span> <span class=\"token function\">Point</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">val</span> x<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">val</span> y<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">zeroPointSymmetry</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Point <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">Point</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>x<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span>y<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">operator</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">unaryMinus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Point <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">Point</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>x<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span>y<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">operator</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">inc</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Point <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">Point</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> y <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이 두 연산자에 관해 추가적으로 알아 두어야 할 것이 있다. <code>+</code>는 다른 타입을 반환할 수 있지만, <code>++</code>는 반드시 같은 타입 또는 하위 타입을 반환해야만 한다. 또한, <code>++</code> 연산자는 변수 자체의 값이 증가한다는 뜻이므로, <code>var</code> 변수에만 사용할 수 있다. 예를 들어 <code>+</code> 연산자는 <code>Point</code>가 아닌 <code>Line</code>을 반환하게 할 수 있다. 반면, <code>++</code> 연산자는 <code>Line</code>을 반환하려 하면 에러가 난다. <code>+</code>와 유사한 연산자로는 <code>- / !</code>가 있고 <code>++</code>와 유사한 연산자로는 <code>--</code>가 있다. 우리가 익숙한 사칙연산 역시 오버로딩이 가능하다. 예를 들어 좌표 간의 덧셈을 다음과 같이 수행 할 수 있다. 바로 아래와 같이 말이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-kotlin line-numbers\"><code class=\"language-kotlin\"><span class=\"token keyword\">data</span> <span class=\"token keyword\">class</span> <span class=\"token function\">Point</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">val</span> x<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">val</span> y<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">operator</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">plus</span><span class=\"token punctuation\">(</span>other<span class=\"token operator\">:</span> Point<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Point <span class=\"token operator\">=</span> <span class=\"token function\">Point</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">+</span> other<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> y <span class=\"token operator\">+</span> other<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이때 꼭 같은 타입끼리 연산이 될 필요는 없다. 예를 들어 <code>LocalDate</code>에 확장 함수와 연산자 오버로딩을 활용해 재밌는 표현을 만들어 낼 수도 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-kotlin line-numbers\"><code class=\"language-kotlin\"><span class=\"token keyword\">data</span> <span class=\"token keyword\">class</span> <span class=\"token function\">DateTimes</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">val</span> day<span class=\"token operator\">:</span> Long<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">operator</span> <span class=\"token keyword\">fun</span> LocalDate<span class=\"token punctuation\">.</span><span class=\"token function\">plus</span><span class=\"token punctuation\">(</span>datetimes<span class=\"token operator\">:</span> DateTimes<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> LocalDate <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">plusDays</span><span class=\"token punctuation\">(</span>datetimes<span class=\"token punctuation\">.</span>day<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>위와 같이 정의를 하면 아래와 같이 사용이 가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-kotlin line-numbers\"><code class=\"language-kotlin\"><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>LocalDate<span class=\"token punctuation\">.</span><span class=\"token function\">of</span><span class=\"token punctuation\">(</span><span class=\"token number\">2026</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">21</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token function\">DateTimes</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>여기에 확장 프로퍼티를 사용하면 다음과 같은 표현도 가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-kotlin line-numbers\"><code class=\"language-kotlin\"><span class=\"token keyword\">val</span> Int<span class=\"token punctuation\">.</span>days<span class=\"token operator\">:</span> DateTimes\n    <span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token function\">DateTimes</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">toLong</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">println</span><span class=\"token punctuation\">(</span>LocalDate<span class=\"token punctuation\">.</span><span class=\"token function\">of</span><span class=\"token punctuation\">(</span><span class=\"token number\">2026</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">21</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">3</span><span class=\"token punctuation\">.</span>days<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이런 방식으로 시간이나 날짜들에 대한 코드들을 만들어 둔다면 읽기 쉽고 타입 안전한 날짜 / 시각 구성이 가능할 것이다.</p>\n<p>산술 연산자와 대응되는 복합 대입 연산자 역시 오버로딩할 수 있다. 단, 그 로직은 조금 복잡하다. 복합 연산자는 다음과 같은 순서로 동작하게 된다.</p>\n<ul>\n<li>가장 먼저, 복합 대입 연산자에 대응되는 함수가 있는지 확인한다. 예를 들어, <code>+=</code> 기호를 사용했다면, <code>+=</code>에 대응되는 <code>plusAssign()</code>이 있는지 확인한다.</li>\n<li>만약 복합 연산자에 대응되는 함수가 없다면, 연관된 산술 연산자를 적용한다. 예를 들어, <code>+=</code> 기호를 사용했다면 <code>+</code>를 적용한다. 그 후, 그 결과로 변수를 변경하게 된다.</li>\n<li>만약, <code>val</code> 변수라서 값을 변경할 수 없다면 에러를 뱉는다.</li>\n</ul>\n<p>예시 코드를 한번 살펴보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-kotlin line-numbers\"><code class=\"language-kotlin\"><span class=\"token keyword\">val</span> mutableList <span class=\"token operator\">=</span> <span class=\"token function\">mutableListOf</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"A\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"B\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"C\"</span></span><span class=\"token punctuation\">)</span>\nmutableList <span class=\"token operator\">+=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"D\"</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>이 코드에서 <code>mutableList</code>라는 변수 자체는 불변이다. 하지만, <code>MutableList</code>에는 <code>+=</code>에 대응되는 <code>plusAssign</code> 함수가 구현되어 있다. 따라서 <code>mutableList</code> 자체는 바뀌지 않고, <code>MutableList</code>에 D가 추가된다. 다음 예시도 살펴보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-kotlin line-numbers\"><code class=\"language-kotlin\"><span class=\"token keyword\">var</span> list <span class=\"token operator\">=</span> <span class=\"token function\">listOf</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"A\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"B\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"C\"</span></span><span class=\"token punctuation\">)</span>\nlist <span class=\"token operator\">+=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"D\"</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>이번에는 <code>list</code> 변수가 가변이지만 <code>List</code>는 불변이다. 그리고 <code>List</code>는 <code>plusAssign()</code>을 구현하지 않았다. 따라서 <code>List</code>의 <code>plus</code> 함수가 호출되고, 그 결과가 list 변수에 덮어 쓰인다. 그럼 위의 코드에서 만약 <code>var</code> 대신 <code>val</code>을 사용하면 어떻게 될까? <code>val</code> 변수이기 때문에 <code>plus</code> 함수 결과를 list에 대입할 수 없게 되고 따라서 에러가 발생하게 된다.</p>\n<p>이 외에도 다양한 연산자 오버로딩이 가능하다. 대표적으로 <code>compareTo</code>는 비교 연산자에 <code>equals</code>는 <code>==</code>과 <code>!=</code>에 사용된다. 또한, <code>..</code> / <code>in</code> / <code>!in</code> 연산자도 오버로딩 할 수 있고, <code>List</code>와 <code>Map</code>에서 사용했던 <code>list[0] = 1</code> <code>map[\"A\"]</code>와 같은 기능 또한 연산자 오버로딩에서 만들어진 것이다. 또한 함수 호출 역시 연산자이다. 그래서 이런 것이 가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-kotlin line-numbers\"><code class=\"language-kotlin\"><span class=\"token keyword\">package</span> me<span class=\"token punctuation\">.</span>sungbin<span class=\"token punctuation\">.</span>function\n\n<span class=\"token keyword\">enum</span> <span class=\"token keyword\">class</span> <span class=\"token function\">Operator</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> oper<span class=\"token operator\">:</span> Char<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">val</span> calcFun<span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>Int<span class=\"token punctuation\">,</span> Int<span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> Int\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">PLUS</span><span class=\"token punctuation\">(</span><span class=\"token char\">'+'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> a<span class=\"token punctuation\">,</span> b <span class=\"token operator\">-></span> a <span class=\"token operator\">+</span> b <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">MINUS</span><span class=\"token punctuation\">(</span><span class=\"token char\">'-'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> a<span class=\"token punctuation\">,</span> b <span class=\"token operator\">-></span> a <span class=\"token operator\">-</span> b <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">MULTIPLY</span><span class=\"token punctuation\">(</span><span class=\"token char\">'*'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> a<span class=\"token punctuation\">,</span> b <span class=\"token operator\">-></span> a <span class=\"token operator\">*</span> b <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">DIVIDE</span><span class=\"token punctuation\">(</span><span class=\"token char\">'/'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> a<span class=\"token punctuation\">,</span> b <span class=\"token operator\">-></span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>b <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token function\">IllegalArgumentException</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"0으로 나눌 수 없다\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            a <span class=\"token operator\">/</span> b\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">operator</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span>a<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Int <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">calcFun</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>함수 호출은 <code>invoke</code>로 오버로딩을 할 수 있다. 위와 같이 정의한 후에 아래와 같이 사용하면 정말 간단하게 <code>oper.calcFun</code>으로 호출하지 않아도 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-kotlin line-numbers\"><code class=\"language-kotlin\"><span class=\"token keyword\">fun</span> <span class=\"token function\">calculate</span><span class=\"token punctuation\">(</span>num1<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">,</span> num2<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">,</span> oper<span class=\"token operator\">:</span> Operator<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token function\">oper</span><span class=\"token punctuation\">(</span>num1<span class=\"token punctuation\">,</span> num2<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>이렇게, 코틀린의 연산자 오버로딩의 다양한 종류에 대해 살펴보았다. 연산자 오버로딩을 사용할 때 한 가지 주의할 점이 있는데, 바로 연산자 오버로딩은 연산자의 원래 의미에 맞게 사용하는 것이 제일 좋다는 것이다. 굉장히 직관적인 가이드이다! 생각해 보면, <code>+</code> 기호를 썼는데 <code>-</code> 기호처럼 동작하면 코드를 읽기에 불편할 것이다.</p>\n<p>하지만, 이러한 주의할 점에도 예외가 있다. 바로 Kotlin DSL을 만들 때이다! Kotlin DSL을 만들 때는 연산자를 하나의 기호처럼 사용하기 때문에 꼭 원래 연산 의미를 유지할 필요가 없다.</p>\n<h3>코틀린 연산자 오버로딩 정리</h3>\n<table style=\"border-collapse: collapse; width: 100%; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 15px;\">\n  <thead style=\"color: black;\">\n    <tr style=\"background-color: #f5f5f5;\">\n      <th style=\"border: 1px solid #ddd; padding: 12px 16px; text-align: left; font-weight: 600;\">연산자 표현</th>\n      <th style=\"border: 1px solid #ddd; padding: 12px 16px; text-align: left; font-weight: 600;\">대응되는 함수</th>\n    </tr>\n  </thead>\n  <tbody style=\"color: black;\">\n    <tr style=\"background-color: #fff;\">\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\">+a</td>\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\"><code>a.unaryPlus()</code></td>\n    </tr>\n    <tr style=\"background-color: #fafafa;\">\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\">-a</td>\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\"><code>a.unaryMinus()</code></td>\n    </tr>\n    <tr style=\"background-color: #fff;\">\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\">!a</td>\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\"><code>a.not()</code></td>\n    </tr>\n    <tr style=\"background-color: #fafafa;\">\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\">a++</td>\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\"><code>a.inc()</code></td>\n    </tr>\n    <tr style=\"background-color: #fff;\">\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\">a--</td>\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\"><code>a.dec()</code></td>\n    </tr>\n    <tr style=\"background-color: #fafafa;\">\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\">a + b</td>\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\"><code>a.plus(b)</code></td>\n    </tr>\n    <tr style=\"background-color: #fff;\">\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\">a - b</td>\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\"><code>a.minus(b)</code></td>\n    </tr>\n    <tr style=\"background-color: #fafafa;\">\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\">a * b</td>\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\"><code>a.times(b)</code></td>\n    </tr>\n    <tr style=\"background-color: #fff;\">\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\">a / b</td>\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\"><code>a.div(b)</code></td>\n    </tr>\n    <tr style=\"background-color: #fafafa;\">\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\">a % b</td>\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\"><code>a.rem(b)</code></td>\n    </tr>\n    <tr style=\"background-color: #fff;\">\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\">a..b</td>\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\"><code>a.rangeTo(b)</code></td>\n    </tr>\n    <tr style=\"background-color: #fafafa;\">\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\">a in b</td>\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\"><code>b.contains(a)</code></td>\n    </tr>\n    <tr style=\"background-color: #fff;\">\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\">a !in b</td>\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\"><code>!b.contains(a)</code></td>\n    </tr>\n    <tr style=\"background-color: #fafafa;\">\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\">a[i]</td>\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\"><code>a.get(i)</code></td>\n    </tr>\n    <tr style=\"background-color: #fff;\">\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\">a[i, j] 수를 늘릴 수 있다. (ex. a[1, 2, 3])</td>\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\"><code>a.get(i, j)</code></td>\n    </tr>\n    <tr style=\"background-color: #fafafa;\">\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\">a[i] = b</td>\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\"><code>a.set(i, b)</code></td>\n    </tr>\n    <tr style=\"background-color: #fff;\">\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\">a[i, j] = b 수를 늘릴 수 있다. (ex. a[1, 2, 3] = 4)</td>\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\"><code>a.set(i, j, b)</code></td>\n    </tr>\n    <tr style=\"background-color: #fafafa;\">\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\">a()</td>\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\"><code>a.invoke()</code></td>\n    </tr>\n    <tr style=\"background-color: #fff;\">\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\">a(i)</td>\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\"><code>a.invoke(i)</code></td>\n    </tr>\n    <tr style=\"background-color: #fafafa;\">\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\">a(i, j) 수를 늘릴 수 있다. (ex. a(1, 2, 3))</td>\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\"><code>a.invoke(i, j)</code></td>\n    </tr>\n    <tr style=\"background-color: #fff;\">\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\">a += b</td>\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\"><code>a.plusAssign(b)</code></td>\n    </tr>\n    <tr style=\"background-color: #fafafa;\">\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\">a -= b</td>\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\"><code>a.minusAssign(b)</code></td>\n    </tr>\n    <tr style=\"background-color: #fff;\">\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\">a *= b</td>\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\"><code>a.timesAssign(b)</code></td>\n    </tr>\n    <tr style=\"background-color: #fafafa;\">\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\">a /= b</td>\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\"><code>a.divAssign(b)</code></td>\n    </tr>\n    <tr style=\"background-color: #fff;\">\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\">a %= b</td>\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\"><code>a.remAssign(b)</code></td>\n    </tr>\n    <tr style=\"background-color: #fafafa;\">\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\">a == b</td>\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\"><code>a?.equals(b) ?: (b === null)</code></td>\n    </tr>\n    <tr style=\"background-color: #fff;\">\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\">a != b</td>\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\"><code>!(a?.equals(b) ?: (b === null))</code></td>\n    </tr>\n    <tr style=\"background-color: #fafafa;\">\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\">a &gt; b</td>\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\"><code>a.compareTo(b) &gt; 0</code></td>\n    </tr>\n    <tr style=\"background-color: #fff;\">\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\">a &lt; b</td>\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\"><code>a.compareTo(b) &lt; 0</code></td>\n    </tr>\n    <tr style=\"background-color: #fafafa;\">\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\">a &gt;= b</td>\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\"><code>a.compareTo(b) &gt;= 0</code></td>\n    </tr>\n    <tr style=\"background-color: #fff;\">\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\">a &lt;= b</td>\n      <td style=\"border: 1px solid #ddd; padding: 10px 16px;\"><code>a.compareTo(b) &lt;= 0</code></td>\n    </tr>\n  </tbody>\n</table>\n<h2>Kotlin DSL 직접 만들어보기</h2>\n<p>이번에는 Kotlin DSL을 직접 만들어 보자. DSL이란 Domain-Specific Language의 약자로 HTML이나 SQL처럼 특정 목적을 위해 존재하는 언어를 말한다. Java, Kotlin, Python처럼 범용 프로그래밍 언어가 아니라 특정 영역에 국한된 목적을 갖고 있는 언어들이다.</p>\n<p>Kotlin DSL의 가장 대표적인 예제로, HTML을 만들어 주는 빌더를 생각할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-kotlin line-numbers\"><code class=\"language-kotlin\"><span class=\"token keyword\">fun</span> <span class=\"token function\">result</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span>\nhtml <span class=\"token punctuation\">{</span>\n    head <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">}</span>\n    body <span class=\"token punctuation\">{</span>\n        title <span class=\"token punctuation\">{</span><span class=\"token operator\">+</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"XML encoding with Kotlin\"</span></span><span class=\"token punctuation\">}</span>\n        h1 <span class=\"token punctuation\">{</span><span class=\"token operator\">+</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"XML encoding with Kotlin\"</span></span><span class=\"token punctuation\">}</span>\n        p <span class=\"token punctuation\">{</span><span class=\"token operator\">+</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"this format can be used as an alternative markup to XML\"</span></span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이번에는 YAML 파일을 Kotlin DSL로 만들어보도록 하자!</p>\n<blockquote>\n<p>YAML은 도커나 스프링 등 다양한 곳에 사용되는 포맷이다.</p>\n</blockquote>\n<p>우리는 아래의 docker-compose 파일을 출력해볼 예제를 만들 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'3'</span>\n<span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">db</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> postgres<span class=\"token punctuation\">:</span><span class=\"token number\">13</span>\n  <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">USER</span><span class=\"token punctuation\">:</span> myuser\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">PASSWORD</span><span class=\"token punctuation\">:</span> mypassword\n  <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> \"9999\"<span class=\"token punctuation\">:</span><span class=\"token string\">\"5432\"</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>우리는 Kotlin DSL을 이용해 이 YAML 파일을 표현해 볼 것이다. DSL을 만드는 데는 정답이 없고, 정말 다양한 방식이 있겠지만 연습하는 차원에서 아래와 같이 만들어보도록 하자.</p>\n<p>우리가 만들 객체는 다음과 같을 것이다. DockerCompose와 Service 클래스가 가장 주축이 되는 객체이다. 이것을 생각해서 스스로 독자분들께서 만들어보고 필자랑 비교해보자. 필자는 아래와 같이 만들었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-kotlin line-numbers\"><code class=\"language-kotlin\"><span class=\"token keyword\">package</span> me<span class=\"token punctuation\">.</span>sungbin<span class=\"token punctuation\">.</span>dsl<span class=\"token punctuation\">.</span>util\n\n<span class=\"token keyword\">import</span> me<span class=\"token punctuation\">.</span>sungbin<span class=\"token punctuation\">.</span>dsl<span class=\"token punctuation\">.</span>Environment\n<span class=\"token keyword\">import</span> kotlin<span class=\"token punctuation\">.</span>properties<span class=\"token punctuation\">.</span>ReadWriteProperty\n<span class=\"token keyword\">import</span> kotlin<span class=\"token punctuation\">.</span>reflect<span class=\"token punctuation\">.</span>KProperty\n\n<span class=\"token keyword\">fun</span> StringBuilder<span class=\"token punctuation\">.</span><span class=\"token function\">appendNew</span><span class=\"token punctuation\">(</span>str<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span> indent<span class=\"token operator\">:</span> String <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"\"</span></span><span class=\"token punctuation\">,</span> times<span class=\"token operator\">:</span> Int <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token operator\">..</span>times<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span> <span class=\"token punctuation\">{</span> _ <span class=\"token operator\">-></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>indent<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"\\n\"</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fun</span> String<span class=\"token punctuation\">.</span><span class=\"token function\">addIndent</span><span class=\"token punctuation\">(</span>ident<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span> times<span class=\"token operator\">:</span> Int <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> String <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">val</span> allIndent <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token operator\">..</span>times<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">joinToString</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> ident <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"\\n\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">joinToString</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"\\n\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$</span><span class=\"token expression\">allIndent</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$</span><span class=\"token expression\">it</span></span><span class=\"token string\">\"</span></span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fun</span> <span class=\"token operator\">&lt;</span>T<span class=\"token operator\">></span> <span class=\"token function\">onceNotNull</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">object</span> <span class=\"token operator\">:</span> ReadWriteProperty<span class=\"token operator\">&lt;</span>Any<span class=\"token operator\">?</span><span class=\"token punctuation\">,</span> T<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> value<span class=\"token operator\">:</span> T<span class=\"token operator\">?</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">getValue</span><span class=\"token punctuation\">(</span>thisRef<span class=\"token operator\">:</span> Any<span class=\"token operator\">?</span><span class=\"token punctuation\">,</span> property<span class=\"token operator\">:</span> KProperty<span class=\"token operator\">&lt;</span><span class=\"token operator\">*</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> T <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">requireNotNull</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string-literal singleline\"><span class=\"token string\">\"변수가 초기화 되지 않았습니다.\"</span></span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value<span class=\"token operator\">!!</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">fun</span> <span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span>thisRef<span class=\"token operator\">:</span> Any<span class=\"token operator\">?</span><span class=\"token punctuation\">,</span> property<span class=\"token operator\">:</span> KProperty<span class=\"token operator\">&lt;</span><span class=\"token operator\">*</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> value<span class=\"token operator\">:</span> T<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string-literal singleline\"><span class=\"token string\">\"이 변수는 한 번만 초기화 할 수 있습니다.\"</span></span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> value\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">operator</span> <span class=\"token keyword\">fun</span> String<span class=\"token punctuation\">.</span><span class=\"token function\">minus</span><span class=\"token punctuation\">(</span>other<span class=\"token operator\">:</span> String<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Environment <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">Environment</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> other<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-kotlin line-numbers\"><code class=\"language-kotlin\"><span class=\"token keyword\">package</span> me<span class=\"token punctuation\">.</span>sungbin<span class=\"token punctuation\">.</span>dsl\n\n<span class=\"token keyword\">import</span> me<span class=\"token punctuation\">.</span>sungbin<span class=\"token punctuation\">.</span>dsl<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>addIndent\n<span class=\"token keyword\">import</span> me<span class=\"token punctuation\">.</span>sungbin<span class=\"token punctuation\">.</span>dsl<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>appendNew\n<span class=\"token keyword\">import</span> me<span class=\"token punctuation\">.</span>sungbin<span class=\"token punctuation\">.</span>dsl<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>onceNotNull\n\n<span class=\"token keyword\">class</span> DockerCompose <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> version<span class=\"token operator\">:</span> Int <span class=\"token keyword\">by</span> <span class=\"token function\">onceNotNull</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> services<span class=\"token operator\">:</span> MutableList<span class=\"token operator\">&lt;</span>Service<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token function\">mutableListOf</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">version</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">init</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> Int<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        version <span class=\"token operator\">=</span> <span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">service</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span> <span class=\"token keyword\">init</span><span class=\"token operator\">:</span> Service<span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> Unit<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>services<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token function\">Service</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">init</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">render</span><span class=\"token punctuation\">(</span>indent<span class=\"token operator\">:</span> String<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> String <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">StringBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendNew</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"version: '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$</span><span class=\"token expression\">version</span></span><span class=\"token string\">'\"</span></span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendNew</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"services:\"</span></span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendNew</span><span class=\"token punctuation\">(</span>\n                services<span class=\"token punctuation\">.</span><span class=\"token function\">joinToString</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"\\n\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    it<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>indent<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">.</span><span class=\"token function\">addIndent</span><span class=\"token punctuation\">(</span>indent<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-kotlin line-numbers\"><code class=\"language-kotlin\"><span class=\"token keyword\">package</span> me<span class=\"token punctuation\">.</span>sungbin<span class=\"token punctuation\">.</span>dsl\n\n<span class=\"token keyword\">import</span> me<span class=\"token punctuation\">.</span>sungbin<span class=\"token punctuation\">.</span>dsl<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>addIndent\n<span class=\"token keyword\">import</span> me<span class=\"token punctuation\">.</span>sungbin<span class=\"token punctuation\">.</span>dsl<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>appendNew\n<span class=\"token keyword\">import</span> me<span class=\"token punctuation\">.</span>sungbin<span class=\"token punctuation\">.</span>dsl<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>onceNotNull\n\n<span class=\"token keyword\">class</span> <span class=\"token function\">Service</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">val</span> name<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> image<span class=\"token operator\">:</span> String <span class=\"token keyword\">by</span> <span class=\"token function\">onceNotNull</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> environments <span class=\"token operator\">=</span> mutableListOf<span class=\"token operator\">&lt;</span>Environment<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> portRules <span class=\"token operator\">=</span> mutableListOf<span class=\"token operator\">&lt;</span>PortRule<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">image</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">init</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> String<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>image <span class=\"token operator\">=</span> <span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">env</span><span class=\"token punctuation\">(</span>environment<span class=\"token operator\">:</span> Environment<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>environments<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>environment<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">port</span><span class=\"token punctuation\">(</span>host<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">,</span> container<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>portRules<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token function\">PortRule</span><span class=\"token punctuation\">(</span>host<span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">render</span><span class=\"token punctuation\">(</span>indent<span class=\"token operator\">:</span> String<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> String <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">StringBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendNew</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$</span><span class=\"token expression\">name</span></span><span class=\"token string\">:\"</span></span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendNew</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"image: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$</span><span class=\"token expression\">image</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">,</span> indent<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendNew</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"environment:\"</span></span><span class=\"token punctuation\">)</span>\n            environments<span class=\"token punctuation\">.</span><span class=\"token function\">joinToString</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"\\n\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"- </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token expression\">it<span class=\"token punctuation\">.</span>key</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token expression\">it<span class=\"token punctuation\">.</span>value</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\"</span></span> <span class=\"token punctuation\">}</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">addIndent</span><span class=\"token punctuation\">(</span>indent<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">also</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendNew</span><span class=\"token punctuation\">(</span>it<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendNew</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"port:\"</span></span><span class=\"token punctuation\">)</span>\n\n            portRules<span class=\"token punctuation\">.</span><span class=\"token function\">joinToString</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"\\n\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"- \\\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token expression\">it<span class=\"token punctuation\">.</span>host</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\\\":\\\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token expression\">it<span class=\"token punctuation\">.</span>container</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\\\"\"</span></span> <span class=\"token punctuation\">}</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">addIndent</span><span class=\"token punctuation\">(</span>indent<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">also</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendNew</span><span class=\"token punctuation\">(</span>it<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-kotlin line-numbers\"><code class=\"language-kotlin\"><span class=\"token keyword\">package</span> me<span class=\"token punctuation\">.</span>sungbin<span class=\"token punctuation\">.</span>dsl\n\n<span class=\"token keyword\">data</span> <span class=\"token keyword\">class</span> <span class=\"token function\">PortRule</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">val</span> host<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">val</span> container<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-kotlin line-numbers\"><code class=\"language-kotlin\"><span class=\"token keyword\">package</span> me<span class=\"token punctuation\">.</span>sungbin<span class=\"token punctuation\">.</span>dsl\n\n<span class=\"token keyword\">data</span> <span class=\"token keyword\">class</span> <span class=\"token function\">Environment</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">val</span> key<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">val</span> value<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-kotlin line-numbers\"><code class=\"language-kotlin\"><span class=\"token keyword\">package</span> me<span class=\"token punctuation\">.</span>sungbin<span class=\"token punctuation\">.</span>dsl\n\n<span class=\"token keyword\">import</span> me<span class=\"token punctuation\">.</span>sungbin<span class=\"token punctuation\">.</span>dsl<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>minus\n\n<span class=\"token keyword\">fun</span> <span class=\"token function\">dockerCompose</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">init</span><span class=\"token operator\">:</span> DockerCompose<span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> Unit<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> DockerCompose <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">val</span> dockerCompose <span class=\"token operator\">=</span> <span class=\"token function\">DockerCompose</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> dockerCompose<span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">init</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fun</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">val</span> yml <span class=\"token operator\">=</span> dockerCompose <span class=\"token punctuation\">{</span>\n        version <span class=\"token punctuation\">{</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">}</span>\n        <span class=\"token function\">service</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"db\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            image <span class=\"token punctuation\">{</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"postgres:13\"</span></span> <span class=\"token punctuation\">}</span>\n            <span class=\"token function\">env</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"USER\"</span></span> <span class=\"token operator\">-</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"myuser\"</span></span><span class=\"token punctuation\">)</span>\n            <span class=\"token function\">env</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"PASSWORD\"</span></span> <span class=\"token operator\">-</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"mypassword\"</span></span><span class=\"token punctuation\">)</span>\n            <span class=\"token function\">port</span><span class=\"token punctuation\">(</span>host <span class=\"token operator\">=</span> <span class=\"token number\">9999</span><span class=\"token punctuation\">,</span> container <span class=\"token operator\">=</span> <span class=\"token number\">5432</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">println</span><span class=\"token punctuation\">(</span>yml<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"  \"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>마지막으로, DSL을 만들 때 한 가지 알아두면 좋은 어노테이션을 살펴보자. 바로 <code>@DslMarker</code>이다. 이 어노테이션을 이해하기 위해서 아래 코드를 살펴보자. 우리가 만든 docker yaml DSL이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-kotlin line-numbers\"><code class=\"language-kotlin\"><span class=\"token keyword\">val</span> yml <span class=\"token operator\">=</span> dockerCompose <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">service</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"db\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">service</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"web\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>위의 코드에는 뭔가 이상한 포인트가 있다. 바로 service안에 service가 들어가져 있다라는 것이다. 코틀린 문법 상으로 <code>dockerCompose</code> 함수의 <code>init</code> 함수 안에서 <code>serivce</code> 함수가 호출되는 것이니 문제가 될 것은 없어 보이지만 DSL 계층 상으로 service 안에서 serivce 함수가 호출되는 것은 매우 어색하다. 이럴 때 <code>@DslMarker</code>를 사용할 수 있다. 이 어노테이션을 붙이면, this의 생략은 가장 가까운 수신 객체에 대해서만 할 수 있게 된다. 즉, 두 번째 service 사용을 막을 수 있는 것이다. <code>@DslMarker</code> 어노테이션을 사용하려면 <code>@DslMarker</code> 어노테이션을 갖고 있는 어노테이션을 새로 만든 다음, 우리 클래스에 붙여줘야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-kotlin line-numbers\"><code class=\"language-kotlin\"><span class=\"token keyword\">package</span> me<span class=\"token punctuation\">.</span>sungbin<span class=\"token punctuation\">.</span>dsl<span class=\"token punctuation\">.</span>annotation\n\n<span class=\"token annotation builtin\">@DslMarker</span>\n<span class=\"token keyword\">annotation</span> <span class=\"token keyword\">class</span> YamlDsl</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-kotlin line-numbers\"><code class=\"language-kotlin\"><span class=\"token keyword\">package</span> me<span class=\"token punctuation\">.</span>sungbin<span class=\"token punctuation\">.</span>dsl\n\n<span class=\"token keyword\">import</span> me<span class=\"token punctuation\">.</span>sungbin<span class=\"token punctuation\">.</span>dsl<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span>YamlDsl\n<span class=\"token keyword\">import</span> me<span class=\"token punctuation\">.</span>sungbin<span class=\"token punctuation\">.</span>dsl<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>addIndent\n<span class=\"token keyword\">import</span> me<span class=\"token punctuation\">.</span>sungbin<span class=\"token punctuation\">.</span>dsl<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>appendNew\n<span class=\"token keyword\">import</span> me<span class=\"token punctuation\">.</span>sungbin<span class=\"token punctuation\">.</span>dsl<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>onceNotNull\n\n<span class=\"token annotation builtin\">@YamlDsl</span>\n<span class=\"token keyword\">class</span> <span class=\"token function\">Service</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">val</span> name<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> image<span class=\"token operator\">:</span> String <span class=\"token keyword\">by</span> <span class=\"token function\">onceNotNull</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> environments <span class=\"token operator\">=</span> mutableListOf<span class=\"token operator\">&lt;</span>Environment<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> portRules <span class=\"token operator\">=</span> mutableListOf<span class=\"token operator\">&lt;</span>PortRule<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">image</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">init</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> String<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>image <span class=\"token operator\">=</span> <span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">env</span><span class=\"token punctuation\">(</span>environment<span class=\"token operator\">:</span> Environment<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>environments<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>environment<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">port</span><span class=\"token punctuation\">(</span>host<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">,</span> container<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>portRules<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token function\">PortRule</span><span class=\"token punctuation\">(</span>host<span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">render</span><span class=\"token punctuation\">(</span>indent<span class=\"token operator\">:</span> String<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> String <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">StringBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendNew</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$</span><span class=\"token expression\">name</span></span><span class=\"token string\">:\"</span></span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendNew</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"image: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$</span><span class=\"token expression\">image</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">,</span> indent<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendNew</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"environment:\"</span></span><span class=\"token punctuation\">)</span>\n            environments<span class=\"token punctuation\">.</span><span class=\"token function\">joinToString</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"\\n\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"- </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token expression\">it<span class=\"token punctuation\">.</span>key</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token expression\">it<span class=\"token punctuation\">.</span>value</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\"</span></span> <span class=\"token punctuation\">}</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">addIndent</span><span class=\"token punctuation\">(</span>indent<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">also</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendNew</span><span class=\"token punctuation\">(</span>it<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendNew</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"port:\"</span></span><span class=\"token punctuation\">)</span>\n\n            portRules<span class=\"token punctuation\">.</span><span class=\"token function\">joinToString</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"\\n\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"- \\\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token expression\">it<span class=\"token punctuation\">.</span>host</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\\\":\\\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token expression\">it<span class=\"token punctuation\">.</span>container</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\\\"\"</span></span> <span class=\"token punctuation\">}</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">addIndent</span><span class=\"token punctuation\">(</span>indent<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">also</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendNew</span><span class=\"token punctuation\">(</span>it<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-kotlin line-numbers\"><code class=\"language-kotlin\"><span class=\"token keyword\">package</span> me<span class=\"token punctuation\">.</span>sungbin<span class=\"token punctuation\">.</span>dsl\n\n<span class=\"token keyword\">import</span> me<span class=\"token punctuation\">.</span>sungbin<span class=\"token punctuation\">.</span>dsl<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span>YamlDsl\n<span class=\"token keyword\">import</span> me<span class=\"token punctuation\">.</span>sungbin<span class=\"token punctuation\">.</span>dsl<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>addIndent\n<span class=\"token keyword\">import</span> me<span class=\"token punctuation\">.</span>sungbin<span class=\"token punctuation\">.</span>dsl<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>appendNew\n<span class=\"token keyword\">import</span> me<span class=\"token punctuation\">.</span>sungbin<span class=\"token punctuation\">.</span>dsl<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>onceNotNull\n\n<span class=\"token annotation builtin\">@YamlDsl</span>\n<span class=\"token keyword\">class</span> DockerCompose <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> version<span class=\"token operator\">:</span> Int <span class=\"token keyword\">by</span> <span class=\"token function\">onceNotNull</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> services<span class=\"token operator\">:</span> MutableList<span class=\"token operator\">&lt;</span>Service<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token function\">mutableListOf</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">version</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">init</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> Int<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        version <span class=\"token operator\">=</span> <span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">service</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">:</span> String<span class=\"token punctuation\">,</span> <span class=\"token keyword\">init</span><span class=\"token operator\">:</span> Service<span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> Unit<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>services<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token function\">Service</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">init</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">render</span><span class=\"token punctuation\">(</span>indent<span class=\"token operator\">:</span> String<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> String <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">StringBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendNew</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"version: '</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$</span><span class=\"token expression\">version</span></span><span class=\"token string\">'\"</span></span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendNew</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"services:\"</span></span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendNew</span><span class=\"token punctuation\">(</span>\n                services<span class=\"token punctuation\">.</span><span class=\"token function\">joinToString</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"\\n\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    it<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>indent<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">.</span><span class=\"token function\">addIndent</span><span class=\"token punctuation\">(</span>indent<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>DSL 활용 사례 살펴보기</h2>\n<p>이번 시간에는 국내 몇몇 기술 블로그의 사례를 통해 Kotlin DSL을 어떻게 활용하고 있는지 간단히 살펴보자!</p>\n<ul>\n<li><a href=\"https://engineering.linecorp.com/ko/blog/kotlinjdsl-jpa-criteria-api-with-kotlin\">기술 블로그 - Kotlin JDSL: Kotlin을 이용해 좀 더 쉽게 JPA Criteria API를 작성해 봅시다</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=-Kdr6qq6uJI\">유튜브 영상 - JPA 맘에 안 들어서 쿼리 라이브러리 만든 썰 | Kotlin JDSL part.1</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=infviM1XMvU\">유튜브 영상 - 자바보다 쉬운 코틀린 쿼리 짜기 | Kotlin JDSL part.2</a></li>\n<li><a href=\"https://toss.tech/article/kotlin-dsl-restdocs\">토스</a></li>\n</ul>\n<p>이렇게 기술 블로그 외에도 우리가 자주 사용하는 gradle에서도 Kotlin DSL을 찾아볼 수 있다. 심지어 Kotlin DSL은 2023년 4월부터 groovy 대신 default 옵션이 되었다. 또한 다양한 프레임워크나 라이브러리에서 더 나은 생산성을 위해 Kotlin DSL을 활용하고 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-kotlin line-numbers\"><code class=\"language-kotlin\"><span class=\"token comment\">// mockk, Kotlin-Style mocking</span>\nevery <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span> returns <span class=\"token number\">3</span>\n\n<span class=\"token comment\">// kotest, Kotlin-Style assert</span>\nresult shouldBe <span class=\"token number\">100</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>","fields":{"slug":"/advanced-kotlin-연산자-오버로딩과-Kotlin-DSL/"},"timeToRead":12,"frontmatter":{"title":"[코틀린 고급] 연산자 오버로딩과 Kotlin DSL","tags":["kotlin"],"date":"2026-02-21T16:49:27.000Z","image":{"publicURL":"/static/619e6175d83cd70c239721219e3cbc91/banner.png"},"series":"코틀린 고급"}}},"pageContext":{"id":"e3699a86-7c9c-5405-b34f-39b9b56ac470"}},
    "staticQueryHashes": ["2580406332","3810308631"]}