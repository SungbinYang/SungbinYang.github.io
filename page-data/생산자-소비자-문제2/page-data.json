{
    "componentChunkName": "component---src-template-post-tsx",
    "path": "/생산자-소비자-문제2/",
    "result": {"data":{"allMarkdownRemark":{"nodes":[{"fields":{"slug":"/코틀린에서-변수와-타입-연산자를-다루는-방법/"},"timeToRead":13,"frontmatter":{"title":"[코틀린] 코틀린에서 변수와 타입, 연산자를 다루는 방법","series":"코틀린"}},{"fields":{"slug":"/컴퓨터-구성-요소/"},"timeToRead":4,"frontmatter":{"title":"[컴퓨터 구조] 컴퓨터 구성 요소","series":"cs"}},{"fields":{"slug":"/컴퓨터-구조-개요/"},"timeToRead":6,"frontmatter":{"title":"[컴퓨터 구조] 컴퓨터 구조 개요","series":"cs"}},{"fields":{"slug":"/aws-강의-소개/"},"timeToRead":3,"frontmatter":{"title":"[AWS] 소개","series":"aws"}},{"fields":{"slug":"/스프링-배치-강좌-소개/"},"timeToRead":1,"frontmatter":{"title":"[스프링 배치] 소개","series":"스프링 배치"}},{"fields":{"slug":"/java-to-kotlin-소개/"},"timeToRead":2,"frontmatter":{"title":"[코틀린] 소개","series":"코틀린"}},{"fields":{"slug":"/알고리즘/"},"timeToRead":5,"frontmatter":{"title":"[알고리즘] 알고리즘","series":"알고리즘"}},{"fields":{"slug":"/자료구조/"},"timeToRead":17,"frontmatter":{"title":"[알고리즘] 자료구조","series":"알고리즘"}},{"fields":{"slug":"/개요/"},"timeToRead":4,"frontmatter":{"title":"[알고리즘] 개요","series":"알고리즘"}},{"fields":{"slug":"/설계-확장하기/"},"timeToRead":11,"frontmatter":{"title":"[오브젝트] 설계 확장하기","series":"오브젝트 - 설계 원칙편"}},{"fields":{"slug":"/새로운-기능-추가하기/"},"timeToRead":18,"frontmatter":{"title":"[오브젝트] 새로운 기능 추가하기","series":"오브젝트 - 설계 원칙편"}},{"fields":{"slug":"/테스트와-의존성/"},"timeToRead":22,"frontmatter":{"title":"[오브젝트] 테스트와 의존성","series":"오브젝트 - 설계 원칙편"}},{"fields":{"slug":"/인터페이스-다듬기/"},"timeToRead":8,"frontmatter":{"title":"[오브젝트] 인터페이스 다듬기","series":"오브젝트 - 설계 원칙편"}},{"fields":{"slug":"/클래스로-나누기/"},"timeToRead":14,"frontmatter":{"title":"[오브젝트] 클래스로 나누기","series":"오브젝트 - 설계 원칙편"}},{"fields":{"slug":"/값-객체와-참조-객체/"},"timeToRead":7,"frontmatter":{"title":"[오브젝트] 값 객체와 참조 객체","series":"오브젝트 - 설계 원칙편"}},{"fields":{"slug":"/메서드-조합하기/"},"timeToRead":6,"frontmatter":{"title":"[오브젝트] 메서드 조합하기","series":"오브젝트 - 설계 원칙편"}},{"fields":{"slug":"/텍스트-어드벤쳐-게임/"},"timeToRead":8,"frontmatter":{"title":"[오브젝트] 텍스트 어드벤쳐 게임","series":"오브젝트 - 설계 원칙편"}},{"fields":{"slug":"/강의-소개/"},"timeToRead":2,"frontmatter":{"title":"[오브젝트] 강의 소개","series":"오브젝트 - 설계 원칙편"}},{"fields":{"slug":"/변경과-설계/"},"timeToRead":16,"frontmatter":{"title":"[오브젝트] 변경과 설계","series":"오브젝트 - 기초편"}},{"fields":{"slug":"/객체지향-구현/"},"timeToRead":7,"frontmatter":{"title":"[오브젝트] 객체지향 구현","series":"오브젝트 - 기초편"}},{"fields":{"slug":"/책임-할당하기/"},"timeToRead":8,"frontmatter":{"title":"[오브젝트] 책임 할당하기","series":"오브젝트 - 기초편"}},{"fields":{"slug":"/객체지향-기본-원칙/"},"timeToRead":4,"frontmatter":{"title":"[오브젝트] 객체지향 기본 원칙","series":"오브젝트 - 기초편"}},{"fields":{"slug":"/절차적인-설계-개선하기/"},"timeToRead":7,"frontmatter":{"title":"[오브젝트] 절차적인 설계 개선하기","series":"오브젝트 - 기초편"}},{"fields":{"slug":"/영화-예매-도메인/"},"timeToRead":2,"frontmatter":{"title":"[오브젝트] 영화 예매 도메인","series":"오브젝트 - 기초편"}},{"fields":{"slug":"/자바18부터-자바21까지/"},"timeToRead":19,"frontmatter":{"title":"[모던 자바] 자바18부터 자바21까지","series":"모던 자바"}},{"fields":{"slug":"/자바12부터-자바17까지/"},"timeToRead":17,"frontmatter":{"title":"[모던 자바] 자바12부터 자바17까지","series":"모던 자바"}},{"fields":{"slug":"/자바9-자바10-자바11/"},"timeToRead":29,"frontmatter":{"title":"[모던 자바] 자바9, 자바10, 자바11","series":"모던 자바"}},{"fields":{"slug":"/함수형-프로그래밍/"},"timeToRead":10,"frontmatter":{"title":"[자바 고급3] 함수형 프로그래밍","series":"자바 고급3"}},{"fields":{"slug":"/병렬-스트림/"},"timeToRead":25,"frontmatter":{"title":"[자바 고급3] 병렬 스트림","series":"자바 고급3"}},{"fields":{"slug":"/디폴트-메서드/"},"timeToRead":6,"frontmatter":{"title":"[자바 고급3] 디폴트 메서드","series":"자바 고급3"}},{"fields":{"slug":"/Optional/"},"timeToRead":17,"frontmatter":{"title":"[자바 고급3] Optional","series":"자바 고급3"}},{"fields":{"slug":"/스트림API3-컬렉터/"},"timeToRead":12,"frontmatter":{"title":"[자바 고급3] 스트림 API3 - 컬렉터","series":"자바 고급3"}},{"fields":{"slug":"/스트림API2-기능/"},"timeToRead":11,"frontmatter":{"title":"[자바 고급3] 스트림 API2 - 기능","series":"자바 고급3"}},{"fields":{"slug":"/스트림API1-기본/"},"timeToRead":10,"frontmatter":{"title":"[자바 고급3] 스트림 API1 - 기본","series":"자바 고급3"}},{"fields":{"slug":"/메서드-참조/"},"timeToRead":11,"frontmatter":{"title":"[자바 고급3] 메서드 참조","series":"자바 고급3"}},{"fields":{"slug":"/람다-vs-익명-클래스/"},"timeToRead":4,"frontmatter":{"title":"[자바 고급3] 람다 vs 익명 클래스","series":"자바 고급3"}},{"fields":{"slug":"/람다-활용/"},"timeToRead":18,"frontmatter":{"title":"[자바 고급3] 람다 활용","series":"자바 고급3"}},{"fields":{"slug":"/함수형-인터페이스/"},"timeToRead":11,"frontmatter":{"title":"[자바 고급3] 함수형 인터페이스","series":"자바 고급3"}},{"fields":{"slug":"/람다/"},"timeToRead":9,"frontmatter":{"title":"[자바 고급3] 람다","series":"자바 고급3"}},{"fields":{"slug":"/람다가-필요한-이유/"},"timeToRead":9,"frontmatter":{"title":"[자바 고급3] 람다가 필요한 이유","series":"자바 고급3"}},{"fields":{"slug":"/HTTP-서버-활용/"},"timeToRead":12,"frontmatter":{"title":"[자바 고급2] HTTP 서버 활용","series":"자바 고급2"}},{"fields":{"slug":"/애노테이션/"},"timeToRead":12,"frontmatter":{"title":"[자바 고급2] 애노테이션","series":"자바 고급2"}},{"fields":{"slug":"/리플렉션/"},"timeToRead":14,"frontmatter":{"title":"[자바 고급2] 리플렉션","series":"자바 고급2"}},{"fields":{"slug":"/HTTP-서버-만들기/"},"timeToRead":25,"frontmatter":{"title":"[자바 고급2] HTTP 서버 만들기","series":"자바 고급2"}},{"fields":{"slug":"/HTTP-기본-이론/"},"timeToRead":5,"frontmatter":{"title":"[자바 고급2] HTTP 기본 이론","series":"자바 고급2"}},{"fields":{"slug":"/채팅-프로그램/"},"timeToRead":21,"frontmatter":{"title":"[자바 고급2] 채팅 프로그램","series":"자바 고급2"}},{"fields":{"slug":"/네트워크-프로그램2/"},"timeToRead":16,"frontmatter":{"title":"[자바 고급2] 네트워크 프로그램2","series":"자바 고급2"}},{"fields":{"slug":"/네트워크-프로그램1/"},"timeToRead":18,"frontmatter":{"title":"[자바 고급2] 네트워크 프로그램1","series":"자바 고급2"}},{"fields":{"slug":"/네트워크-기본-이론/"},"timeToRead":14,"frontmatter":{"title":"[자바 고급2] 네트워크 - 기본 이론","series":"자바 고급2"}},{"fields":{"slug":"/File-Files/"},"timeToRead":8,"frontmatter":{"title":"[자바 고급2] File, Files","series":"자바 고급2"}},{"fields":{"slug":"/IO-활용/"},"timeToRead":9,"frontmatter":{"title":"[자바 고급2] I/O 활용","series":"자바 고급2"}},{"fields":{"slug":"/IO-기본2/"},"timeToRead":6,"frontmatter":{"title":"[자바 고급2] I/O 기본2","series":"자바 고급2"}},{"fields":{"slug":"/IO-기본1/"},"timeToRead":15,"frontmatter":{"title":"[자바 고급2] I/O 기본1","series":"자바 고급2"}},{"fields":{"slug":"/문자-인코딩/"},"timeToRead":10,"frontmatter":{"title":"[자바 고급2] 문자 인코딩","series":"자바 고급2"}},{"fields":{"slug":"/스레드-풀과-Executor-프레임워크2/"},"timeToRead":14,"frontmatter":{"title":"[자바 고급1] 스레드 풀과 Executor 프레임워크2","series":"자바 고급1"}},{"fields":{"slug":"/스레드-풀과-Executor-프레임워크1/"},"timeToRead":20,"frontmatter":{"title":"[자바 고급1] 스레드 풀과 Executor 프레임워크1","series":"자바 고급1"}},{"fields":{"slug":"/동시성-컬렉션/"},"timeToRead":9,"frontmatter":{"title":"[자바 고급1] 동시성 컬렉션","series":"자바 고급1"}},{"fields":{"slug":"/CAS-동기화와-원자적-연산/"},"timeToRead":14,"frontmatter":{"title":"[자바 고급1] CAS - 동기화와 원자적 연산","series":"자바 고급1"}},{"fields":{"slug":"/생산자-소비자-문제2/"},"timeToRead":11,"frontmatter":{"title":"[자바 고급1] 생산자 소비자 문제2","series":"자바 고급1"}},{"fields":{"slug":"/생산자-소비자-문제1/"},"timeToRead":14,"frontmatter":{"title":"[자바 고급1] 생산자 소비자 문제1","series":"자바 고급1"}},{"fields":{"slug":"/고급-동기화-concurrent-Lock/"},"timeToRead":11,"frontmatter":{"title":"[자바 고급1] 고급 동기화 - concurrent.Lock","series":"자바 고급1"}},{"fields":{"slug":"/동기화-synchronized/"},"timeToRead":7,"frontmatter":{"title":"[자바 고급1] 동기화 - synchronized","series":"자바 고급1"}},{"fields":{"slug":"/메모리-가시성/"},"timeToRead":5,"frontmatter":{"title":"[자바 고급1] 메모리 가시성","series":"자바 고급1"}},{"fields":{"slug":"/스레드-제어와-생명주기2/"},"timeToRead":11,"frontmatter":{"title":"[자바 고급1] 스레드 제어와 생명주기2","series":"자바 고급1"}},{"fields":{"slug":"/스레드-제어와-생명주기1/"},"timeToRead":12,"frontmatter":{"title":"[자바 고급1] 스레드 제어와 생명주기1","series":"자바 고급1"}},{"fields":{"slug":"/스레드-생성과-실행/"},"timeToRead":8,"frontmatter":{"title":"[자바 고급1] 스레드 생성과 실행","series":"자바 고급1"}},{"fields":{"slug":"/프로세스와-스레드-소개/"},"timeToRead":9,"frontmatter":{"title":"[자바 고급1] 프로세스와 스레드 소개","series":"자바 고급1"}},{"fields":{"slug":"/컬렉션-프레임워크-순회-정렬-전체-정리/"},"timeToRead":16,"frontmatter":{"title":"[자바 중급2] 컬렉션 프레임워크 - 순회, 정렬, 전체 정리","series":"자바 중급2"}},{"fields":{"slug":"/컬렉션-프레임워크-Map-Stack-Queue/"},"timeToRead":7,"frontmatter":{"title":"[자바 중급2] 컬렉션 프레임워크 - Map, Stack, Queue","series":"자바 중급2"}},{"fields":{"slug":"/컬렉션-프레임워크-Set/"},"timeToRead":6,"frontmatter":{"title":"[자바 중급2] 컬렉션 프레임워크 - Set","series":"자바 중급2"}},{"fields":{"slug":"/컬렉션-프레임워크-HashSet/"},"timeToRead":11,"frontmatter":{"title":"[자바 중급2] 컬렉션 프레임워크 - HashSet","series":"자바 중급2"}},{"fields":{"slug":"/컬렉션-프레임워크-Hash/"},"timeToRead":6,"frontmatter":{"title":"[자바 중급2] 컬렉션 프레임워크 - Hash","series":"자바 중급2"}},{"fields":{"slug":"/컬렉션-프레임워크-List/"},"timeToRead":17,"frontmatter":{"title":"[자바 중급2] 컬렉션 프레임워크 - List","series":"자바 중급2"}},{"fields":{"slug":"/컬렉션-프레임워크-LinkedList/"},"timeToRead":14,"frontmatter":{"title":"[자바 중급2] 컬렉션 프레임워크 - LinkedList","series":"자바 중급2"}},{"fields":{"slug":"/컬렉션-프레임워크-ArrayList/"},"timeToRead":15,"frontmatter":{"title":"[자바 중급2] 컬렉션 프레임워크 - ArrayList","series":"자바 중급2"}},{"fields":{"slug":"/제네릭2/"},"timeToRead":14,"frontmatter":{"title":"[자바 중급2] 제네릭2","series":"자바 중급2"}},{"fields":{"slug":"/제네릭1/"},"timeToRead":9,"frontmatter":{"title":"[자바 중급2] 제네릭1","series":"자바 중급2"}},{"fields":{"slug":"/예외처리2-실습/"},"timeToRead":17,"frontmatter":{"title":"[자바 중급1] 예외처리2 - 실습","series":"자바 중급1"}},{"fields":{"slug":"/예외처리1-이론/"},"timeToRead":12,"frontmatter":{"title":"[자바 중급1] 예외처리1 - 이론","series":"자바 중급1"}},{"fields":{"slug":"/중첩-클래스-내부-클래스2/"},"timeToRead":9,"frontmatter":{"title":"[자바 중급1] 중첩 클래스, 내부 클래스2","series":"자바 중급1"}},{"fields":{"slug":"/중첩-클래스-내부-클래스1/"},"timeToRead":11,"frontmatter":{"title":"[자바 중급1] 중첩 클래스, 내부 클래스1","series":"자바 중급1"}},{"fields":{"slug":"/날짜와-시간/"},"timeToRead":24,"frontmatter":{"title":"[자바 중급1] 날짜와 시간","series":"자바 중급1"}},{"fields":{"slug":"/열거형-enum/"},"timeToRead":7,"frontmatter":{"title":"[자바 중급1] 열거형-enum","series":"자바 중급1"}},{"fields":{"slug":"/래퍼-Class-클래스/"},"timeToRead":11,"frontmatter":{"title":"[자바 중급1] 래퍼, Class 클래스","series":"자바 중급1"}},{"fields":{"slug":"/String-클래스/"},"timeToRead":10,"frontmatter":{"title":"[자바 중급1] String 클래스","series":"자바 중급1"}},{"fields":{"slug":"/불변-객체/"},"timeToRead":7,"frontmatter":{"title":"[자바 중급1] 불변 객체","series":"자바 중급1"}},{"fields":{"slug":"/Object-클래스/"},"timeToRead":10,"frontmatter":{"title":"[자바 중급1] Object 클래스","series":"자바 중급1"}},{"fields":{"slug":"/다형성과-설계/"},"timeToRead":5,"frontmatter":{"title":"[자바 기본] 다형성과 설계","series":"자바 기본"}},{"fields":{"slug":"/다형성2/"},"timeToRead":10,"frontmatter":{"title":"[자바 기본] 다형성2","series":"자바 기본"}},{"fields":{"slug":"/다형성1/"},"timeToRead":8,"frontmatter":{"title":"[자바 기본] 다형성1","series":"자바 기본"}},{"fields":{"slug":"/상속/"},"timeToRead":7,"frontmatter":{"title":"[자바 기본] 상속","series":"자바 기본"}},{"fields":{"slug":"/final/"},"timeToRead":4,"frontmatter":{"title":"[자바 기본] final","series":"자바 기본"}},{"fields":{"slug":"/자바-메모리-구조와-static/"},"timeToRead":10,"frontmatter":{"title":"[자바 기본] 자바 메모리 구조와 static","series":"자바 기본"}},{"fields":{"slug":"/접근-제어자/"},"timeToRead":5,"frontmatter":{"title":"[자바 기본] 접근 제어자","series":"자바 기본"}},{"fields":{"slug":"/패키지/"},"timeToRead":6,"frontmatter":{"title":"[자바 기본] 패키지","series":"자바 기본"}},{"fields":{"slug":"/생성자/"},"timeToRead":6,"frontmatter":{"title":"[자바 기본] 생성자","series":"자바 기본"}},{"fields":{"slug":"/객체-지향-프로그래밍/"},"timeToRead":6,"frontmatter":{"title":"[자바 기본] 객체 지향 프로그래밍","series":"자바 기본"}},{"fields":{"slug":"/기본형과-참조형/"},"timeToRead":8,"frontmatter":{"title":"[자바 기본] 기본형과 참조형","series":"자바 기본"}},{"fields":{"slug":"/클래스와-데이터/"},"timeToRead":6,"frontmatter":{"title":"[자바 기본] 클래스와 데이터","series":"자바 기본"}},{"fields":{"slug":"/99클럽-day10/"},"timeToRead":2,"frontmatter":{"title":"[99클럽] 면접반 10일차","series":"면접"}},{"fields":{"slug":"/99클럽-day9/"},"timeToRead":1,"frontmatter":{"title":"[99클럽] 면접반 9일차","series":"면접"}},{"fields":{"slug":"/메서드/"},"timeToRead":8,"frontmatter":{"title":"[자바 입문] 메서드","series":"자바 입문"}},{"fields":{"slug":"/배열/"},"timeToRead":7,"frontmatter":{"title":"[자바 입문] 배열","series":"자바 입문"}},{"fields":{"slug":"/훈련/"},"timeToRead":3,"frontmatter":{"title":"[자바 입문] 훈련","series":"자바 입문"}},{"fields":{"slug":"/스코프-형변환/"},"timeToRead":5,"frontmatter":{"title":"[자바 입문] 스코프, 형변환","series":"자바 입문"}},{"fields":{"slug":"/반복문/"},"timeToRead":6,"frontmatter":{"title":"[자바 입문] 반복문","series":"자바 입문"}},{"fields":{"slug":"/조건문/"},"timeToRead":7,"frontmatter":{"title":"[자바 입문] 조건문","series":"자바 입문"}},{"fields":{"slug":"/99클럽-day8/"},"timeToRead":1,"frontmatter":{"title":"[99클럽] 면접반 8일차","series":"면접"}},{"fields":{"slug":"/책-관리-예제-백엔드-개발/"},"timeToRead":6,"frontmatter":{"title":"[스프링 입문] 책 관리 예제 - 백엔드 개발","series":"스프링"}},{"fields":{"slug":"/연산자/"},"timeToRead":6,"frontmatter":{"title":"[자바 입문] 연산자","series":"자바 입문"}},{"fields":{"slug":"/99클럽-day7/"},"timeToRead":1,"frontmatter":{"title":"[99클럽] 면접반 7일차","series":"면접"}},{"fields":{"slug":"/변수/"},"timeToRead":8,"frontmatter":{"title":"[자바 입문] 변수","series":"자바 입문"}},{"fields":{"slug":"/99클럽-day6/"},"timeToRead":1,"frontmatter":{"title":"[99클럽] 면접반 6일차","series":"면접"}},{"fields":{"slug":"/스프링-웹-개발-기초/"},"timeToRead":2,"frontmatter":{"title":"[스프링 입문] 스프링 웹 개발 기초","series":"스프링"}},{"fields":{"slug":"/프로젝트-환경설정/"},"timeToRead":5,"frontmatter":{"title":"[스프링 입문] 프로젝트 환경 설정","series":"스프링"}},{"fields":{"slug":"/Hello-World/"},"timeToRead":6,"frontmatter":{"title":"[자바 입문] Hello World","series":"자바 입문"}},{"fields":{"slug":"/99클럽-day5/"},"timeToRead":2,"frontmatter":{"title":"[99클럽] 면접반 5일차","series":"면접"}},{"fields":{"slug":"/99클럽-day4/"},"timeToRead":1,"frontmatter":{"title":"[99클럽] 면접반 4일차","series":"면접"}},{"fields":{"slug":"/Multi-Modules-프로젝트/"},"timeToRead":12,"frontmatter":{"title":"[Gradle] Multi Modules 프로젝트","series":"gradle"}},{"fields":{"slug":"/99클럽-day3/"},"timeToRead":3,"frontmatter":{"title":"[99클럽] 면접반 3일차","series":"면접"}},{"fields":{"slug":"/Core-Type에-대한-이해/"},"timeToRead":7,"frontmatter":{"title":"[Gradle] Core Type에 대한 이해","series":"gradle"}},{"fields":{"slug":"/99클럽-day2/"},"timeToRead":2,"frontmatter":{"title":"[99클럽] 면접반 2일차","series":"면접"}},{"fields":{"slug":"/Groovy-언어의-기본/"},"timeToRead":8,"frontmatter":{"title":"[Gradle] Groovy 언어의 기본","series":"gradle"}},{"fields":{"slug":"/99클럽-day1/"},"timeToRead":6,"frontmatter":{"title":"[99클럽] 면접반 1일차","series":"면접"}},{"fields":{"slug":"/Gradle-기본/"},"timeToRead":9,"frontmatter":{"title":"[Gradle] Gradle 기본","series":"gradle"}},{"fields":{"slug":"/중요한-것은-포기하지-않는-마음/"},"timeToRead":3,"frontmatter":{"title":"2025년 1분기 회고(feat. 중요한 것은 포기하지 않는 마음)","series":"일상 이야기"}},{"fields":{"slug":"/Gradle-Introduction/"},"timeToRead":4,"frontmatter":{"title":"[Gradle] Introduction","series":"gradle"}},{"fields":{"slug":"/IntelliJ-플러그인/"},"timeToRead":2,"frontmatter":{"title":"[IntelliJ IDEA] 플러그인","series":"인텔리제이"}},{"fields":{"slug":"/IntelliJ-Git-Github/"},"timeToRead":3,"frontmatter":{"title":"[IntelliJ IDEA] Git & Github","series":"인텔리제이"}},{"fields":{"slug":"/IntelliJ-디버깅/"},"timeToRead":3,"frontmatter":{"title":"[IntelliJ IDEA] 디버깅","series":"인텔리제이"}},{"fields":{"slug":"/IntelliJ-리팩토링/"},"timeToRead":2,"frontmatter":{"title":"[IntelliJ IDEA] 리팩토링","series":"인텔리제이"}},{"fields":{"slug":"/IntelliJ-자동완성/"},"timeToRead":2,"frontmatter":{"title":"[IntelliJ IDEA] 자동완성","series":"인텔리제이"}},{"fields":{"slug":"/IntelliJ-검색/"},"timeToRead":2,"frontmatter":{"title":"[IntelliJ IDEA] 검색","series":"인텔리제이"}},{"fields":{"slug":"/IntelliJ-포커스/"},"timeToRead":2,"frontmatter":{"title":"[IntelliJ IDEA] 포커스","series":"인텔리제이"}},{"fields":{"slug":"/IntelliJ-코드-Edit/"},"timeToRead":4,"frontmatter":{"title":"[IntelliJ IDEA] 코드 Edit","series":"인텔리제이"}},{"fields":{"slug":"/IntelliJ-소개/"},"timeToRead":2,"frontmatter":{"title":"[IntelliJ IDEA] 소개","series":"인텔리제이"}},{"fields":{"slug":"/2024년-주니어-개발자-회고록/"},"timeToRead":3,"frontmatter":{"title":"2024년 주니어 개발자 회고록","series":"일상 이야기"}},{"fields":{"slug":"/WDD/"},"timeToRead":1,"frontmatter":{"title":"WDD(Why-Driven-Development)","series":"생각정리"}},{"fields":{"slug":"/내가-개발자-커리어를-시작한-이유/"},"timeToRead":4,"frontmatter":{"title":"내가 개발자 커리어를 시작한 이유","series":"일상"}},{"fields":{"slug":"/블로그-이관-및-회고/"},"timeToRead":3,"frontmatter":{"title":"블로그 이관 및 회고","series":"일상 이야기"}},{"fields":{"slug":"/Spring-Boot-3.2.x-더-이상-바이트코드를-구문-분석하여-매개변수-이름을-추론하려고-시도하지-않습니다/"},"timeToRead":3,"frontmatter":{"title":"Spring Boot 3.2.x 더 이상 바이트코드를 구문 분석하여 매개변수 이름을 추론하려고 시도하지 않습니다.","series":"트러블 슈팅"}},{"fields":{"slug":"/라떼-개발자/"},"timeToRead":2,"frontmatter":{"title":"라떼 개발자","series":"생각정리"}},{"fields":{"slug":"/2023년-주니어-개발자-회고록/"},"timeToRead":5,"frontmatter":{"title":"2023년 주니어 개발자 회고록","series":"일상 이야기"}}],"group":[{"fieldValue":"aws","totalCount":1},{"fieldValue":"cs","totalCount":2},{"fieldValue":"gradle","totalCount":5},{"fieldValue":"면접","totalCount":10},{"fieldValue":"모던 자바","totalCount":3},{"fieldValue":"생각정리","totalCount":2},{"fieldValue":"스프링","totalCount":3},{"fieldValue":"스프링 배치","totalCount":1},{"fieldValue":"알고리즘","totalCount":3},{"fieldValue":"오브젝트 - 기초편","totalCount":6},{"fieldValue":"오브젝트 - 설계 원칙편","totalCount":9},{"fieldValue":"인텔리제이","totalCount":9},{"fieldValue":"일상","totalCount":1},{"fieldValue":"일상 이야기","totalCount":4},{"fieldValue":"자바 고급1","totalCount":13},{"fieldValue":"자바 고급2","totalCount":14},{"fieldValue":"자바 고급3","totalCount":13},{"fieldValue":"자바 기본","totalCount":12},{"fieldValue":"자바 입문","totalCount":9},{"fieldValue":"자바 중급1","totalCount":10},{"fieldValue":"자바 중급2","totalCount":10},{"fieldValue":"코틀린","totalCount":2},{"fieldValue":"트러블 슈팅","totalCount":1}]},"markdownRemark":{"id":"7e1a235e-71c1-5171-a01f-46a3816ac2b8","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAAApUlEQVQoz6WRPQvCQAyG+///R6GKm6AndhIcrNaiXVzEaqVaPym9Xs67XuIgiEvFw2whPDxJXof+KOf7uD4cUWtLGJGIHpMA2PDdWpgBqRyNOfMVkTHmV/ilSW7QjfPF+hRnpVC1hVkb3Nxla54NVpczVw1bN8Co9TbJw7QIdsX+Wtk9DHklXU+3O6bXl66HIG1gIQTzIVrCNJSzCJWyzLnp0A/4CfW+SjF6WKSqAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"배너 이미지\"\n        title=\"배너 이미지\"\n        src=\"/static/3189e9c0404650ccc6c5ffc998bc8717/2bef9/banner.png\"\n        srcset=\"/static/3189e9c0404650ccc6c5ffc998bc8717/6f3f2/banner.png 256w,\n/static/3189e9c0404650ccc6c5ffc998bc8717/01e7c/banner.png 512w,\n/static/3189e9c0404650ccc6c5ffc998bc8717/2bef9/banner.png 1024w,\n/static/3189e9c0404650ccc6c5ffc998bc8717/71c1d/banner.png 1536w,\n/static/3189e9c0404650ccc6c5ffc998bc8717/e8950/banner.png 2000w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>해당 블로그 글은 <a href=\"https://inf.run/6oSgn\">영한님의 인프런 강의</a>를 바탕으로 쓰여진 글입니다.</p>\n</blockquote>\n<h2>Lock Condition - 예제4</h2>\n<p>생산자가 생산자를 깨우고, 소비자가 소비자를 깨우는 비효율 문제를 어떻게 해결할 수 있을까?</p>\n<p>핵심은 생산자 스레드는 데이터를 생성하고, 대기중인 소비자 스레드에게 알려주어야 한다. 반대로 소비자 스레드는 데이터를 소비하고, 대기중인 생산자 스레드에게 알려주면 된다. 결국 생산자 스레드가 대기하는 대기 집합과, 소비자 스레드가 대기하는 대기 집합을 둘로 나누면 된다. 그리고 생산자 스레드가 데이터를 생산하면 소비자 스레드가 대기하는 대기 집합에만 알려주고, 소비자 스레드가 데이터를 소비하면 생산자 스레드가 대기하는 대기 집합에만 열려주면 되는것이다. 이렇게 생산자용, 소비자용 대기 집합을 서로 나누어 분리하면 비효율 문제를 깔끔하게 해결할 수 있다. 그럼 대기 집합을 어떻게 분리할 수 있을까? 바로 앞서 학습한 <code>Lock</code>,<code>ReentrantLock</code>을 사용하면 된다.</p>\n<p>그럼 기존 코드를 <code>Lock</code> 인터페이스와 <code>ReetrantLock</code>을 이용하여 변경해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">thread<span class=\"token punctuation\">.</span>bounded</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ArrayDeque</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Queue</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>concurrent<span class=\"token punctuation\">.</span>locks<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Condition</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>concurrent<span class=\"token punctuation\">.</span>locks<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Lock</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>concurrent<span class=\"token punctuation\">.</span>locks<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ReentrantLock</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">static</span> <span class=\"token import static\"><span class=\"token namespace\">util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">MyLogger</span><span class=\"token punctuation\">.</span><span class=\"token static\">log</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BoundedQueueV4</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">BoundedQueue</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Lock</span> lock <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ReentrantLock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Condition</span> condition <span class=\"token operator\">=</span> lock<span class=\"token punctuation\">.</span><span class=\"token function\">newCondition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Queue</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> queue <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayDeque</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> max<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">BoundedQueueV4</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> max<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>max <span class=\"token operator\">=</span> max<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        lock<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>queue<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> max<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[put] 큐가 가득 참, 생산자 대기\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n                <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n                    condition<span class=\"token punctuation\">.</span><span class=\"token function\">await</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[put] 생산자 깨어남\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RuntimeException</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n\n            queue<span class=\"token punctuation\">.</span><span class=\"token function\">offer</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[put] 생산자 데이터 저장, signal() 호출\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            condition<span class=\"token punctuation\">.</span><span class=\"token function\">signal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">{</span>\n            lock<span class=\"token punctuation\">.</span><span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">take</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        lock<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>queue<span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[take] 큐에 데이터가 없음, 소비자 대기\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n                <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n                    condition<span class=\"token punctuation\">.</span><span class=\"token function\">await</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[take] 소비자 깨어남\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RuntimeException</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token class-name\">String</span> data <span class=\"token operator\">=</span> queue<span class=\"token punctuation\">.</span><span class=\"token function\">poll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[take] 소비자 데이터 획득, signal() 호출\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            condition<span class=\"token punctuation\">.</span><span class=\"token function\">signal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">return</span> data<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">{</span>\n            lock<span class=\"token punctuation\">.</span><span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> queue<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code>Condition</code>은 <code>ReentrantLock</code>을 사용하는 스레드가 대기하는 스레드 대기 공간이다. <code>lock.newCondition()</code> 메서드를 호출하면 스레드 대기 공간이 만들어진다. <code>Lock(ReentrantLock)</code>의 스레드 대기 공간은 이렇게 만들 수 있다.</p>\n<blockquote>\n<p>✅ 참고</p>\n<p><code>Object.wait()</code> 에서 사용한 스레드 대기 공간은 모든 객체 인스턴스가 내부에 기본으로 가지고 있다.</p>\n</blockquote>\n<p>반면에 <code>Lock(ReentrantLock)</code>을 사용하는 경우 이렇게 스레드 대기 공간을 직접 만들어서 사용해야 한다.</p>\n<p><code>condition.await()</code>은 <code>Object.wait()</code>와 유사한 기능이다. 해당 스레드를 대기상태로 변경하고 <code>condition</code>에 보관한다. <code>condition.signal()</code>은 <code>Object.notify()</code>와 유사한 기능이다. <code>condition</code>에 대기하고 있는 스레드를 랜덤해서 깨우고 <code>BLOCKED</code> 상태로 만든다.</p>\n<h2>생산자 소비자 대기 공간 분리 - 예제5 코드</h2>\n<p>스레드 대기 공간을 생산자용 스레드 대기 공간과 소비자용 스레드 대기 공간을 분리하여 진행하고 생산자 스레드는 소비자 스레드 대기 공간에서 깨우고 소바자 스레드는 생산자 대기 공간에서 깨우면 위의 문제를 깔끔히 해결이 가능하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">thread<span class=\"token punctuation\">.</span>bounded</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ArrayDeque</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Queue</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>concurrent<span class=\"token punctuation\">.</span>locks<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Condition</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>concurrent<span class=\"token punctuation\">.</span>locks<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Lock</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>concurrent<span class=\"token punctuation\">.</span>locks<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ReentrantLock</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">static</span> <span class=\"token import static\"><span class=\"token namespace\">util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">MyLogger</span><span class=\"token punctuation\">.</span><span class=\"token static\">log</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BoundedQueueV5</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">BoundedQueue</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Lock</span> lock <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ReentrantLock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Condition</span> producerCond <span class=\"token operator\">=</span> lock<span class=\"token punctuation\">.</span><span class=\"token function\">newCondition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Condition</span> consumerCond <span class=\"token operator\">=</span> lock<span class=\"token punctuation\">.</span><span class=\"token function\">newCondition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Queue</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> queue <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayDeque</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> max<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">BoundedQueueV5</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> max<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>max <span class=\"token operator\">=</span> max<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        lock<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>queue<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> max<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[put] 큐가 가득 참, 생산자 대기\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n                <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n                    producerCond<span class=\"token punctuation\">.</span><span class=\"token function\">await</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[put] 생산자 깨어남\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RuntimeException</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n\n            queue<span class=\"token punctuation\">.</span><span class=\"token function\">offer</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[put] 생산자 데이터 저장, consumerCond.signal() 호출\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            consumerCond<span class=\"token punctuation\">.</span><span class=\"token function\">signal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">{</span>\n            lock<span class=\"token punctuation\">.</span><span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">take</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        lock<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>queue<span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[take] 큐에 데이터가 없음, 소비자 대기\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n                <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n                    consumerCond<span class=\"token punctuation\">.</span><span class=\"token function\">await</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[take] 소비자 깨어남\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RuntimeException</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token class-name\">String</span> data <span class=\"token operator\">=</span> queue<span class=\"token punctuation\">.</span><span class=\"token function\">poll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[take] 소비자 데이터 획득, producerCond.signal() 호출\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            producerCond<span class=\"token punctuation\">.</span><span class=\"token function\">signal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">return</span> data<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">{</span>\n            lock<span class=\"token punctuation\">.</span><span class=\"token function\">unlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> queue<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>여기서 핵심은 생산자는 소비자를 깨우고, 소비자는 생산자를 깨운다는 점이다. 소비자가 소비자를 깨운다거나, 생산자가 생산자를 깨우지 않기 때문에 비효율적으로 실행되는 부분이 제거되고 아주 깔끔하게 작업이 실행된다.</p>\n<h2>생산자 소비자 대기 공간 분리 - 예제5 분석</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 78.515625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB40lEQVQ4y41UybLaMBDkB4K1L5axZQNJmXDhxP9/Wb/qCXLBg6Ry6LJHmmnN0tLOOYf/hSe8F7hv/w27tpBSQp8z0hP6UjbQDjEihICcM2KMsNa+HbprZHTQxsAZA28MrFLIMWKpFfM0IXmP67rifr8Lcd/3Asa1TImNkN+sFCalMGiNg7WYvMcxJdQQMDbbewStkfse8zyjlIJhGF4zjCkhOIdRKSit4Z/K4mEEbZarug6L99IeEnGP6y+ELIENLw9COtBxWRbUWoVYCL2X/ck5/DqfcbvdxJe9bLPYsQ/jOKL0PSZrse+6zSE+hvAM7o/G4LKuuF6vWx+3DHnycDig5CyOLJdZ8ZDw9L+uKy6XiwT/LEUG1jJvMxDC+JhYilEyZPD5dBIiErLphMiF/cwZC8m4NwzblDdClicpW4vZexg2fBgQeGoI6LSGY0AIsq6tRWUw41J60+KLbKqzmGLEwTlMIQiKMajMntIJAccYZc1SZo+4lwwbIR0o5sJpO4feWiRj8Pt0Ejsohai1QCn1R7c5fyZszdVa48d+j47yMUZuDmWiH/8NLLPp8u3qNXZuHo9HkcJcq5TTrhdFTJCE9t/ItgwbKR055fSh2S+vzrcX5o2wgSSGD8Q/gj49Wc+EXw12lIVS8WDSAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image1\"\n        title=\"image1\"\n        src=\"/static/954576ab3ad9f724aa171c5ee0e9e15a/2bef9/01.png\"\n        srcset=\"/static/954576ab3ad9f724aa171c5ee0e9e15a/6f3f2/01.png 256w,\n/static/954576ab3ad9f724aa171c5ee0e9e15a/01e7c/01.png 512w,\n/static/954576ab3ad9f724aa171c5ee0e9e15a/2bef9/01.png 1024w,\n/static/954576ab3ad9f724aa171c5ee0e9e15a/bb543/01.png 1418w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>지금 p1, p2, p3가 생산자 대기 공간에 c1, c2, c3가 소비자 대기 공간에 대기상태에 있다. 이때 p0가 락을 획득해서 임계영역에 접근하여 큐에 데이터를 넣은 후에는 소비자 대기 공간에 <code>signal</code>을 통해 스레드를 깨운다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74.21875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB1UlEQVQ4y31U224qMQzkC0ruca5LlgpBC33g//9tKhsWwWFPHyyvHGfsGTu78d7DObdq1trV+F93Ns+HIQRQjKBIN083z/EY44txMTa+/4yxWQKclFKCCwE2hJt3Dq137OYZtTVQSogpIeWMw+GAUsoDcLFHhwymjEHcblE/PkBKoSiFQYRDKZi8RzUG3RiMWnG+XAQ05/wAfqEciRC1xuCLKWFXK0Zr6DnL9+duh8M8I8eIwfIYg1yKNCLMnikH74UGOScAuTVM04TdGLj8/Ajdr+9vXK9XaAZTSooHorfBbVg7bpur9RgxsX73InzGdJZBcCeG5VEKLQSUWiXGw3sBrLWK+BOLrpR0u2d6XChnjDGw3+9xOp2QSgFpjU50Y8V+jbJMzxg079GZ7jShtYbKnfeOnBKm3gWEc7Jztw6JZK3e9pABpXIIohNLYL2HsRbaWgSWphQ5Y1mYSXyi+raHvGNea8zeYybCnJL4ai26tRgxojmHOQSZstFaqP65h1prGN5FY+CNgWPxc8bcGux2KzEuqpWS3EW7t5cilO+T5ETFwNaK8cTZlqdm7298yf8v4AJ6PB5xPp9lXZYJLj4tPqWXQay+5edOaUXstb/Nv/qxhr/CDnx5YhfpnQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image2\"\n        title=\"image2\"\n        src=\"/static/e5a794e89bba530b590d3c24a3eb8ac1/2bef9/02.png\"\n        srcset=\"/static/e5a794e89bba530b590d3c24a3eb8ac1/6f3f2/02.png 256w,\n/static/e5a794e89bba530b590d3c24a3eb8ac1/01e7c/02.png 512w,\n/static/e5a794e89bba530b590d3c24a3eb8ac1/2bef9/02.png 1024w,\n/static/e5a794e89bba530b590d3c24a3eb8ac1/0d390/02.png 1472w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>반대로 c0가 온다면 생산자 대기 공간에 <code>signal</code>을 통해 스레드를 깨울 것이다.</p>\n<h3>Object.notify() vs Condition.signal()</h3>\n<ul>\n<li>Object.notify()\n<ul>\n<li>대기 중인 스레드 중 임의의 하나를 선택해서 깨운다. 스레드가 깨어나는 순서는 정의되어 있지 않으며, JVM 구현에 따라 다르다. 보통은 먼저 들어온 스레드가 먼저 수행되지만 구현에 따라 다를 수 있다.</li>\n<li><code>synchronized</code> 블록 내에서 모니터 락을 가지고 있는 스레드가 호출해야 한다.</li>\n</ul>\n</li>\n<li>Condition.signal()\n<ul>\n<li>대기 중인 스레드 중 하나를 깨우며, 일반적으로는 FIFO 순서로 깨운다. 이 부분은 자바 버전과 구현에 따라 달라질 수 있지만, 보통 <code>Condition</code>의 구현은 <code>Queue</code> 구조를 사용하기 때문에 FIFO 순서로 깨운다.</li>\n<li><code>ReentrantLock</code>을 가지고 있는 스레드가 호출해야 한다.</li>\n</ul>\n</li>\n</ul>\n<h2>스레드의 대기</h2>\n<p><code>synchronized</code>,<code>ReentrantLock</code>의 대기 상태에 대해 정리해 보자. 먼저 <code>synchronized</code>의 대기 상태를 정리해보자. <code>synchronized</code>를 잘 생각해보면 2가지 단계의 대기 상태가 존재한다.</p>\n<ul>\n<li>락 획득 대기\n<ul>\n<li><code>BLOCKED</code> 상태로 락 획득 대기</li>\n<li><code>synchronized</code>를 시작할 때 락이 없으면 대기</li>\n<li>다른 스레드가 <code>synchronized</code>를 빠져나갈 때 대기가 풀리며 락 획득 시도</li>\n</ul>\n</li>\n<li>wait() 대기\n<ul>\n<li><code>WAITING</code> 상태로 대기</li>\n<li><code>wait()</code>를 호출 했을 때 스레드 대기 집합에서 대기</li>\n<li>다른 스레드가 <code>notify()</code> 를 호출 했을 때 빠져나감</li>\n</ul>\n</li>\n</ul>\n<p>사실 <code>synchronized</code>에서는 <code>BLOCKED</code> 상태의 스레드들이 있는 락 대기 집합이라는 것이 별도로 존재한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 88.28125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAACbUlEQVQ4y3VUSXLjMAz0BzLiIu4UtdiOUzWHyTWpXOb/j+qphiRHStUcYFIE2AYaDV6cczia936zICvPYi7wITx94bDv+369u60XHtB8iMg5I8aIECNiSnIxpYTamvgIEGM6+WLK6J3DinMApJOrUgpaazHu+a/TOGKeZ1hr8fLycophAsdML/uGGTDAGLOa1hLE82maMLaGZVnw+fmJUgq6rpN4T0piPAPKxVoFSBsDZQw6rWGdQyoFr48HxnlG7z1yKYg5w3kvmZJbUtBb+wMwFwHrtcagNapSqFpj7Hv5btaKpV+/UFSH5NzKNTkP4T8lG4OmFAJLMQYlBGRmta/eyxl9tevgtEapFbUU4fecYUrCSdMKivxRQiFIFiyTF7nnJUNwglorvqHWM2CICXWc5LBt3RP9hYDWmjTldrthGAZpAsHnWpE3jZY2wrk1sQs5qHXAPC8incW5p1yOAt5FzkoIWFLCdZ4kwzoMcpfxF/6QP/JA8Mnap8b2qaAGKRnuGcPO/77f8bYs0uFS8lPsl33c6sYDm0INWmNwv93WrJcF1+tVzln+x8cH/n59YW5NuGZCbpuW76aUujVFrxqkXMZRsuHolWEQ/fkYcX088DqOKNai96sOT03ZZcPujtShUqK9W4x4UNg5i73VimsI4mOMo8l8HyZlTzXntE4KO7wJnKtVCrd5xjQMsucZ9cfyO2qW0vopbJHO9npoCdQicpZhWAqHn/rbvkkHfZRQyhk7xolD54P8w/1+x5/3d9xfX9eOpoQ8NLmY9u9S1qeLpco76r8Bn4/rIVPyuZexluJPWbjDfvX3zwf6H6qayFOYz5U1AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image3\"\n        title=\"image3\"\n        src=\"/static/ee69d5909b69b074101e9b5dc52bca7e/2bef9/03.png\"\n        srcset=\"/static/ee69d5909b69b074101e9b5dc52bca7e/6f3f2/03.png 256w,\n/static/ee69d5909b69b074101e9b5dc52bca7e/01e7c/03.png 512w,\n/static/ee69d5909b69b074101e9b5dc52bca7e/2bef9/03.png 1024w,\n/static/ee69d5909b69b074101e9b5dc52bca7e/37048/03.png 1352w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>스레드가 락을 획득을 이미 한 상태에서 다른 스레드가 임계영역에 접근하려고 하면 락이 없어서 <code>BLOCKED</code> 상태가 된다. 그러면 해당 스레드는 락 대기 집합이라는 곳에 저장된다. 그리고 락을 반납하면 해당 스레드는 락 대기 집합에 나와서 락을 획득 후 임계영역에 진입한다. 만약 이 스레드가 소비자 스레드라면 큐에 데이터를 꺼내야 하는데 만약 데이터가 없다면 스레드 대기 집합에 <code>WAITING</code> 상태로 저장된다. 즉, 1차 대기소가 락 대기집합이고 2차 대기소가 스레드 대기 집합으로 보면 좋을 것 같다. 그리고 <code>notify()</code>로 깨어나면 다시 1차 대기소인 락 대기 집합으로 가서 <code>BLOCKED</code>상태로 가다가 락이 반납되면 다시 획득하여 임계영역에 들어가 작업을 수행하는 것이다.</p>\n<p>자바의 모든 객체 인스턴스는 멀티스레드와 임계 영역을 다루기 위해 내부에 3가지 기본 요소를 가진다.</p>\n<ul>\n<li>모니터 락</li>\n<li>락 대기 집합</li>\n<li>스레드 대기 집합</li>\n</ul>\n<p><code>synchronized</code>를 사용한 임계 영역에 들어가려면 모니터 락이 필요하다. 모니터 락이 없으면 락 대기 집합에 들어가서 <code>BLOCKED</code> 상태로 락을 기다린다. 모니터 락을 반납하면 락 대기 잡합에 있는 스레드 중 하나가 락을 획득하고 <code>BLOCKED -> RUNNABLE</code> 상태가 된다. <code>wait()</code>를 호출해서 스레드 대기 집합에 들어가기 위해서는 모니터 락이 필요하다. 스레드 대기 집합에 들어가면 모니터 락을 반납한다. 스레드가 <code>notify()</code>를 호출하면 스레드 대기 집합에 있는 스레드 중 하나가 스레드 대기 집합을 빠져나온다. 그리고 모니터 락 획득을 시도한다. 이런 과정을 잘 기억해두자!</p>\n<p><code>ReetrantLock</code>도 <code>synchronized</code>와 유사하게 작동한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 86.71875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAAB+0lEQVQ4y42UW47bMAxFZwfR09bDlmQnmdTIRwcYzP6XdovLRoYTtJ1+EJJl8VCXpPTmnMPRxnH81kIIMr760t76xHuPGKNsHIYBpRSxnDPmeZZ5rVXmBHb7K5AwQk+nE6w1AuBaSklGghiIe4wxso9Arj0BuYET/rTWQmsNbS3asqC2hpmnqhXX93eU1nDbNvz8+BBwV3NUuQMjgc7BaI2oFJK1u+U+OocWAi61wnm/p6On6gkYKJkn0xrFe8zeY4kRdRwFUkNAGQZMziFrjdk7pJwx0aZJoHsOKVUiWCuAkLPInUrB+XoVqevlgs+vL8ytyb6sFNwwiGT6P+WQMEn+OGJ5VI+Rc0q4Xi5yAv7/cbshpgR7OmHSWlQd5QqQC8xfqRUTJbIwxsiGXlXCCG21ikynFBpPF4L8o+1AOkl78EQxSmTCt23DsiwC4ryxwrcb1vMZeRxRWMhHoN5yT30oRTEGC1MQI4pUL4l8tlJ3YHUTi6O15HB87cMdGIIAGx3pFCMGyvYeSik5BdtEKsscd+DLFXwCGmsxG4N1GLA493v0Hhvz5xwKA7ITrIVXCv5R5T/elP3qKSUSeb04siXYvPrx3U3xAlDFA0hfaezXx6FXLR4eADodHwSatMu/Hofe4Ou64n6/S7743SN3O57m2+frCH7d+L/AX04Br7lHNvhTAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image4\"\n        title=\"image4\"\n        src=\"/static/25e1f52b1b94703cb81fabd546079b25/2bef9/04.png\"\n        srcset=\"/static/25e1f52b1b94703cb81fabd546079b25/6f3f2/04.png 256w,\n/static/25e1f52b1b94703cb81fabd546079b25/01e7c/04.png 512w,\n/static/25e1f52b1b94703cb81fabd546079b25/2bef9/04.png 1024w,\n/static/25e1f52b1b94703cb81fabd546079b25/52576/04.png 1412w\"\n        sizes=\"(max-width: 1024px) 100vw, 1024px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><code>ReetrantLock</code>은 그 내부 안에 대기큐가 존재하여 대기 큐에서 관리를 한다. 다만 <code>synchronized</code>와 차이점은 스레드 상태가 <code>BLOCKED</code> 상태가 아니라 <code>WAITING</code> 상태인것이다. 즉, <code>lock.lock()</code>을 호출 했을 때 락이 없으면 대기를 하는 것이다. 그리고 다른 스레드가 <code>lock.unlock()</code>을 호출 했을 때 대기가 풀리며 락 획득 시도, 락을 획득하면 대기 큐를 빠져나간다. 그리고 임계영역에 들어오는데 소비자 스레드라고 한다면 큐에 데이터를 꺼낼 것이다. 하지만 데이터가 없다면 <code>condition.await()</code>를 호출하여 <code>condition</code> 객체의 스레드 대기 공간에서 관리를 한다. 그리고 상태는 <code>WAITING</code>상태로 변경된다. 다른 스레드가 <code>condition.signal()</code>을 호출 했을 때 <code>condition</code> 객체의 스레드 대기 공간에서 빠져나간다.</p>\n<blockquote>\n<p>✅ 참고</p>\n<p>깨어난 스레드는 바로 실행되는 것이 아니다. <code>synchronized</code>와 마찬가지로 <code>ReentrantLock</code>도 대기소가 2단계로 되어 있다. 2단계 대기소인 <code>condition</code> 객체의 스레드 대기 공간을 빠져나온다고 바로 실행되는 것이 아니다. 임계 영역 안에서는 항상 락이 있는 하나의 스레드만 실행될 수 있다. 여기서는 <code>ReentrantLock</code>의 락을 획득해야 <code>RUNNABLE</code> 상태가 되면서 그 다음 코드를 실행할 수 있다. 락을 획득하지 못하면 <code>WAITING</code> 상태로 락을 획득할 때 까지 <code>ReentrantLock</code>의 대기 큐에서 대기한다.</p>\n</blockquote>\n<h2>중간 정리 - 생산자 소비자 문제</h2>\n<p>처음에는 단순한 큐 자료구조를 이용했다. 스레드를 제어할 수 없기 때문에, 버퍼가 가득 차거나, 버퍼에 데이터가 없는 한정된 버퍼 상황에서 문제가 발생한다. 큐가 꽉 차면 데이터를 버리게 되는 문제도 발생했고 큐에 자료가 없다면 null을 반환하는 문제도 발생하였다.</p>\n<p>이 문제를 해결하고자 생산자, 소비자 스레드를 대기시키기로 하였다. 하지만 이러니 데드락 문제가 발생하는 결과를 초래했다.</p>\n<p>이를 해결하기 위해 <code>synchronized</code> 와 함께 사용할 수 있는 <code>wait()</code>,<code>notify()</code>,<code>notifyAll()</code>을 사용해서 문제를 해결했다. <code>wait()</code>를 사용하면 스레드가 대기할 때, 락을 반납하고 대기한다. 이후에 <code>notify()</code>를 호출하면 스레드가 깨어나면서 락 획득을 시도한다. 이때 락을 획득하면 <code>RUNNABLE</code> 상태가 되고, 락을 획득하지 못하면 락 획득을 대기하는 <code>BLOCKED</code> 상태가 된다. 이렇게 해서 스레드를 제어하는 큐 자료 구조를 만들 수 있었다. 생산자 스레드는 버퍼가 가득차면 버퍼에 여유가 생길 때 까지 대기한다. 소비자 스레드는 버퍼에 데이터가 없으면 버퍼에 데이터가 들어올 때 까지 대기한다. 이런 구현 덕분에 단순한 자료 구조를 넘어서 스레드까지 제어할 수 있는 자료 구조를 완성했다. 이 방식의 단점은 스레드가 대기하는 대기 집합이 하나이기 때문에, 원하는 스레드를 선택해서 깨울 수 없다는 문제가 있었다.</p>\n<p>그래서 <code>ReetrantLock</code>을 이용하여 생산자 대기 공간과 소비자 대기 공간을 나누고 생산자 스레드는 대기 공간을 깨울 때 소비자 대기 공간을 소비자 스레드는 생산자 대기 공간을 깨우면 되는 것이다. 그리고 이것을 자바에서 구현해두었는데 바로 <code>BlockingQueue</code>이다.</p>\n<h2>BlockingQueue - 예제6</h2>\n<p>자바는 생산자 소비자 문제를 해결하기 위해 <code>java.util.concurrent.BlockingQueue</code>라는 특별한 멀티스레드 자료 구조를 제공한다. 이것은 이름 그대로 스레드를 차단(Blocking) 할 수 있는 큐다.</p>\n<blockquote>\n<p>⚠️ 주의</p>\n<p>차단이라고 해서 스레드 상태가 차단 상태가 아니다! 그냥 말 그대로 스레드가 접근 못하게 막는다는 것이다.</p>\n</blockquote>\n<ul>\n<li>데이터 추가 차단: 큐가 가득 차면 데이터 추가 작업(<code>put()</code>)을 시도하는 스레드는 공간이 생길 때까지 차단된다.</li>\n<li>데이터 획득 차단: 큐가 비어 있으면 획득 작업(<code>take()</code>)을 시도하는 스레드는 큐에 데이터가 들어올 때까지 차단된다.</li>\n</ul>\n<p><code>BlockingQueue</code>는 인터페이스이고, 다양한 기능을 제공한다. 그리고 이 인터페이스를 구현하는 구현체들도 존재한다.</p>\n<ul>\n<li><code>ArrayBlockingQueue</code> : 배열 기반으로 구현되어 있고, 버퍼의 크기가 고정되어 있다.</li>\n<li><code>LinkedBlockingQueue</code> : 링크 기반으로 구현되어 있고, 버퍼의 크기를 고정할 수도, 또는 무한하게 사용할 수 도 있다.</li>\n</ul>\n<blockquote>\n<p>✅ 참고</p>\n<p><code>Deque</code> 용 동시성 자료 구조인 <code>BlockingDeque</code>도 있다. 동시성 자료 구조들은 추후에 다루겠다.</p>\n</blockquote>\n<p>그럼 <code>BlockingQueue</code>를 이용하여 기존 코드를 고쳐보겠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">thread<span class=\"token punctuation\">.</span>bounded</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>concurrent<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ArrayBlockingQueue</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>concurrent<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">BlockingQueue</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BoundedQueueV6_1</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">BoundedQueue</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">BlockingQueue</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> queue<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">BoundedQueueV6_1</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> max<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        queue <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayBlockingQueue</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span>max<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            queue<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RuntimeException</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">take</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> queue<span class=\"token punctuation\">.</span><span class=\"token function\">take</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RuntimeException</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> queue<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>보면 우리가 이전에 작성했던 구조와 거의 유사하다. <code>ArrayBlockingQueue</code> 는 내부에서 <code>ReentrantLock</code>을 사용한다. 그리고 생산자 전용 대기실과 소비자 전용 대기실이 있다. 만약 버퍼가 가득 차면 생산자 스레드는 생산자 전용 대기실에서 대기(<code>await()</code>)한다. 생산자 스레드가 생산을 완료하면 소비자 전용 대기실에 <code>signal()</code>로 신호를 전달한다.</p>\n<p>우리가 구현한 기능과 차이가 있다면 인터럽트가 걸릴 수 있도록, <code>lock.lock()</code> 대신에 <code>lock.lockInterruptibly()</code>을 사용한 점과, 내부 자료 구조의 차이 정도이다.</p>\n<h2>BlockingQueue - 기능 설명</h2>\n<p>실무에서 웹 어플리케이션을 만든다면 가장 중요한 것은 데이터 정합성도 중요하지만 고객에게 빠른 응답성이 제일 중요하다고 생각한다. 예를들어, 선착순 100% 할인 쿠폰 이벤트를 진행한다고 해보자. 큐의 한계가 10000개라고 가정하자. 선착순 이벤트로 생성자 스레드가 폭주할 것이다. 하지만 소비자 스레드가 100개밖에 없다면 고객은 엄청 오래 대기해야할 것이고 짜증나서 페이지를 닫아버릴 수 있을 것이다. 이렇게 생산자 스레드가 큐에 데이터를 추가할 때 큐가 가득 찬 경우, 또는 큐에 데이터를 추가하기 위해 너무 오래 대기 한 경우에는 데이터 추가를 포기하고, 고객에게 주문 폭주로 너무 많은 사용자가 몰려서 요청을 처리할 수 없다거나, 또는 나중에 다시 시도해달라고 하는 것이 더 나은 선택일 것이다.</p>\n<p>큐가 가득 찼을 때는 아래와 같이 4가지 경우로 처리할 수 있다.</p>\n<ul>\n<li>예외를 던진다. 예외를 받아서 처리한다.</li>\n<li>대기하지 않는다. 즉시 <code>false</code>를 반환한다.</li>\n<li>대기한다.</li>\n<li>특정 시간 만큼만 대기한다.</li>\n</ul>\n<h3>Throws Exception - 대기시 예외</h3>\n<ul>\n<li>add(e): 지정된 요소를 큐에 추가하며, 큐가 가득 차면 <code>IllegalStateException</code> 예외를 던진다.</li>\n<li>remove(): 큐에서 요소를 제거하며 반환한다. 큐가 비어 있으면 <code>NoSuchElementException</code> 예외를 던진다.</li>\n<li>element(): 큐의 머리 요소를 반환하지만, 요소를 큐에서 제거하지 않는다. 큐가 비어 있으면 <code>NoSuchElementException</code> 예외를 던진다.</li>\n</ul>\n<h3>Special Value - 대기시 즉시 반환</h3>\n<ul>\n<li>offer(e): 지정된 요소를 큐에 추가하려고 시도하며, 큐가 가득 차면 <code>false</code>를 반환한다.</li>\n<li>poll(): 큐에서 요소를 제거하고 반환한다. 큐가 비어 있으면 <code>null</code>을 반환한다.</li>\n<li>peek(): 큐의 머리 요소를 반환하지만, 요소를 큐에서 제거하지 않는다. 큐가 비어 있으면 <code>null</code>을 반환한다.</li>\n</ul>\n<h3>Blocks - 대기</h3>\n<ul>\n<li>put(e): 지정된 요소를 큐에 추가할 때까지 대기한다. 큐가 가득 차면 공간이 생길 때까지 대기한다.</li>\n<li>take(): 큐에서 요소를 제거하고 반환한다. 큐가 비어 있으면 요소가 준비될 때까지 대기한다.</li>\n<li>Examine (관찰): 해당 사항 없음.</li>\n</ul>\n<h3>Times Out - 시간 대기</h3>\n<ul>\n<li>offer(e, time, unit): 지정된 요소를 큐에 추가하려고 시도하며, 지정된 시간 동안 큐가 비워지기를 기다리다가 시간이 초과되면 <code>false</code>를 반환한다.</li>\n<li>poll(time, unit): 큐에서 요소를 제거하고 반환한다. 큐에 요소가 없다면 지정된 시간 동안 요소가 준비되기를 기다리다가 시간이 초과되면 <code>null</code>을 반환한다.</li>\n<li>Examine (관찰): 해당 사항 없음.</li>\n</ul>\n<h2>BlockingQueue - 기능 확인</h2>\n<p>그러면 기능들을 하나씩 살펴보자. <code>BlockingQueue</code>의 <code>offer(data)</code>,<code>poll()</code>를 사용해서 스레드를 대기하지 않고 즉시 반환해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">thread<span class=\"token punctuation\">.</span>bounded</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>concurrent<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ArrayBlockingQueue</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>concurrent<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">BlockingQueue</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">static</span> <span class=\"token import static\"><span class=\"token namespace\">util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">MyLogger</span><span class=\"token punctuation\">.</span><span class=\"token static\">log</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BoundedQueueV6_2</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">BoundedQueue</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">BlockingQueue</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> queue<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">BoundedQueueV6_2</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> max<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        queue <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayBlockingQueue</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span>max<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">boolean</span> result <span class=\"token operator\">=</span> queue<span class=\"token punctuation\">.</span><span class=\"token function\">offer</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"저장 시도 결과 = \"</span> <span class=\"token operator\">+</span> result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">take</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> queue<span class=\"token punctuation\">.</span><span class=\"token function\">poll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> queue<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>결과 값을 보면 알겠지만 우리가 처음에 만든 V1예제와 동일하게 나온다.</p>\n<p>다음으로 <code>BlockingQueue</code>의 <code>offer(data, 시간)</code>,<code>poll(시간)</code>를 사용해서, 특정 시간 만큼만 대기하도록 해보자. 메서드는 마치 <code>Queue</code> 인터페이스와 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">thread<span class=\"token punctuation\">.</span>bounded</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>concurrent<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ArrayBlockingQueue</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>concurrent<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">BlockingQueue</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>concurrent<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">TimeUnit</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">static</span> <span class=\"token import static\"><span class=\"token namespace\">util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">MyLogger</span><span class=\"token punctuation\">.</span><span class=\"token static\">log</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BoundedQueueV6_3</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">BoundedQueue</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">BlockingQueue</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> queue<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">BoundedQueueV6_3</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> max<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        queue <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayBlockingQueue</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span>max<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">boolean</span> result <span class=\"token operator\">=</span> queue<span class=\"token punctuation\">.</span><span class=\"token function\">offer</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">TimeUnit</span><span class=\"token punctuation\">.</span><span class=\"token constant\">NANOSECONDS</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"저장 시도 결과 = \"</span> <span class=\"token operator\">+</span> result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RuntimeException</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">take</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> queue<span class=\"token punctuation\">.</span><span class=\"token function\">poll</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">TimeUnit</span><span class=\"token punctuation\">.</span><span class=\"token constant\">SECONDS</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RuntimeException</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> queue<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>위의 코드는 특정 시간만큼 대기를 하고 만약 그 시간을 넘기면 특정 값을 반환한다. <code>put()</code> 메서드는 큐가 가득 차면 <code>false</code>를 반환, <code>take()</code> 메서드는 큐에 데이터가 없다면 <code>null</code>을 반환한다.</p>\n<p><code>BlockingQueue</code>의 <code>add(data)</code>,<code>remove()</code>를 사용해서, 대기시 예외가 발생하도록 해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-java line-numbers\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">thread<span class=\"token punctuation\">.</span>bounded</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>concurrent<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ArrayBlockingQueue</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>concurrent<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">BlockingQueue</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BoundedQueueV6_4</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">BoundedQueue</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">BlockingQueue</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> queue<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">BoundedQueueV6_4</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> max<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        queue <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayBlockingQueue</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span>max<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        queue<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">take</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> queue<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> queue<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>이렇게 우리는 생산자 소비자 문제의 원인부터 <code>BlockingQueue</code>까지 알아보았다. 내용이 긴 만큼 그 동안의 내용을 잘 기억해두자.</p>\n<blockquote>\n<p>잘못된 지식이 있을 경우 댓글로 남겨주시면 빠르게 반영하겠습니다!</p>\n</blockquote>","fields":{"slug":"/생산자-소비자-문제2/"},"timeToRead":11,"frontmatter":{"title":"[자바 고급1] 생산자 소비자 문제2","tags":["자바"],"date":"2025-05-17T02:30:27.000Z","image":{"publicURL":"/static/3189e9c0404650ccc6c5ffc998bc8717/banner.png"},"series":"자바 고급1"}}},"pageContext":{"id":"7e1a235e-71c1-5171-a01f-46a3816ac2b8"}},
    "staticQueryHashes": ["2580406332","3810308631"]}